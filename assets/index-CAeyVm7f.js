(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $a(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const It={},yr=[],Le=()=>{},yh=()=>!1,Zi=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),qa=e=>e.startsWith("onUpdate:"),ae=Object.assign,Ha=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},zp=Object.prototype.hasOwnProperty,_t=(e,t)=>zp.call(e,t),et=Array.isArray,Er=e=>js(e)==="[object Map]",Eh=e=>js(e)==="[object Set]",Vc=e=>js(e)==="[object Date]",it=e=>typeof e=="function",Ut=e=>typeof e=="string",Pe=e=>typeof e=="symbol",At=e=>e!==null&&typeof e=="object",Th=e=>(At(e)||it(e))&&it(e.then)&&it(e.catch),vh=Object.prototype.toString,js=e=>vh.call(e),Kp=e=>js(e).slice(8,-1),Ih=e=>js(e)==="[object Object]",za=e=>Ut(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ps=$a(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),to=e=>{const t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},Wp=/-\w/g,An=to(e=>e.replace(Wp,t=>t.slice(1).toUpperCase())),Gp=/\B([A-Z])/g,Xn=to(e=>e.replace(Gp,"-$1").toLowerCase()),wh=to(e=>e.charAt(0).toUpperCase()+e.slice(1)),$o=to(e=>e?`on${wh(e)}`:""),yn=(e,t)=>!Object.is(e,t),gi=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Ah=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},Ka=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Dc;const eo=()=>Dc||(Dc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Or(e){if(et(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Ut(r)?Jp(r):Or(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Ut(e)||At(e))return e}const Qp=/;(?![^(]*\))/g,Xp=/:([^]+)/,Yp=/\/\*[^]*?\*\//g;function Jp(e){const t={};return e.replace(Yp,"").split(Qp).forEach(n=>{if(n){const r=n.split(Xp);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Wa(e){let t="";if(Ut(e))t=e;else if(et(e))for(let n=0;n<e.length;n++){const r=Wa(e[n]);r&&(t+=r+" ")}else if(At(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const Zp="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tm=$a(Zp);function bh(e){return!!e||e===""}function em(e,t){if(e.length!==t.length)return!1;let n=!0;for(let r=0;n&&r<e.length;r++)n=Si(e[r],t[r]);return n}function Si(e,t){if(e===t)return!0;let n=Vc(e),r=Vc(t);if(n||r)return n&&r?e.getTime()===t.getTime():!1;if(n=Pe(e),r=Pe(t),n||r)return e===t;if(n=et(e),r=et(t),n||r)return n&&r?em(e,t):!1;if(n=At(e),r=At(t),n||r){if(!n||!r)return!1;const s=Object.keys(e).length,i=Object.keys(t).length;if(s!==i)return!1;for(const a in e){const l=e.hasOwnProperty(a),u=t.hasOwnProperty(a);if(l&&!u||!l&&u||!Si(e[a],t[a]))return!1}}return String(e)===String(t)}const Sh=e=>!!(e&&e.__v_isRef===!0),fr=e=>Ut(e)?e:e==null?"":et(e)||At(e)&&(e.toString===vh||!it(e.toString))?Sh(e)?fr(e.value):JSON.stringify(e,Rh,2):String(e),Rh=(e,t)=>Sh(t)?Rh(e,t.value):Er(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[qo(r,i)+" =>"]=s,n),{})}:Eh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>qo(n))}:Pe(t)?qo(t):At(t)&&!et(t)&&!Ih(t)?String(t):t,qo=(e,t="")=>{var n;return Pe(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ne;class Ch{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ne,!t&&ne&&(this.index=(ne.scopes||(ne.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ne;try{return ne=this,t()}finally{ne=n}}}on(){++this._on===1&&(this.prevScope=ne,ne=this)}off(){this._on>0&&--this._on===0&&(ne=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Ph(e){return new Ch(e)}function Vh(){return ne}function nm(e,t=!1){ne&&ne.cleanups.push(e)}let bt;const Ho=new WeakSet;class Dh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ne&&ne.active&&ne.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Ho.has(this)&&(Ho.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Nh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xc(this),Oh(this);const t=bt,n=Ce;bt=this,Ce=!0;try{return this.fn()}finally{Mh(this),bt=t,Ce=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Xa(t);this.deps=this.depsTail=void 0,xc(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Ho.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ca(this)&&this.run()}get dirty(){return ca(this)}}let xh=0,ms,gs;function Nh(e,t=!1){if(e.flags|=8,t){e.next=gs,gs=e;return}e.next=ms,ms=e}function Ga(){xh++}function Qa(){if(--xh>0)return;if(gs){let t=gs;for(gs=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;ms;){let t=ms;for(ms=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Oh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Mh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Xa(r),rm(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function ca(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(kh(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function kh(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Rs)||(e.globalVersion=Rs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!ca(e))))return;e.flags|=2;const t=e.dep,n=bt,r=Ce;bt=e,Ce=!0;try{Oh(e);const s=e.fn(e._value);(t.version===0||yn(s,e._value))&&(e.flags|=128,e._value=s,t.version++)}catch(s){throw t.version++,s}finally{bt=n,Ce=r,Mh(e),e.flags&=-3}}function Xa(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Xa(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function rm(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let Ce=!0;const Lh=[];function Je(){Lh.push(Ce),Ce=!1}function Ze(){const e=Lh.pop();Ce=e===void 0?!0:e}function xc(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=bt;bt=void 0;try{t()}finally{bt=n}}}let Rs=0;class sm{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ya{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!bt||!Ce||bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==bt)n=this.activeLink=new sm(bt,this),bt.deps?(n.prevDep=bt.depsTail,bt.depsTail.nextDep=n,bt.depsTail=n):bt.deps=bt.depsTail=n,Fh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=bt.depsTail,n.nextDep=void 0,bt.depsTail.nextDep=n,bt.depsTail=n,bt.deps===n&&(bt.deps=r)}return n}trigger(t){this.version++,Rs++,this.notify(t)}notify(t){Ga();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Qa()}}}function Fh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Fh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Ri=new WeakMap,zn=Symbol(""),ua=Symbol(""),Cs=Symbol("");function se(e,t,n){if(Ce&&bt){let r=Ri.get(e);r||Ri.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new Ya),s.map=r,s.key=n),s.track()}}function Ge(e,t,n,r,s,i){const a=Ri.get(e);if(!a){Rs++;return}const l=u=>{u&&u.trigger()};if(Ga(),t==="clear")a.forEach(l);else{const u=et(e),f=u&&za(n);if(u&&n==="length"){const d=Number(r);a.forEach((m,E)=>{(E==="length"||E===Cs||!Pe(E)&&E>=d)&&l(m)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(Cs)),t){case"add":u?f&&l(a.get("length")):(l(a.get(zn)),Er(e)&&l(a.get(ua)));break;case"delete":u||(l(a.get(zn)),Er(e)&&l(a.get(ua)));break;case"set":Er(e)&&l(a.get(zn));break}}Qa()}function im(e,t){const n=Ri.get(e);return n&&n.get(t)}function lr(e){const t=pt(e);return t===e?t:(se(t,"iterate",Cs),we(e)?t:t.map(Qt))}function no(e){return se(e=pt(e),"iterate",Cs),e}const om={__proto__:null,[Symbol.iterator](){return zo(this,Symbol.iterator,Qt)},concat(...e){return lr(this).concat(...e.map(t=>et(t)?lr(t):t))},entries(){return zo(this,"entries",e=>(e[1]=Qt(e[1]),e))},every(e,t){return Ke(this,"every",e,t,void 0,arguments)},filter(e,t){return Ke(this,"filter",e,t,n=>n.map(Qt),arguments)},find(e,t){return Ke(this,"find",e,t,Qt,arguments)},findIndex(e,t){return Ke(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Ke(this,"findLast",e,t,Qt,arguments)},findLastIndex(e,t){return Ke(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Ke(this,"forEach",e,t,void 0,arguments)},includes(...e){return Ko(this,"includes",e)},indexOf(...e){return Ko(this,"indexOf",e)},join(e){return lr(this).join(e)},lastIndexOf(...e){return Ko(this,"lastIndexOf",e)},map(e,t){return Ke(this,"map",e,t,void 0,arguments)},pop(){return ss(this,"pop")},push(...e){return ss(this,"push",e)},reduce(e,...t){return Nc(this,"reduce",e,t)},reduceRight(e,...t){return Nc(this,"reduceRight",e,t)},shift(){return ss(this,"shift")},some(e,t){return Ke(this,"some",e,t,void 0,arguments)},splice(...e){return ss(this,"splice",e)},toReversed(){return lr(this).toReversed()},toSorted(e){return lr(this).toSorted(e)},toSpliced(...e){return lr(this).toSpliced(...e)},unshift(...e){return ss(this,"unshift",e)},values(){return zo(this,"values",Qt)}};function zo(e,t,n){const r=no(e),s=r[t]();return r!==e&&!we(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.done||(i.value=n(i.value)),i}),s}const am=Array.prototype;function Ke(e,t,n,r,s,i){const a=no(e),l=a!==e&&!we(e),u=a[t];if(u!==am[t]){const m=u.apply(e,i);return l?Qt(m):m}let f=n;a!==e&&(l?f=function(m,E){return n.call(this,Qt(m),E,e)}:n.length>2&&(f=function(m,E){return n.call(this,m,E,e)}));const d=u.call(a,f,r);return l&&s?s(d):d}function Nc(e,t,n,r){const s=no(e);let i=n;return s!==e&&(we(e)?n.length>3&&(i=function(a,l,u){return n.call(this,a,l,u,e)}):i=function(a,l,u){return n.call(this,a,Qt(l),u,e)}),s[t](i,...r)}function Ko(e,t,n){const r=pt(e);se(r,"iterate",Cs);const s=r[t](...n);return(s===-1||s===!1)&&tl(n[0])?(n[0]=pt(n[0]),r[t](...n)):s}function ss(e,t,n=[]){Je(),Ga();const r=pt(e)[t].apply(e,n);return Qa(),Ze(),r}const lm=$a("__proto__,__v_isRef,__isVue"),Uh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Pe));function cm(e){Pe(e)||(e=String(e));const t=pt(this);return se(t,"has",e),t.hasOwnProperty(e)}class Bh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Em:Hh:i?qh:$h).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=et(t);if(!s){let u;if(a&&(u=om[n]))return u;if(n==="hasOwnProperty")return cm}const l=Reflect.get(t,n,wt(t)?t:r);if((Pe(n)?Uh.has(n):lm(n))||(s||se(t,"get",n),i))return l;if(wt(l)){const u=a&&za(n)?l:l.value;return s&&At(u)?fa(u):u}return At(l)?s?fa(l):ro(l):l}}class jh extends Bh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const u=bn(i);if(!we(r)&&!bn(r)&&(i=pt(i),r=pt(r)),!et(t)&&wt(i)&&!wt(r))return u||(i.value=r),!0}const a=et(t)&&za(n)?Number(n)<t.length:_t(t,n),l=Reflect.set(t,n,r,wt(t)?t:s);return t===pt(s)&&(a?yn(r,i)&&Ge(t,"set",n,r):Ge(t,"add",n,r)),l}deleteProperty(t,n){const r=_t(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Ge(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Pe(n)||!Uh.has(n))&&se(t,"has",n),r}ownKeys(t){return se(t,"iterate",et(t)?"length":zn),Reflect.ownKeys(t)}}class um extends Bh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const hm=new jh,fm=new um,dm=new jh(!0);const ha=e=>e,oi=e=>Reflect.getPrototypeOf(e);function pm(e,t,n){return function(...r){const s=this.__v_raw,i=pt(s),a=Er(i),l=e==="entries"||e===Symbol.iterator&&a,u=e==="keys"&&a,f=s[e](...r),d=n?ha:t?Ci:Qt;return!t&&se(i,"iterate",u?ua:zn),{next(){const{value:m,done:E}=f.next();return E?{value:m,done:E}:{value:l?[d(m[0]),d(m[1])]:d(m),done:E}},[Symbol.iterator](){return this}}}}function ai(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function mm(e,t){const n={get(s){const i=this.__v_raw,a=pt(i),l=pt(s);e||(yn(s,l)&&se(a,"get",s),se(a,"get",l));const{has:u}=oi(a),f=t?ha:e?Ci:Qt;if(u.call(a,s))return f(i.get(s));if(u.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&se(pt(s),"iterate",zn),s.size},has(s){const i=this.__v_raw,a=pt(i),l=pt(s);return e||(yn(s,l)&&se(a,"has",s),se(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,u=pt(l),f=t?ha:e?Ci:Qt;return!e&&se(u,"iterate",zn),l.forEach((d,m)=>s.call(i,f(d),f(m),a))}};return ae(n,e?{add:ai("add"),set:ai("set"),delete:ai("delete"),clear:ai("clear")}:{add(s){!t&&!we(s)&&!bn(s)&&(s=pt(s));const i=pt(this);return oi(i).has.call(i,s)||(i.add(s),Ge(i,"add",s,s)),this},set(s,i){!t&&!we(i)&&!bn(i)&&(i=pt(i));const a=pt(this),{has:l,get:u}=oi(a);let f=l.call(a,s);f||(s=pt(s),f=l.call(a,s));const d=u.call(a,s);return a.set(s,i),f?yn(i,d)&&Ge(a,"set",s,i):Ge(a,"add",s,i),this},delete(s){const i=pt(this),{has:a,get:l}=oi(i);let u=a.call(i,s);u||(s=pt(s),u=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return u&&Ge(i,"delete",s,void 0),f},clear(){const s=pt(this),i=s.size!==0,a=s.clear();return i&&Ge(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=pm(s,e,t)}),n}function Ja(e,t){const n=mm(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(_t(n,s)&&s in r?n:r,s,i)}const gm={get:Ja(!1,!1)},_m={get:Ja(!1,!0)},ym={get:Ja(!0,!1)};const $h=new WeakMap,qh=new WeakMap,Hh=new WeakMap,Em=new WeakMap;function Tm(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function vm(e){return e.__v_skip||!Object.isExtensible(e)?0:Tm(Kp(e))}function ro(e){return bn(e)?e:Za(e,!1,hm,gm,$h)}function Im(e){return Za(e,!1,dm,_m,qh)}function fa(e){return Za(e,!0,fm,ym,Hh)}function Za(e,t,n,r,s){if(!At(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=vm(e);if(i===0)return e;const a=s.get(e);if(a)return a;const l=new Proxy(e,i===2?r:n);return s.set(e,l),l}function Xe(e){return bn(e)?Xe(e.__v_raw):!!(e&&e.__v_isReactive)}function bn(e){return!!(e&&e.__v_isReadonly)}function we(e){return!!(e&&e.__v_isShallow)}function tl(e){return e?!!e.__v_raw:!1}function pt(e){const t=e&&e.__v_raw;return t?pt(t):e}function el(e){return!_t(e,"__v_skip")&&Object.isExtensible(e)&&Ah(e,"__v_skip",!0),e}const Qt=e=>At(e)?ro(e):e,Ci=e=>At(e)?fa(e):e;function wt(e){return e?e.__v_isRef===!0:!1}function so(e){return wm(e,!1)}function wm(e,t){return wt(e)?e:new Am(e,t)}class Am{constructor(t,n){this.dep=new Ya,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:pt(t),this._value=n?t:Qt(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||we(t)||bn(t);t=r?t:pt(t),yn(t,n)&&(this._rawValue=t,this._value=r?t:Qt(t),this.dep.trigger())}}function xt(e){return wt(e)?e.value:e}const bm={get:(e,t,n)=>t==="__v_raw"?e:xt(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return wt(s)&&!wt(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function zh(e){return Xe(e)?e:new Proxy(e,bm)}function Sm(e){const t=et(e)?new Array(e.length):{};for(const n in e)t[n]=Kh(e,n);return t}class Rm{constructor(t,n,r){this._object=t,this._key=n,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return im(pt(this._object),this._key)}}class Cm{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function Pm(e,t,n){return wt(e)?e:it(e)?new Cm(e):At(e)&&arguments.length>1?Kh(e,t,n):so(e)}function Kh(e,t,n){const r=e[t];return wt(r)?r:new Rm(e,t,n)}class Vm{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new Ya(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Rs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return Nh(this,!0),!0}get value(){const t=this.dep.track();return kh(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Dm(e,t,n=!1){let r,s;return it(e)?r=e:(r=e.get,s=e.set),new Vm(r,s,n)}const li={},Pi=new WeakMap;let jn;function xm(e,t=!1,n=jn){if(n){let r=Pi.get(n);r||Pi.set(n,r=[]),r.push(e)}}function Nm(e,t,n=It){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:u}=n,f=z=>s?z:we(z)||s===!1||s===0?Qe(z,1):Qe(z);let d,m,E,A,D=!1,U=!1;if(wt(e)?(m=()=>e.value,D=we(e)):Xe(e)?(m=()=>f(e),D=!0):et(e)?(U=!0,D=e.some(z=>Xe(z)||we(z)),m=()=>e.map(z=>{if(wt(z))return z.value;if(Xe(z))return f(z);if(it(z))return u?u(z,2):z()})):it(e)?t?m=u?()=>u(e,2):e:m=()=>{if(E){Je();try{E()}finally{Ze()}}const z=jn;jn=d;try{return u?u(e,3,[A]):e(A)}finally{jn=z}}:m=Le,t&&s){const z=m,rt=s===!0?1/0:s;m=()=>Qe(z(),rt)}const B=Vh(),K=()=>{d.stop(),B&&B.active&&Ha(B.effects,d)};if(i&&t){const z=t;t=(...rt)=>{z(...rt),K()}}let W=U?new Array(e.length).fill(li):li;const Q=z=>{if(!(!(d.flags&1)||!d.dirty&&!z))if(t){const rt=d.run();if(s||D||(U?rt.some((Et,w)=>yn(Et,W[w])):yn(rt,W))){E&&E();const Et=jn;jn=d;try{const w=[rt,W===li?void 0:U&&W[0]===li?[]:W,A];W=rt,u?u(t,3,w):t(...w)}finally{jn=Et}}}else d.run()};return l&&l(Q),d=new Dh(m),d.scheduler=a?()=>a(Q,!1):Q,A=z=>xm(z,!1,d),E=d.onStop=()=>{const z=Pi.get(d);if(z){if(u)u(z,4);else for(const rt of z)rt();Pi.delete(d)}},t?r?Q(!0):W=d.run():a?a(Q.bind(null,!0),!0):d.run(),K.pause=d.pause.bind(d),K.resume=d.resume.bind(d),K.stop=K,K}function Qe(e,t=1/0,n){if(t<=0||!At(e)||e.__v_skip||(n=n||new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,wt(e))Qe(e.value,t,n);else if(et(e))for(let r=0;r<e.length;r++)Qe(e[r],t,n);else if(Eh(e)||Er(e))e.forEach(r=>{Qe(r,t,n)});else if(Ih(e)){for(const r in e)Qe(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&Qe(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function $s(e,t,n,r){try{return r?e(...r):e()}catch(s){io(s,t,n)}}function $e(e,t,n,r){if(it(e)){const s=$s(e,t,n,r);return s&&Th(s)&&s.catch(i=>{io(i,t,n)}),s}if(et(e)){const s=[];for(let i=0;i<e.length;i++)s.push($e(e[i],t,n,r));return s}}function io(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||It;if(t){let l=t.parent;const u=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let m=0;m<d.length;m++)if(d[m](e,u,f)===!1)return}l=l.parent}if(i){Je(),$s(i,null,10,[e,u,f]),Ze();return}}Om(e,n,s,r,a)}function Om(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const ue=[];let Oe=-1;const Tr=[];let pn=null,dr=0;const Wh=Promise.resolve();let Vi=null;function Gh(e){const t=Vi||Wh;return e?t.then(this?e.bind(this):e):t}function Mm(e){let t=Oe+1,n=ue.length;for(;t<n;){const r=t+n>>>1,s=ue[r],i=Ps(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function nl(e){if(!(e.flags&1)){const t=Ps(e),n=ue[ue.length-1];!n||!(e.flags&2)&&t>=Ps(n)?ue.push(e):ue.splice(Mm(t),0,e),e.flags|=1,Qh()}}function Qh(){Vi||(Vi=Wh.then(Yh))}function km(e){et(e)?Tr.push(...e):pn&&e.id===-1?pn.splice(dr+1,0,e):e.flags&1||(Tr.push(e),e.flags|=1),Qh()}function Oc(e,t,n=Oe+1){for(;n<ue.length;n++){const r=ue[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;ue.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Xh(e){if(Tr.length){const t=[...new Set(Tr)].sort((n,r)=>Ps(n)-Ps(r));if(Tr.length=0,pn){pn.push(...t);return}for(pn=t,dr=0;dr<pn.length;dr++){const n=pn[dr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}pn=null,dr=0}}const Ps=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Yh(e){try{for(Oe=0;Oe<ue.length;Oe++){const t=ue[Oe];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),$s(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Oe<ue.length;Oe++){const t=ue[Oe];t&&(t.flags&=-2)}Oe=-1,ue.length=0,Xh(),Vi=null,(ue.length||Tr.length)&&Yh()}}let oe=null,Jh=null;function Di(e){const t=oe;return oe=e,Jh=e&&e.type.__scopeId||null,t}function ls(e,t=oe,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Hc(-1);const i=Di(t);let a;try{a=e(...s)}finally{Di(i),r._d&&Hc(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function is(e,t){if(oe===null)return e;const n=co(oe),r=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[i,a,l,u=It]=t[s];i&&(it(i)&&(i={mounted:i,updated:i}),i.deep&&Qe(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:l,modifiers:u}))}return e}function Un(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let u=l.dir[r];u&&(Je(),$e(u,n,8,[e.el,l,e,t]),Ze())}}const Lm=Symbol("_vte"),Fm=e=>e.__isTeleport,Um=Symbol("_leaveCb");function rl(e,t){e.shapeFlag&6&&e.component?(e.transition=t,rl(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function qs(e,t){return it(e)?ae({name:e.name},t,{setup:e}):e}function Zh(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}const xi=new WeakMap;function _s(e,t,n,r,s=!1){if(et(e)){e.forEach((D,U)=>_s(D,t&&(et(t)?t[U]:t),n,r,s));return}if(vr(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&_s(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?co(r.component):r.el,a=s?null:i,{i:l,r:u}=e,f=t&&t.r,d=l.refs===It?l.refs={}:l.refs,m=l.setupState,E=pt(m),A=m===It?yh:D=>_t(E,D);if(f!=null&&f!==u){if(Mc(t),Ut(f))d[f]=null,A(f)&&(m[f]=null);else if(wt(f)){f.value=null;const D=t;D.k&&(d[D.k]=null)}}if(it(u))$s(u,l,12,[a,d]);else{const D=Ut(u),U=wt(u);if(D||U){const B=()=>{if(e.f){const K=D?A(u)?m[u]:d[u]:u.value;if(s)et(K)&&Ha(K,i);else if(et(K))K.includes(i)||K.push(i);else if(D)d[u]=[i],A(u)&&(m[u]=d[u]);else{const W=[i];u.value=W,e.k&&(d[e.k]=W)}}else D?(d[u]=a,A(u)&&(m[u]=a)):U&&(u.value=a,e.k&&(d[e.k]=a))};if(a){const K=()=>{B(),xi.delete(e)};K.id=-1,xi.set(e,K),_e(K,n)}else Mc(e),B()}}}function Mc(e){const t=xi.get(e);t&&(t.flags|=8,xi.delete(e))}eo().requestIdleCallback;eo().cancelIdleCallback;const vr=e=>!!e.type.__asyncLoader,tf=e=>e.type.__isKeepAlive;function Bm(e,t){ef(e,"a",t)}function jm(e,t){ef(e,"da",t)}function ef(e,t,n=he){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(oo(t,r,n),n){let s=n.parent;for(;s&&s.parent;)tf(s.parent.vnode)&&$m(r,t,n,s),s=s.parent}}function $m(e,t,n,r){const s=oo(t,e,r,!0);rf(()=>{Ha(r[t],s)},n)}function oo(e,t,n=he,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Je();const l=Hs(n),u=$e(t,n,e,a);return l(),Ze(),u});return r?s.unshift(i):s.push(i),i}}const sn=e=>(t,n=he)=>{(!Ds||e==="sp")&&oo(e,(...r)=>t(...r),n)},qm=sn("bm"),nf=sn("m"),Hm=sn("bu"),zm=sn("u"),Km=sn("bum"),rf=sn("um"),Wm=sn("sp"),Gm=sn("rtg"),Qm=sn("rtc");function Xm(e,t=he){oo("ec",e,t)}const Ym=Symbol.for("v-ndc");function gn(e,t,n,r){let s;const i=n,a=et(e);if(a||Ut(e)){const l=a&&Xe(e);let u=!1,f=!1;l&&(u=!we(e),f=bn(e),e=no(e)),s=new Array(e.length);for(let d=0,m=e.length;d<m;d++)s[d]=t(u?f?Ci(Qt(e[d])):Qt(e[d]):e[d],d,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(At(e))if(e[Symbol.iterator])s=Array.from(e,(l,u)=>t(l,u,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let u=0,f=l.length;u<f;u++){const d=l[u];s[u]=t(e[d],d,u,i)}}else s=[];return s}function _i(e,t,n={},r,s){if(oe.ce||oe.parent&&vr(oe.parent)&&oe.parent.ce){const f=Object.keys(n).length>0;return t!=="default"&&(n.name=t),mt(),Se(Lt,null,[Ae("slot",n,r)],f?-2:64)}let i=e[t];i&&i._c&&(i._d=!1),mt();const a=i&&sf(i(n)),l=n.key||a&&a.key,u=Se(Lt,{key:(l&&!Pe(l)?l:`_${t}`)+(!a&&r?"_fb":"")},a||[],a&&e._===1?64:-2);return!s&&u.scopeId&&(u.slotScopeIds=[u.scopeId+"-s"]),i&&i._c&&(i._d=!0),u}function sf(e){return e.some(t=>ol(t)?!(t.type===tn||t.type===Lt&&!sf(t.children)):!0)?e:null}const da=e=>e?Sf(e)?co(e):da(e.parent):null,ys=ae(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>da(e.parent),$root:e=>da(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>af(e),$forceUpdate:e=>e.f||(e.f=()=>{nl(e.update)}),$nextTick:e=>e.n||(e.n=Gh.bind(e.proxy)),$watch:e=>Tg.bind(e)}),Wo=(e,t)=>e!==It&&!e.__isScriptSetup&&_t(e,t),Jm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:u}=e;let f;if(t[0]!=="$"){const A=a[t];if(A!==void 0)switch(A){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Wo(r,t))return a[t]=1,r[t];if(s!==It&&_t(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&_t(f,t))return a[t]=3,i[t];if(n!==It&&_t(n,t))return a[t]=4,n[t];pa&&(a[t]=0)}}const d=ys[t];let m,E;if(d)return t==="$attrs"&&se(e.attrs,"get",""),d(e);if((m=l.__cssModules)&&(m=m[t]))return m;if(n!==It&&_t(n,t))return a[t]=4,n[t];if(E=u.config.globalProperties,_t(E,t))return E[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Wo(s,t)?(s[t]=n,!0):r!==It&&_t(r,t)?(r[t]=n,!0):_t(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i,type:a}},l){let u,f;return!!(n[l]||e!==It&&l[0]!=="$"&&_t(e,l)||Wo(t,l)||(u=i[0])&&_t(u,l)||_t(r,l)||_t(ys,l)||_t(s.config.globalProperties,l)||(f=a.__cssModules)&&f[l])},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:_t(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function kc(e){return et(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let pa=!0;function Zm(e){const t=af(e),n=e.proxy,r=e.ctx;pa=!1,t.beforeCreate&&Lc(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:u,inject:f,created:d,beforeMount:m,mounted:E,beforeUpdate:A,updated:D,activated:U,deactivated:B,beforeDestroy:K,beforeUnmount:W,destroyed:Q,unmounted:z,render:rt,renderTracked:Et,renderTriggered:w,errorCaptured:g,serverPrefetch:_,expose:I,inheritAttrs:v,components:S,directives:y,filters:Mt}=t;if(f&&tg(f,r,null),a)for(const at in a){const gt=a[at];it(gt)&&(r[at]=gt.bind(n))}if(s){const at=s.call(n,n);At(at)&&(e.data=ro(at))}if(pa=!0,i)for(const at in i){const gt=i[at],Te=it(gt)?gt.bind(n,n):it(gt.get)?gt.get.bind(n,n):Le,nr=!it(gt)&&it(gt.set)?gt.set.bind(n):Le,Ve=ll({get:Te,set:nr});Object.defineProperty(r,at,{enumerable:!0,configurable:!0,get:()=>Ve.value,set:de=>Ve.value=de})}if(l)for(const at in l)of(l[at],r,n,at);if(u){const at=it(u)?u.call(n):u;Reflect.ownKeys(at).forEach(gt=>{og(gt,at[gt])})}d&&Lc(d,e,"c");function Pt(at,gt){et(gt)?gt.forEach(Te=>at(Te.bind(n))):gt&&at(gt.bind(n))}if(Pt(qm,m),Pt(nf,E),Pt(Hm,A),Pt(zm,D),Pt(Bm,U),Pt(jm,B),Pt(Xm,g),Pt(Qm,Et),Pt(Gm,w),Pt(Km,W),Pt(rf,z),Pt(Wm,_),et(I))if(I.length){const at=e.exposed||(e.exposed={});I.forEach(gt=>{Object.defineProperty(at,gt,{get:()=>n[gt],set:Te=>n[gt]=Te,enumerable:!0})})}else e.exposed||(e.exposed={});rt&&e.render===Le&&(e.render=rt),v!=null&&(e.inheritAttrs=v),S&&(e.components=S),y&&(e.directives=y),_&&Zh(e)}function tg(e,t,n=Le){et(e)&&(e=ma(e));for(const r in e){const s=e[r];let i;At(s)?"default"in s?i=Es(s.from||r,s.default,!0):i=Es(s.from||r):i=Es(s),wt(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Lc(e,t,n){$e(et(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function of(e,t,n,r){let s=r.includes(".")?Tf(n,r):()=>n[r];if(Ut(e)){const i=t[e];it(i)&&Wn(s,i)}else if(it(e))Wn(s,e.bind(n));else if(At(e))if(et(e))e.forEach(i=>of(i,t,n,r));else{const i=it(e.handler)?e.handler.bind(n):t[e.handler];it(i)&&Wn(s,i,e)}}function af(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let u;return l?u=l:!s.length&&!n&&!r?u=t:(u={},s.length&&s.forEach(f=>Ni(u,f,a,!0)),Ni(u,t,a)),At(t)&&i.set(t,u),u}function Ni(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&Ni(e,i,n,!0),s&&s.forEach(a=>Ni(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=eg[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const eg={data:Fc,props:Uc,emits:Uc,methods:cs,computed:cs,beforeCreate:ce,created:ce,beforeMount:ce,mounted:ce,beforeUpdate:ce,updated:ce,beforeDestroy:ce,beforeUnmount:ce,destroyed:ce,unmounted:ce,activated:ce,deactivated:ce,errorCaptured:ce,serverPrefetch:ce,components:cs,directives:cs,watch:rg,provide:Fc,inject:ng};function Fc(e,t){return t?e?function(){return ae(it(e)?e.call(this,this):e,it(t)?t.call(this,this):t)}:t:e}function ng(e,t){return cs(ma(e),ma(t))}function ma(e){if(et(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function ce(e,t){return e?[...new Set([].concat(e,t))]:t}function cs(e,t){return e?ae(Object.create(null),e,t):t}function Uc(e,t){return e?et(e)&&et(t)?[...new Set([...e,...t])]:ae(Object.create(null),kc(e),kc(t??{})):t}function rg(e,t){if(!e)return t;if(!t)return e;const n=ae(Object.create(null),e);for(const r in t)n[r]=ce(e[r],t[r]);return n}function lf(){return{app:null,config:{isNativeTag:yh,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let sg=0;function ig(e,t){return function(r,s=null){it(r)||(r=ae({},r)),s!=null&&!At(s)&&(s=null);const i=lf(),a=new WeakSet,l=[];let u=!1;const f=i.app={_uid:sg++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:$g,get config(){return i.config},set config(d){},use(d,...m){return a.has(d)||(d&&it(d.install)?(a.add(d),d.install(f,...m)):it(d)&&(a.add(d),d(f,...m))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,m){return m?(i.components[d]=m,f):i.components[d]},directive(d,m){return m?(i.directives[d]=m,f):i.directives[d]},mount(d,m,E){if(!u){const A=f._ceVNode||Ae(r,s);return A.appContext=i,E===!0?E="svg":E===!1&&(E=void 0),e(A,d,E),u=!0,f._container=d,d.__vue_app__=f,co(A.component)}},onUnmount(d){l.push(d)},unmount(){u&&($e(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,m){return i.provides[d]=m,f},runWithContext(d){const m=Kn;Kn=f;try{return d()}finally{Kn=m}}};return f}}let Kn=null;function og(e,t){if(he){let n=he.provides;const r=he.parent&&he.parent.provides;r===n&&(n=he.provides=Object.create(r)),n[e]=t}}function Es(e,t,n=!1){const r=bf();if(r||Kn){let s=Kn?Kn._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&it(t)?t.call(r&&r.proxy):t}}function ag(){return!!(bf()||Kn)}const cf={},uf=()=>Object.create(cf),hf=e=>Object.getPrototypeOf(e)===cf;function lg(e,t,n,r=!1){const s={},i=uf();e.propsDefaults=Object.create(null),ff(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Im(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function cg(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=pt(s),[u]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let m=0;m<d.length;m++){let E=d[m];if(ao(e.emitsOptions,E))continue;const A=t[E];if(u)if(_t(i,E))A!==i[E]&&(i[E]=A,f=!0);else{const D=An(E);s[D]=ga(u,l,D,A,e,!1)}else A!==i[E]&&(i[E]=A,f=!0)}}}else{ff(e,t,s,i)&&(f=!0);let d;for(const m in l)(!t||!_t(t,m)&&((d=Xn(m))===m||!_t(t,d)))&&(u?n&&(n[m]!==void 0||n[d]!==void 0)&&(s[m]=ga(u,l,m,void 0,e,!0)):delete s[m]);if(i!==l)for(const m in i)(!t||!_t(t,m))&&(delete i[m],f=!0)}f&&Ge(e.attrs,"set","")}function ff(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let u in t){if(ps(u))continue;const f=t[u];let d;s&&_t(s,d=An(u))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:ao(e.emitsOptions,u)||(!(u in r)||f!==r[u])&&(r[u]=f,a=!0)}if(i){const u=pt(n),f=l||It;for(let d=0;d<i.length;d++){const m=i[d];n[m]=ga(s,u,m,f[m],e,!_t(f,m))}}return a}function ga(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=_t(a,"default");if(l&&r===void 0){const u=a.default;if(a.type!==Function&&!a.skipFactory&&it(u)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=Hs(s);r=f[n]=u.call(null,t),d()}}else r=u;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Xn(n))&&(r=!0))}return r}const ug=new WeakMap;function df(e,t,n=!1){const r=n?ug:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let u=!1;if(!it(e)){const d=m=>{u=!0;const[E,A]=df(m,t,!0);ae(a,E),A&&l.push(...A)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!u)return At(e)&&r.set(e,yr),yr;if(et(i))for(let d=0;d<i.length;d++){const m=An(i[d]);Bc(m)&&(a[m]=It)}else if(i)for(const d in i){const m=An(d);if(Bc(m)){const E=i[d],A=a[m]=et(E)||it(E)?{type:E}:ae({},E),D=A.type;let U=!1,B=!0;if(et(D))for(let K=0;K<D.length;++K){const W=D[K],Q=it(W)&&W.name;if(Q==="Boolean"){U=!0;break}else Q==="String"&&(B=!1)}else U=it(D)&&D.name==="Boolean";A[0]=U,A[1]=B,(U||_t(A,"default"))&&l.push(m)}}const f=[a,l];return At(e)&&r.set(e,f),f}function Bc(e){return e[0]!=="$"&&!ps(e)}const sl=e=>e==="_"||e==="_ctx"||e==="$stable",il=e=>et(e)?e.map(ke):[ke(e)],hg=(e,t,n)=>{if(t._n)return t;const r=ls((...s)=>il(t(...s)),n);return r._c=!1,r},pf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(sl(s))continue;const i=e[s];if(it(i))t[s]=hg(s,i,r);else if(i!=null){const a=il(i);t[s]=()=>a}}},mf=(e,t)=>{const n=il(t);e.slots.default=()=>n},gf=(e,t,n)=>{for(const r in t)(n||!sl(r))&&(e[r]=t[r])},fg=(e,t,n)=>{const r=e.slots=uf();if(e.vnode.shapeFlag&32){const s=t._;s?(gf(r,t,n),n&&Ah(r,"_",s,!0)):pf(t,r)}else t&&mf(e,t)},dg=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=It;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:gf(s,t,n):(i=!t.$stable,pf(t,s)),a=t}else t&&(mf(e,t),a={default:1});if(i)for(const l in s)!sl(l)&&a[l]==null&&delete s[l]},_e=Cg;function pg(e){return mg(e)}function mg(e,t){const n=eo();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:u,setText:f,setElementText:d,parentNode:m,nextSibling:E,setScopeId:A=Le,insertStaticContent:D}=e,U=(T,b,P,F=null,x=null,O=null,$=void 0,L=null,k=!!b.dynamicChildren)=>{if(T===b)return;T&&!os(T,b)&&(F=on(T),de(T,x,O,!0),T=null),b.patchFlag===-2&&(k=!1,b.dynamicChildren=null);const{type:M,ref:J,shapeFlag:q}=b;switch(M){case lo:B(T,b,P,F);break;case tn:K(T,b,P,F);break;case Qo:T==null&&W(b,P,F,$);break;case Lt:S(T,b,P,F,x,O,$,L,k);break;default:q&1?rt(T,b,P,F,x,O,$,L,k):q&6?y(T,b,P,F,x,O,$,L,k):(q&64||q&128)&&M.process(T,b,P,F,x,O,$,L,k,Nn)}J!=null&&x?_s(J,T&&T.ref,O,b||T,!b):J==null&&T&&T.ref!=null&&_s(T.ref,null,O,T,!0)},B=(T,b,P,F)=>{if(T==null)r(b.el=l(b.children),P,F);else{const x=b.el=T.el;b.children!==T.children&&f(x,b.children)}},K=(T,b,P,F)=>{T==null?r(b.el=u(b.children||""),P,F):b.el=T.el},W=(T,b,P,F)=>{[T.el,T.anchor]=D(T.children,b,P,F,T.el,T.anchor)},Q=({el:T,anchor:b},P,F)=>{let x;for(;T&&T!==b;)x=E(T),r(T,P,F),T=x;r(b,P,F)},z=({el:T,anchor:b})=>{let P;for(;T&&T!==b;)P=E(T),s(T),T=P;s(b)},rt=(T,b,P,F,x,O,$,L,k)=>{if(b.type==="svg"?$="svg":b.type==="math"&&($="mathml"),T==null)Et(b,P,F,x,O,$,L,k);else{const M=T.el&&T.el._isVueCE?T.el:null;try{M&&M._beginPatch(),_(T,b,x,O,$,L,k)}finally{M&&M._endPatch()}}},Et=(T,b,P,F,x,O,$,L)=>{let k,M;const{props:J,shapeFlag:q,transition:X,dirs:Z}=T;if(k=T.el=a(T.type,O,J&&J.is,J),q&8?d(k,T.children):q&16&&g(T.children,k,null,F,x,Go(T,O),$,L),Z&&Un(T,null,F,"created"),w(k,T,T.scopeId,$,F),J){for(const Tt in J)Tt!=="value"&&!ps(Tt)&&i(k,Tt,null,J[Tt],O,F);"value"in J&&i(k,"value",null,J.value,O),(M=J.onVnodeBeforeMount)&&Ne(M,F,T)}Z&&Un(T,null,F,"beforeMount");const lt=gg(x,X);lt&&X.beforeEnter(k),r(k,b,P),((M=J&&J.onVnodeMounted)||lt||Z)&&_e(()=>{M&&Ne(M,F,T),lt&&X.enter(k),Z&&Un(T,null,F,"mounted")},x)},w=(T,b,P,F,x)=>{if(P&&A(T,P),F)for(let O=0;O<F.length;O++)A(T,F[O]);if(x){let O=x.subTree;if(b===O||If(O.type)&&(O.ssContent===b||O.ssFallback===b)){const $=x.vnode;w(T,$,$.scopeId,$.slotScopeIds,x.parent)}}},g=(T,b,P,F,x,O,$,L,k=0)=>{for(let M=k;M<T.length;M++){const J=T[M]=L?mn(T[M]):ke(T[M]);U(null,J,b,P,F,x,O,$,L)}},_=(T,b,P,F,x,O,$)=>{const L=b.el=T.el;let{patchFlag:k,dynamicChildren:M,dirs:J}=b;k|=T.patchFlag&16;const q=T.props||It,X=b.props||It;let Z;if(P&&Bn(P,!1),(Z=X.onVnodeBeforeUpdate)&&Ne(Z,P,b,T),J&&Un(b,T,P,"beforeUpdate"),P&&Bn(P,!0),(q.innerHTML&&X.innerHTML==null||q.textContent&&X.textContent==null)&&d(L,""),M?I(T.dynamicChildren,M,L,P,F,Go(b,x),O):$||gt(T,b,L,null,P,F,Go(b,x),O,!1),k>0){if(k&16)v(L,q,X,P,x);else if(k&2&&q.class!==X.class&&i(L,"class",null,X.class,x),k&4&&i(L,"style",q.style,X.style,x),k&8){const lt=b.dynamicProps;for(let Tt=0;Tt<lt.length;Tt++){const dt=lt[Tt],Zt=q[dt],te=X[dt];(te!==Zt||dt==="value")&&i(L,dt,Zt,te,x,P)}}k&1&&T.children!==b.children&&d(L,b.children)}else!$&&M==null&&v(L,q,X,P,x);((Z=X.onVnodeUpdated)||J)&&_e(()=>{Z&&Ne(Z,P,b,T),J&&Un(b,T,P,"updated")},F)},I=(T,b,P,F,x,O,$)=>{for(let L=0;L<b.length;L++){const k=T[L],M=b[L],J=k.el&&(k.type===Lt||!os(k,M)||k.shapeFlag&198)?m(k.el):P;U(k,M,J,null,F,x,O,$,!0)}},v=(T,b,P,F,x)=>{if(b!==P){if(b!==It)for(const O in b)!ps(O)&&!(O in P)&&i(T,O,b[O],null,x,F);for(const O in P){if(ps(O))continue;const $=P[O],L=b[O];$!==L&&O!=="value"&&i(T,O,L,$,x,F)}"value"in P&&i(T,"value",b.value,P.value,x)}},S=(T,b,P,F,x,O,$,L,k)=>{const M=b.el=T?T.el:l(""),J=b.anchor=T?T.anchor:l("");let{patchFlag:q,dynamicChildren:X,slotScopeIds:Z}=b;Z&&(L=L?L.concat(Z):Z),T==null?(r(M,P,F),r(J,P,F),g(b.children||[],P,J,x,O,$,L,k)):q>0&&q&64&&X&&T.dynamicChildren?(I(T.dynamicChildren,X,P,x,O,$,L),(b.key!=null||x&&b===x.subTree)&&_f(T,b,!0)):gt(T,b,P,J,x,O,$,L,k)},y=(T,b,P,F,x,O,$,L,k)=>{b.slotScopeIds=L,T==null?b.shapeFlag&512?x.ctx.activate(b,P,F,$,k):Mt(b,P,F,x,O,$,k):Ee(T,b,k)},Mt=(T,b,P,F,x,O,$)=>{const L=T.component=kg(T,F,x);if(tf(T)&&(L.ctx.renderer=Nn),Lg(L,!1,$),L.asyncDep){if(x&&x.registerDep(L,Pt,$),!T.el){const k=L.subTree=Ae(tn);K(null,k,b,P),T.placeholder=k.el}}else Pt(L,T,b,P,x,O,$)},Ee=(T,b,P)=>{const F=b.component=T.component;if(Sg(T,b,P))if(F.asyncDep&&!F.asyncResolved){at(F,b,P);return}else F.next=b,F.update();else b.el=T.el,F.vnode=b},Pt=(T,b,P,F,x,O,$)=>{const L=()=>{if(T.isMounted){let{next:q,bu:X,u:Z,parent:lt,vnode:Tt}=T;{const me=yf(T);if(me){q&&(q.el=Tt.el,at(T,q,$)),me.asyncDep.then(()=>{T.isUnmounted||L()});return}}let dt=q,Zt;Bn(T,!1),q?(q.el=Tt.el,at(T,q,$)):q=Tt,X&&gi(X),(Zt=q.props&&q.props.onVnodeBeforeUpdate)&&Ne(Zt,lt,q,Tt),Bn(T,!0);const te=$c(T),pe=T.subTree;T.subTree=te,U(pe,te,m(pe.el),on(pe),T,x,O),q.el=te.el,dt===null&&Rg(T,te.el),Z&&_e(Z,x),(Zt=q.props&&q.props.onVnodeUpdated)&&_e(()=>Ne(Zt,lt,q,Tt),x)}else{let q;const{el:X,props:Z}=b,{bm:lt,m:Tt,parent:dt,root:Zt,type:te}=T,pe=vr(b);Bn(T,!1),lt&&gi(lt),!pe&&(q=Z&&Z.onVnodeBeforeMount)&&Ne(q,dt,b),Bn(T,!0);{Zt.ce&&Zt.ce._def.shadowRoot!==!1&&Zt.ce._injectChildStyle(te);const me=T.subTree=$c(T);U(null,me,P,F,T,x,O),b.el=me.el}if(Tt&&_e(Tt,x),!pe&&(q=Z&&Z.onVnodeMounted)){const me=b;_e(()=>Ne(q,dt,me),x)}(b.shapeFlag&256||dt&&vr(dt.vnode)&&dt.vnode.shapeFlag&256)&&T.a&&_e(T.a,x),T.isMounted=!0,b=P=F=null}};T.scope.on();const k=T.effect=new Dh(L);T.scope.off();const M=T.update=k.run.bind(k),J=T.job=k.runIfDirty.bind(k);J.i=T,J.id=T.uid,k.scheduler=()=>nl(J),Bn(T,!0),M()},at=(T,b,P)=>{b.component=T;const F=T.vnode.props;T.vnode=b,T.next=null,cg(T,b.props,F,P),dg(T,b.children,P),Je(),Oc(T),Ze()},gt=(T,b,P,F,x,O,$,L,k=!1)=>{const M=T&&T.children,J=T?T.shapeFlag:0,q=b.children,{patchFlag:X,shapeFlag:Z}=b;if(X>0){if(X&128){nr(M,q,P,F,x,O,$,L,k);return}else if(X&256){Te(M,q,P,F,x,O,$,L,k);return}}Z&8?(J&16&&ze(M,x,O),q!==M&&d(P,q)):J&16?Z&16?nr(M,q,P,F,x,O,$,L,k):ze(M,x,O,!0):(J&8&&d(P,""),Z&16&&g(q,P,F,x,O,$,L,k))},Te=(T,b,P,F,x,O,$,L,k)=>{T=T||yr,b=b||yr;const M=T.length,J=b.length,q=Math.min(M,J);let X;for(X=0;X<q;X++){const Z=b[X]=k?mn(b[X]):ke(b[X]);U(T[X],Z,P,null,x,O,$,L,k)}M>J?ze(T,x,O,!0,!1,q):g(b,P,F,x,O,$,L,k,q)},nr=(T,b,P,F,x,O,$,L,k)=>{let M=0;const J=b.length;let q=T.length-1,X=J-1;for(;M<=q&&M<=X;){const Z=T[M],lt=b[M]=k?mn(b[M]):ke(b[M]);if(os(Z,lt))U(Z,lt,P,null,x,O,$,L,k);else break;M++}for(;M<=q&&M<=X;){const Z=T[q],lt=b[X]=k?mn(b[X]):ke(b[X]);if(os(Z,lt))U(Z,lt,P,null,x,O,$,L,k);else break;q--,X--}if(M>q){if(M<=X){const Z=X+1,lt=Z<J?b[Z].el:F;for(;M<=X;)U(null,b[M]=k?mn(b[M]):ke(b[M]),P,lt,x,O,$,L,k),M++}}else if(M>X)for(;M<=q;)de(T[M],x,O,!0),M++;else{const Z=M,lt=M,Tt=new Map;for(M=lt;M<=X;M++){const Wt=b[M]=k?mn(b[M]):ke(b[M]);Wt.key!=null&&Tt.set(Wt.key,M)}let dt,Zt=0;const te=X-lt+1;let pe=!1,me=0;const be=new Array(te);for(M=0;M<te;M++)be[M]=0;for(M=Z;M<=q;M++){const Wt=T[M];if(Zt>=te){de(Wt,x,O,!0);continue}let Ht;if(Wt.key!=null)Ht=Tt.get(Wt.key);else for(dt=lt;dt<=X;dt++)if(be[dt-lt]===0&&os(Wt,b[dt])){Ht=dt;break}Ht===void 0?de(Wt,x,O,!0):(be[Ht-lt]=M+1,Ht>=me?me=Ht:pe=!0,U(Wt,b[Ht],P,null,x,O,$,L,k),Zt++)}const sr=pe?_g(be):yr;for(dt=sr.length-1,M=te-1;M>=0;M--){const Wt=lt+M,Ht=b[Wt],qr=b[Wt+1],On=Wt+1<J?qr.el||qr.placeholder:F;be[M]===0?U(null,Ht,P,On,x,O,$,L,k):pe&&(dt<0||M!==sr[dt]?Ve(Ht,P,On,2):dt--)}}},Ve=(T,b,P,F,x=null)=>{const{el:O,type:$,transition:L,children:k,shapeFlag:M}=T;if(M&6){Ve(T.component.subTree,b,P,F);return}if(M&128){T.suspense.move(b,P,F);return}if(M&64){$.move(T,b,P,Nn);return}if($===Lt){r(O,b,P);for(let q=0;q<k.length;q++)Ve(k[q],b,P,F);r(T.anchor,b,P);return}if($===Qo){Q(T,b,P);return}if(F!==2&&M&1&&L)if(F===0)L.beforeEnter(O),r(O,b,P),_e(()=>L.enter(O),x);else{const{leave:q,delayLeave:X,afterLeave:Z}=L,lt=()=>{T.ctx.isUnmounted?s(O):r(O,b,P)},Tt=()=>{O._isLeaving&&O[Um](!0),q(O,()=>{lt(),Z&&Z()})};X?X(O,lt,Tt):Tt()}else r(O,b,P)},de=(T,b,P,F=!1,x=!1)=>{const{type:O,props:$,ref:L,children:k,dynamicChildren:M,shapeFlag:J,patchFlag:q,dirs:X,cacheIndex:Z}=T;if(q===-2&&(x=!1),L!=null&&(Je(),_s(L,null,P,T,!0),Ze()),Z!=null&&(b.renderCache[Z]=void 0),J&256){b.ctx.deactivate(T);return}const lt=J&1&&X,Tt=!vr(T);let dt;if(Tt&&(dt=$&&$.onVnodeBeforeUnmount)&&Ne(dt,b,T),J&6)jr(T.component,P,F);else{if(J&128){T.suspense.unmount(P,F);return}lt&&Un(T,null,b,"beforeUnmount"),J&64?T.type.remove(T,b,P,Nn,F):M&&!M.hasOnce&&(O!==Lt||q>0&&q&64)?ze(M,b,P,!1,!0):(O===Lt&&q&384||!x&&J&16)&&ze(k,b,P),F&&Br(T)}(Tt&&(dt=$&&$.onVnodeUnmounted)||lt)&&_e(()=>{dt&&Ne(dt,b,T),lt&&Un(T,null,b,"unmounted")},P)},Br=T=>{const{type:b,el:P,anchor:F,transition:x}=T;if(b===Lt){rr(P,F);return}if(b===Qo){z(T);return}const O=()=>{s(P),x&&!x.persisted&&x.afterLeave&&x.afterLeave()};if(T.shapeFlag&1&&x&&!x.persisted){const{leave:$,delayLeave:L}=x,k=()=>$(P,O);L?L(T.el,O,k):k()}else O()},rr=(T,b)=>{let P;for(;T!==b;)P=E(T),s(T),T=P;s(b)},jr=(T,b,P)=>{const{bum:F,scope:x,job:O,subTree:$,um:L,m:k,a:M}=T;jc(k),jc(M),F&&gi(F),x.stop(),O&&(O.flags|=8,de($,T,b,P)),L&&_e(L,b),_e(()=>{T.isUnmounted=!0},b)},ze=(T,b,P,F=!1,x=!1,O=0)=>{for(let $=O;$<T.length;$++)de(T[$],b,P,F,x)},on=T=>{if(T.shapeFlag&6)return on(T.component.subTree);if(T.shapeFlag&128)return T.suspense.next();const b=E(T.anchor||T.el),P=b&&b[Lm];return P?E(P):b};let xn=!1;const $r=(T,b,P)=>{T==null?b._vnode&&de(b._vnode,null,null,!0):U(b._vnode||null,T,b,null,null,null,P),b._vnode=T,xn||(xn=!0,Oc(),Xh(),xn=!1)},Nn={p:U,um:de,m:Ve,r:Br,mt:Mt,mc:g,pc:gt,pbc:I,n:on,o:e};return{render:$r,hydrate:void 0,createApp:ig($r)}}function Go({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function Bn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function gg(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function _f(e,t,n=!1){const r=e.children,s=t.children;if(et(r)&&et(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=mn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&_f(a,l)),l.type===lo&&l.patchFlag!==-1&&(l.el=a.el),l.type===tn&&!l.el&&(l.el=a.el)}}function _g(e){const t=e.slice(),n=[0];let r,s,i,a,l;const u=e.length;for(r=0;r<u;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function yf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:yf(t)}function jc(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const yg=Symbol.for("v-scx"),Eg=()=>Es(yg);function Wn(e,t,n){return Ef(e,t,n)}function Ef(e,t,n=It){const{immediate:r,deep:s,flush:i,once:a}=n,l=ae({},n),u=t&&r||!t&&i!=="post";let f;if(Ds){if(i==="sync"){const A=Eg();f=A.__watcherHandles||(A.__watcherHandles=[])}else if(!u){const A=()=>{};return A.stop=Le,A.resume=Le,A.pause=Le,A}}const d=he;l.call=(A,D,U)=>$e(A,d,D,U);let m=!1;i==="post"?l.scheduler=A=>{_e(A,d&&d.suspense)}:i!=="sync"&&(m=!0,l.scheduler=(A,D)=>{D?A():nl(A)}),l.augmentJob=A=>{t&&(A.flags|=4),m&&(A.flags|=2,d&&(A.id=d.uid,A.i=d))};const E=Nm(e,t,l);return Ds&&(f?f.push(E):u&&E()),E}function Tg(e,t,n){const r=this.proxy,s=Ut(e)?e.includes(".")?Tf(r,e):()=>r[e]:e.bind(r,r);let i;it(t)?i=t:(i=t.handler,n=t);const a=Hs(this),l=Ef(s,i.bind(r),n);return a(),l}function Tf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const vg=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${An(t)}Modifiers`]||e[`${Xn(t)}Modifiers`];function Ig(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||It;let s=n;const i=t.startsWith("update:"),a=i&&vg(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Ut(d)?d.trim():d)),a.number&&(s=n.map(Ka)));let l,u=r[l=$o(t)]||r[l=$o(An(t))];!u&&i&&(u=r[l=$o(Xn(t))]),u&&$e(u,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,$e(f,e,6,s)}}const wg=new WeakMap;function vf(e,t,n=!1){const r=n?wg:t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!it(e)){const u=f=>{const d=vf(f,t,!0);d&&(l=!0,ae(a,d))};!n&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}return!i&&!l?(At(e)&&r.set(e,null),null):(et(i)?i.forEach(u=>a[u]=null):ae(a,i),At(e)&&r.set(e,a),a)}function ao(e,t){return!e||!Zi(t)?!1:(t=t.slice(2).replace(/Once$/,""),_t(e,t[0].toLowerCase()+t.slice(1))||_t(e,Xn(t))||_t(e,t))}function $c(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:u,render:f,renderCache:d,props:m,data:E,setupState:A,ctx:D,inheritAttrs:U}=e,B=Di(e);let K,W;try{if(n.shapeFlag&4){const z=s||r,rt=z;K=ke(f.call(rt,z,d,m,A,E,D)),W=l}else{const z=t;K=ke(z.length>1?z(m,{attrs:l,slots:a,emit:u}):z(m,null)),W=t.props?l:Ag(l)}}catch(z){Ts.length=0,io(z,e,1),K=Ae(tn)}let Q=K;if(W&&U!==!1){const z=Object.keys(W),{shapeFlag:rt}=Q;z.length&&rt&7&&(i&&z.some(qa)&&(W=bg(W,i)),Q=Rr(Q,W,!1,!0))}return n.dirs&&(Q=Rr(Q,null,!1,!0),Q.dirs=Q.dirs?Q.dirs.concat(n.dirs):n.dirs),n.transition&&rl(Q,n.transition),K=Q,Di(B),K}const Ag=e=>{let t;for(const n in e)(n==="class"||n==="style"||Zi(n))&&((t||(t={}))[n]=e[n]);return t},bg=(e,t)=>{const n={};for(const r in e)(!qa(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Sg(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:u}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&u>=0){if(u&1024)return!0;if(u&16)return r?qc(r,a,f):!!a;if(u&8){const d=t.dynamicProps;for(let m=0;m<d.length;m++){const E=d[m];if(a[E]!==r[E]&&!ao(f,E))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?qc(r,a,f):!0:!!a;return!1}function qc(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!ao(n,i))return!0}return!1}function Rg({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const If=e=>e.__isSuspense;function Cg(e,t){t&&t.pendingBranch?et(e)?t.effects.push(...e):t.effects.push(e):km(e)}const Lt=Symbol.for("v-fgt"),lo=Symbol.for("v-txt"),tn=Symbol.for("v-cmt"),Qo=Symbol.for("v-stc"),Ts=[];let ye=null;function mt(e=!1){Ts.push(ye=e?null:[])}function Pg(){Ts.pop(),ye=Ts[Ts.length-1]||null}let Vs=1;function Hc(e,t=!1){Vs+=e,e<0&&ye&&t&&(ye.hasOnce=!0)}function wf(e){return e.dynamicChildren=Vs>0?ye||yr:null,Pg(),Vs>0&&ye&&ye.push(e),e}function Nt(e,t,n,r,s,i){return wf(jt(e,t,n,r,s,i,!0))}function Se(e,t,n,r,s){return wf(Ae(e,t,n,r,s,!0))}function ol(e){return e?e.__v_isVNode===!0:!1}function os(e,t){return e.type===t.type&&e.key===t.key}const Af=({key:e})=>e??null,yi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Ut(e)||wt(e)||it(e)?{i:oe,r:e,k:t,f:!!n}:e:null);function jt(e,t=null,n=null,r=0,s=null,i=e===Lt?0:1,a=!1,l=!1){const u={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Af(t),ref:t&&yi(t),scopeId:Jh,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:oe};return l?(al(u,n),i&128&&e.normalize(u)):n&&(u.shapeFlag|=Ut(n)?8:16),Vs>0&&!a&&ye&&(u.patchFlag>0||i&6)&&u.patchFlag!==32&&ye.push(u),u}const Ae=Vg;function Vg(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===Ym)&&(e=tn),ol(e)){const l=Rr(e,t,!0);return n&&al(l,n),Vs>0&&!i&&ye&&(l.shapeFlag&6?ye[ye.indexOf(e)]=l:ye.push(l)),l.patchFlag=-2,l}if(jg(e)&&(e=e.__vccOpts),t){t=Dg(t);let{class:l,style:u}=t;l&&!Ut(l)&&(t.class=Wa(l)),At(u)&&(tl(u)&&!et(u)&&(u=ae({},u)),t.style=Or(u))}const a=Ut(e)?1:If(e)?128:Fm(e)?64:At(e)?4:it(e)?2:0;return jt(e,t,n,r,s,a,i,!0)}function Dg(e){return e?tl(e)||hf(e)?ae({},e):e:null}function Rr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:u}=e,f=t?Ng(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Af(f),ref:t&&t.ref?n&&i?et(i)?i.concat(yi(t)):[i,yi(t)]:yi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Lt?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:u,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Rr(e.ssContent),ssFallback:e.ssFallback&&Rr(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return u&&r&&rl(d,u.clone(d)),d}function us(e=" ",t=0){return Ae(lo,null,e,t)}function xg(e="",t=!1){return t?(mt(),Se(tn,null,e)):Ae(tn,null,e)}function ke(e){return e==null||typeof e=="boolean"?Ae(tn):et(e)?Ae(Lt,null,e.slice()):ol(e)?mn(e):Ae(lo,null,String(e))}function mn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Rr(e)}function al(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(et(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),al(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!hf(t)?t._ctx=oe:s===3&&oe&&(oe.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else it(t)?(t={default:t,_ctx:oe},n=32):(t=String(t),r&64?(n=16,t=[us(t)]):n=8);e.children=t,e.shapeFlag|=n}function Ng(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=Wa([t.class,r.class]));else if(s==="style")t.style=Or([t.style,r.style]);else if(Zi(s)){const i=t[s],a=r[s];a&&i!==a&&!(et(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function Ne(e,t,n,r=null){$e(e,t,7,[n,r])}const Og=lf();let Mg=0;function kg(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Og,i={uid:Mg++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ch(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:df(r,s),emitsOptions:vf(r,s),emit:null,emitted:null,propsDefaults:It,inheritAttrs:r.inheritAttrs,ctx:It,data:It,props:It,attrs:It,slots:It,refs:It,setupState:It,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Ig.bind(null,i),e.ce&&e.ce(i),i}let he=null;const bf=()=>he||oe;let Oi,_a;{const e=eo(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Oi=t("__VUE_INSTANCE_SETTERS__",n=>he=n),_a=t("__VUE_SSR_SETTERS__",n=>Ds=n)}const Hs=e=>{const t=he;return Oi(e),e.scope.on(),()=>{e.scope.off(),Oi(t)}},zc=()=>{he&&he.scope.off(),Oi(null)};function Sf(e){return e.vnode.shapeFlag&4}let Ds=!1;function Lg(e,t=!1,n=!1){t&&_a(t);const{props:r,children:s}=e.vnode,i=Sf(e);lg(e,r,i,t),fg(e,s,n||t);const a=i?Fg(e,t):void 0;return t&&_a(!1),a}function Fg(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,Jm);const{setup:r}=n;if(r){Je();const s=e.setupContext=r.length>1?Bg(e):null,i=Hs(e),a=$s(r,e,0,[e.props,s]),l=Th(a);if(Ze(),i(),(l||e.sp)&&!vr(e)&&Zh(e),l){if(a.then(zc,zc),t)return a.then(u=>{Kc(e,u)}).catch(u=>{io(u,e,0)});e.asyncDep=a}else Kc(e,a)}else Rf(e)}function Kc(e,t,n){it(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:At(t)&&(e.setupState=zh(t)),Rf(e)}function Rf(e,t,n){const r=e.type;e.render||(e.render=r.render||Le);{const s=Hs(e);Je();try{Zm(e)}finally{Ze(),s()}}}const Ug={get(e,t){return se(e,"get",""),e[t]}};function Bg(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Ug),slots:e.slots,emit:e.emit,expose:t}}function co(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(zh(el(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ys)return ys[n](e)},has(t,n){return n in t||n in ys}})):e.proxy}function jg(e){return it(e)&&"__vccOpts"in e}const ll=(e,t)=>Dm(e,t,Ds),$g="3.5.24";/**
* @vue/runtime-dom v3.5.24
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ya;const Wc=typeof window<"u"&&window.trustedTypes;if(Wc)try{ya=Wc.createPolicy("vue",{createHTML:e=>e})}catch{}const Cf=ya?e=>ya.createHTML(e):e=>e,qg="http://www.w3.org/2000/svg",Hg="http://www.w3.org/1998/Math/MathML",We=typeof document<"u"?document:null,Gc=We&&We.createElement("template"),zg={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?We.createElementNS(qg,e):t==="mathml"?We.createElementNS(Hg,e):n?We.createElement(e,{is:n}):We.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>We.createTextNode(e),createComment:e=>We.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>We.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{Gc.innerHTML=Cf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=Gc.content;if(r==="svg"||r==="mathml"){const u=l.firstChild;for(;u.firstChild;)l.appendChild(u.firstChild);l.removeChild(u)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Kg=Symbol("_vtc");function Wg(e,t,n){const r=e[Kg];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const Qc=Symbol("_vod"),Gg=Symbol("_vsh"),Qg=Symbol(""),Xg=/(?:^|;)\s*display\s*:/;function Yg(e,t,n){const r=e.style,s=Ut(n);let i=!1;if(n&&!s){if(t)if(Ut(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&Ei(r,l,"")}else for(const a in t)n[a]==null&&Ei(r,a,"");for(const a in n)a==="display"&&(i=!0),Ei(r,a,n[a])}else if(s){if(t!==n){const a=r[Qg];a&&(n+=";"+a),r.cssText=n,i=Xg.test(n)}}else t&&e.removeAttribute("style");Qc in e&&(e[Qc]=i?r.display:"",e[Gg]&&(r.display="none"))}const Xc=/\s*!important$/;function Ei(e,t,n){if(et(n))n.forEach(r=>Ei(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=Jg(e,t);Xc.test(n)?e.setProperty(Xn(r),n.replace(Xc,""),"important"):e[r]=n}}const Yc=["Webkit","Moz","ms"],Xo={};function Jg(e,t){const n=Xo[t];if(n)return n;let r=An(t);if(r!=="filter"&&r in e)return Xo[t]=r;r=wh(r);for(let s=0;s<Yc.length;s++){const i=Yc[s]+r;if(i in e)return Xo[t]=i}return t}const Jc="http://www.w3.org/1999/xlink";function Zc(e,t,n,r,s,i=tm(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(Jc,t.slice(6,t.length)):e.setAttributeNS(Jc,t,n):n==null||i&&!bh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Pe(n)?String(n):n)}function tu(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Cf(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,u=n==null?e.type==="checkbox"?"on":"":String(n);(l!==u||!("_value"in e))&&(e.value=u),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=bh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function qn(e,t,n,r){e.addEventListener(t,n,r)}function Zg(e,t,n,r){e.removeEventListener(t,n,r)}const eu=Symbol("_vei");function t_(e,t,n,r,s=null){const i=e[eu]||(e[eu]={}),a=i[t];if(r&&a)a.value=r;else{const[l,u]=e_(t);if(r){const f=i[t]=s_(r,s);qn(e,l,f,u)}else a&&(Zg(e,l,a,u),i[t]=void 0)}}const nu=/(?:Once|Passive|Capture)$/;function e_(e){let t;if(nu.test(e)){t={};let r;for(;r=e.match(nu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Xn(e.slice(2)),t]}let Yo=0;const n_=Promise.resolve(),r_=()=>Yo||(n_.then(()=>Yo=0),Yo=Date.now());function s_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;$e(i_(r,n.value),t,5,[r])};return n.value=e,n.attached=r_(),n}function i_(e,t){if(et(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const ru=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,o_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?Wg(e,r,a):t==="style"?Yg(e,n,r):Zi(t)?qa(t)||t_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):a_(e,t,r,a))?(tu(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Zc(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Ut(r))?tu(e,An(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Zc(e,t,r,a))};function a_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&ru(t)&&it(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="sandbox"&&e.tagName==="IFRAME"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return ru(t)&&Ut(n)?!1:t in e}const Mi=e=>{const t=e.props["onUpdate:modelValue"]||!1;return et(t)?n=>gi(t,n):t};function l_(e){e.target.composing=!0}function su(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const Ir=Symbol("_assign");function iu(e,t,n){return t&&(e=e.trim()),n&&(e=Ka(e)),e}const c_={created(e,{modifiers:{lazy:t,trim:n,number:r}},s){e[Ir]=Mi(s);const i=r||s.props&&s.props.type==="number";qn(e,t?"change":"input",a=>{a.target.composing||e[Ir](iu(e.value,n,i))}),(n||i)&&qn(e,"change",()=>{e.value=iu(e.value,n,i)}),t||(qn(e,"compositionstart",l_),qn(e,"compositionend",su),qn(e,"change",su))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:s,number:i}},a){if(e[Ir]=Mi(a),e.composing)return;const l=(i||e.type==="number")&&!/^0\d/.test(e.value)?Ka(e.value):e.value,u=t??"";l!==u&&(document.activeElement===e&&e.type!=="range"&&(r&&t===n||s&&e.value.trim()===u)||(e.value=u))}},ci={created(e,{value:t},n){e.checked=Si(t,n.props.value),e[Ir]=Mi(n),qn(e,"change",()=>{e[Ir](u_(e))})},beforeUpdate(e,{value:t,oldValue:n},r){e[Ir]=Mi(r),t!==n&&(e.checked=Si(t,r.props.value))}};function u_(e){return"_value"in e?e._value:e.value}const h_=ae({patchProp:o_},zg);let ou;function f_(){return ou||(ou=pg(h_))}const d_=((...e)=>{const t=f_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=m_(r);if(!s)return;const i=t._component;!it(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,p_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t});function p_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function m_(e){return Ut(e)?document.querySelector(e):e}/*!
 * pinia v3.0.4
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let Pf;const uo=e=>Pf=e,Vf=Symbol();function Ea(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var vs;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(vs||(vs={}));function g_(){const e=Ph(!0),t=e.run(()=>so({}));let n=[],r=[];const s=el({install(i){uo(s),s._a=i,i.provide(Vf,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Df=()=>{};function au(e,t,n,r=Df){e.add(t);const s=()=>{e.delete(t)&&r()};return!n&&Vh()&&nm(s),s}function cr(e,...t){e.forEach(n=>{n(...t)})}const __=e=>e(),lu=Symbol(),Jo=Symbol();function Ta(e,t){e instanceof Map&&t instanceof Map?t.forEach((n,r)=>e.set(r,n)):e instanceof Set&&t instanceof Set&&t.forEach(e.add,e);for(const n in t){if(!t.hasOwnProperty(n))continue;const r=t[n],s=e[n];Ea(s)&&Ea(r)&&e.hasOwnProperty(n)&&!wt(r)&&!Xe(r)?e[n]=Ta(s,r):e[n]=r}return e}const y_=Symbol();function E_(e){return!Ea(e)||!Object.prototype.hasOwnProperty.call(e,y_)}const{assign:dn}=Object;function T_(e){return!!(wt(e)&&e.effect)}function v_(e,t,n,r){const{state:s,actions:i,getters:a}=t,l=n.state.value[e];let u;function f(){l||(n.state.value[e]=s?s():{});const d=Sm(n.state.value[e]);return dn(d,i,Object.keys(a||{}).reduce((m,E)=>(m[E]=el(ll(()=>{uo(n);const A=n._s.get(e);return a[E].call(A,A)})),m),{}))}return u=xf(e,f,t,n,r,!0),u}function xf(e,t,n={},r,s,i){let a;const l=dn({actions:{}},n),u={deep:!0};let f,d,m=new Set,E=new Set,A;const D=r.state.value[e];!i&&!D&&(r.state.value[e]={}),so({});let U;function B(g){let _;f=d=!1,typeof g=="function"?(g(r.state.value[e]),_={type:vs.patchFunction,storeId:e,events:A}):(Ta(r.state.value[e],g),_={type:vs.patchObject,payload:g,storeId:e,events:A});const I=U=Symbol();Gh().then(()=>{U===I&&(f=!0)}),d=!0,cr(m,_,r.state.value[e])}const K=i?function(){const{state:_}=n,I=_?_():{};this.$patch(v=>{dn(v,I)})}:Df;function W(){a.stop(),m.clear(),E.clear(),r._s.delete(e)}const Q=(g,_="")=>{if(lu in g)return g[Jo]=_,g;const I=function(){uo(r);const v=Array.from(arguments),S=new Set,y=new Set;function Mt(at){S.add(at)}function Ee(at){y.add(at)}cr(E,{args:v,name:I[Jo],store:rt,after:Mt,onError:Ee});let Pt;try{Pt=g.apply(this&&this.$id===e?this:rt,v)}catch(at){throw cr(y,at),at}return Pt instanceof Promise?Pt.then(at=>(cr(S,at),at)).catch(at=>(cr(y,at),Promise.reject(at))):(cr(S,Pt),Pt)};return I[lu]=!0,I[Jo]=_,I},z={_p:r,$id:e,$onAction:au.bind(null,E),$patch:B,$reset:K,$subscribe(g,_={}){const I=au(m,g,_.detached,()=>v()),v=a.run(()=>Wn(()=>r.state.value[e],S=>{(_.flush==="sync"?d:f)&&g({storeId:e,type:vs.direct,events:A},S)},dn({},u,_)));return I},$dispose:W},rt=ro(z);r._s.set(e,rt);const w=(r._a&&r._a.runWithContext||__)(()=>r._e.run(()=>(a=Ph()).run(()=>t({action:Q}))));for(const g in w){const _=w[g];if(wt(_)&&!T_(_)||Xe(_))i||(D&&E_(_)&&(wt(_)?_.value=D[g]:Ta(_,D[g])),r.state.value[e][g]=_);else if(typeof _=="function"){const I=Q(_,g);w[g]=I,l.actions[g]=_}}return dn(rt,w),dn(pt(rt),w),Object.defineProperty(rt,"$state",{get:()=>r.state.value[e],set:g=>{B(_=>{dn(_,g)})}}),r._p.forEach(g=>{dn(rt,a.run(()=>g({store:rt,app:r._a,pinia:r,options:l})))}),D&&i&&n.hydrate&&n.hydrate(rt.$state,D),f=!0,d=!0,rt}/*! #__NO_SIDE_EFFECTS__ */function I_(e,t,n){let r;const s=typeof t=="function";r=s?n:t;function i(a,l){const u=ag();return a=a||(u?Es(Vf,null):null),a&&uo(a),a=Pf,a._s.has(e)||(s?xf(e,t,r,a):v_(e,r,a)),a._s.get(e)}return i.$id=e,i}function ho(e){const t=pt(e),n={};for(const r in t){const s=t[r];s.effect?n[r]=ll({get:()=>e[r],set(i){e[r]=i}}):(wt(s)||Xe(s))&&(n[r]=Pm(e,r))}return n}function w_(e,t){if(e==null)return;let n=e;for(let r=0;r<t.length;r++){if(n===void 0||n[t[r]]===void 0)return;if(n===null||n[t[r]]===null)return null;n=n[t[r]]}return n}function cl(e,t,n){if(n.length===0)return t;const r=n[0];return n.length>1&&(t=cl(typeof e!="object"||e===null||!Object.prototype.hasOwnProperty.call(e,r)?Number.isInteger(Number(n[1]))?[]:{}:e[r],t,Array.prototype.slice.call(n,1))),Number.isInteger(Number(r))&&Array.isArray(e)?e.slice()[r]:Object.assign({},e,{[r]:t})}function Nf(e,t){if(e==null||t.length===0)return e;if(t.length===1){if(e==null)return e;if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.slice.call(e,0).splice(t[0],1);const n={};for(const r in e)n[r]=e[r];return delete n[t[0]],n}if(e[t[0]]==null){if(Number.isInteger(t[0])&&Array.isArray(e))return Array.prototype.concat.call([],e);const n={};for(const r in e)n[r]=e[r];return n}return cl(e,Nf(e[t[0]],Array.prototype.slice.call(t,1)),[t[0]])}function Of(e,t){return t.map(n=>n.split(".")).map(n=>[n,w_(e,n)]).filter(n=>n[1]!==void 0).reduce((n,r)=>cl(n,r[1],r[0]),{})}function Mf(e,t){return t.map(n=>n.split(".")).reduce((n,r)=>Nf(n,r),e)}function cu(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a,beforeHydrate:l,afterHydrate:u},f,d=!0){try{d&&(l==null||l(f));const m=t.getItem(r);if(m){const E=n.deserialize(m),A=i?Of(E,i):E,D=a?Mf(A,a):A;e.$patch(D)}d&&(u==null||u(f))}catch(m){s&&console.error("[pinia-plugin-persistedstate]",m)}}function uu(e,{storage:t,serializer:n,key:r,debug:s,pick:i,omit:a}){try{const l=i?Of(e,i):e,u=a?Mf(l,a):l,f=n.serialize(u);t.setItem(r,f)}catch(l){s&&console.error("[pinia-plugin-persistedstate]",l)}}function A_(e,t){return typeof e=="function"?e(t):typeof e=="string"?e:t}function b_(e,t,n){const{pinia:r,store:s,options:{persist:i=n}}=e;if(!i)return;// v8 ignore if -- @preserve
if(!(s.$id in r.state.value)){const l=r._s.get(s.$id.replace("__hot:",""));l&&Promise.resolve().then(()=>l.$persist());return}const a=(Array.isArray(i)?i:i===!0?[{}]:[i]).map(t);s.$hydrate=({runHooks:l=!0}={})=>{a.forEach(u=>{cu(s,u,e,l)})},s.$persist=()=>{a.forEach(l=>{uu(s.$state,l)})},a.forEach(l=>{cu(s,l,e),s.$subscribe((u,f)=>uu(f,l),{detached:!0})})}function S_(e={}){return function(t){b_(t,n=>{const r=A_(n.key,t.store.$id);return{key:(e.key?e.key:s=>s)(r),debug:n.debug??e.debug??!1,serializer:n.serializer??e.serializer??{serialize:s=>JSON.stringify(s),deserialize:s=>JSON.parse(s)},storage:n.storage??e.storage??window.localStorage,beforeHydrate:n.beforeHydrate??e.beforeHydrate,afterHydrate:n.afterHydrate??e.afterHydrate,pick:n.pick,omit:n.omit}},e.auto??!1)}}var R_=S_();const Yn=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},C_={},P_={class:"carafe"};function V_(e,t){return mt(),Nt("div",P_,[_i(e.$slots,"top",{},void 0,!0),_i(e.$slots,"mid",{},void 0,!0),_i(e.$slots,"bottom",{},void 0,!0)])}const D_=Yn(C_,[["render",V_],["__scopeId","data-v-43d2bfc5"]]),x_={},N_={class:"mug"};function O_(e,t){return mt(),Nt("div",N_,[_i(e.$slots,"default")])}const M_=Yn(x_,[["render",O_]]),k_=()=>{};var hu={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},L_=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Lf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,u=s+2<e.length,f=u?e[s+2]:0,d=i>>2,m=(i&3)<<4|l>>4;let E=(l&15)<<2|f>>6,A=f&63;u||(A=64,a||(E=64)),r.push(n[d],n[m],n[E],n[A])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(kf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):L_(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const m=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||m==null)throw new F_;const E=i<<2|l>>4;if(r.push(E),f!==64){const A=l<<4&240|f>>2;if(r.push(A),m!==64){const D=f<<6&192|m;r.push(D)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class F_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const U_=function(e){const t=kf(e);return Lf.encodeByteArray(t,!0)},ki=function(e){return U_(e).replace(/\./g,"")},B_=function(e){try{return Lf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $_=()=>j_().__FIREBASE_DEFAULTS__,q_=()=>{if(typeof process>"u"||typeof hu>"u")return;const e=hu.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},H_=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&B_(e[1]);return t&&JSON.parse(t)},ul=()=>{try{return k_()||$_()||q_()||H_()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},z_=e=>{var t,n;return(n=(t=ul())==null?void 0:t.emulatorHosts)==null?void 0:n[e]},K_=e=>{const t=z_(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Ff=()=>{var e;return(e=ul())==null?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hl(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function G_(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q_(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[ki(JSON.stringify(n)),ki(JSON.stringify(a)),""].join(".")}const Is={};function X_(){const e={prod:[],emulator:[]};for(const t of Object.keys(Is))Is[t]?e.emulator.push(t):e.prod.push(t);return e}function Y_(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let fu=!1;function J_(e,t){if(typeof window>"u"||typeof document>"u"||!hl(window.location.host)||Is[e]===t||Is[e]||fu)return;Is[e]=t;function n(E){return`__firebase__banner__${E}`}const r="__firebase__banner",i=X_().prod.length>0;function a(){const E=document.getElementById(r);E&&E.remove()}function l(E){E.style.display="flex",E.style.background="#7faaf0",E.style.position="fixed",E.style.bottom="5px",E.style.left="5px",E.style.padding=".5em",E.style.borderRadius="5px",E.style.alignItems="center"}function u(E,A){E.setAttribute("width","24"),E.setAttribute("id",A),E.setAttribute("height","24"),E.setAttribute("viewBox","0 0 24 24"),E.setAttribute("fill","none"),E.style.marginLeft="-6px"}function f(){const E=document.createElement("span");return E.style.cursor="pointer",E.style.marginLeft="16px",E.style.fontSize="24px",E.innerHTML=" &times;",E.onclick=()=>{fu=!0,a()},E}function d(E,A){E.setAttribute("id",A),E.innerText="Learn more",E.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",E.setAttribute("target","__blank"),E.style.paddingLeft="5px",E.style.textDecoration="underline"}function m(){const E=Y_(r),A=n("text"),D=document.getElementById(A)||document.createElement("span"),U=n("learnmore"),B=document.getElementById(U)||document.createElement("a"),K=n("preprendIcon"),W=document.getElementById(K)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(E.created){const Q=E.element;l(Q),d(B,U);const z=f();u(W,K),Q.append(W,D,B,z),document.body.appendChild(Q)}i?(D.innerText="Preview backend disconnected.",W.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(W.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,D.innerText="Preview backend running in this workspace."),D.setAttribute("id",A)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ty(){var t;const e=(t=ul())==null?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ey(){return!ty()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ny(){try{return typeof indexedDB=="object"}catch{return!1}}function ry(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)==null?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy="FirebaseError";class Mr extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=sy,Object.setPrototypeOf(this,Mr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Uf.prototype.create)}}class Uf{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?iy(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Mr(s,l,r)}}function iy(e,t){return e.replace(oy,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const oy=/\{\$([^}]+)}/g;function Li(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(du(i)&&du(a)){if(!Li(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function du(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(e){return e&&e._delegate?e._delegate:e}class Ns{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $n="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new W_;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(cy(t))try{this.getOrInitializeService({instanceIdentifier:$n})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=$n){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=$n){return this.instances.has(t)}getOptions(t=$n){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(t),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&t(i,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ly(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=$n){return this.component?this.component.multipleInstances?t:$n:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ly(e){return e===$n?void 0:e}function cy(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uy{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new ay(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ft;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ft||(ft={}));const hy={debug:ft.DEBUG,verbose:ft.VERBOSE,info:ft.INFO,warn:ft.WARN,error:ft.ERROR,silent:ft.SILENT},fy=ft.INFO,dy={[ft.DEBUG]:"log",[ft.VERBOSE]:"log",[ft.INFO]:"info",[ft.WARN]:"warn",[ft.ERROR]:"error"},py=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=dy[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Bf{constructor(t){this.name=t,this._logLevel=fy,this._logHandler=py,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ft))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?hy[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ft.DEBUG,...t),this._logHandler(this,ft.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ft.VERBOSE,...t),this._logHandler(this,ft.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ft.INFO,...t),this._logHandler(this,ft.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ft.WARN,...t),this._logHandler(this,ft.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ft.ERROR,...t),this._logHandler(this,ft.ERROR,...t)}}const my=(e,t)=>t.some(n=>e instanceof n);let pu,mu;function gy(){return pu||(pu=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _y(){return mu||(mu=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const jf=new WeakMap,va=new WeakMap,$f=new WeakMap,Zo=new WeakMap,fl=new WeakMap;function yy(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(En(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&jf.set(n,e)}).catch(()=>{}),fl.set(t,e),t}function Ey(e){if(va.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});va.set(e,t)}let Ia={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return va.get(e);if(t==="objectStoreNames")return e.objectStoreNames||$f.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return En(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function Ty(e){Ia=e(Ia)}function vy(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(ta(this),t,...n);return $f.set(r,t.sort?t.sort():[t]),En(r)}:_y().includes(e)?function(...t){return e.apply(ta(this),t),En(jf.get(this))}:function(...t){return En(e.apply(ta(this),t))}}function Iy(e){return typeof e=="function"?vy(e):(e instanceof IDBTransaction&&Ey(e),my(e,gy())?new Proxy(e,Ia):e)}function En(e){if(e instanceof IDBRequest)return yy(e);if(Zo.has(e))return Zo.get(e);const t=Iy(e);return t!==e&&(Zo.set(e,t),fl.set(t,e)),t}const ta=e=>fl.get(e);function wy(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=En(a);return r&&a.addEventListener("upgradeneeded",u=>{r(En(a.result),u.oldVersion,u.newVersion,En(a.transaction),u)}),n&&a.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const Ay=["get","getKey","getAll","getAllKeys","count"],by=["put","add","delete","clear"],ea=new Map;function gu(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(ea.get(t))return ea.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=by.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Ay.includes(n)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let f=u.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&u.done]))[0]};return ea.set(t,i),i}Ty(e=>({...e,get:(t,n,r)=>gu(t,n)||e.get(t,n,r),has:(t,n)=>!!gu(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sy{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ry(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ry(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const wa="@firebase/app",_u="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en=new Bf("@firebase/app"),Cy="@firebase/app-compat",Py="@firebase/analytics-compat",Vy="@firebase/analytics",Dy="@firebase/app-check-compat",xy="@firebase/app-check",Ny="@firebase/auth",Oy="@firebase/auth-compat",My="@firebase/database",ky="@firebase/data-connect",Ly="@firebase/database-compat",Fy="@firebase/functions",Uy="@firebase/functions-compat",By="@firebase/installations",jy="@firebase/installations-compat",$y="@firebase/messaging",qy="@firebase/messaging-compat",Hy="@firebase/performance",zy="@firebase/performance-compat",Ky="@firebase/remote-config",Wy="@firebase/remote-config-compat",Gy="@firebase/storage",Qy="@firebase/storage-compat",Xy="@firebase/firestore",Yy="@firebase/ai",Jy="@firebase/firestore-compat",Zy="firebase",tE="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aa="[DEFAULT]",eE={[wa]:"fire-core",[Cy]:"fire-core-compat",[Vy]:"fire-analytics",[Py]:"fire-analytics-compat",[xy]:"fire-app-check",[Dy]:"fire-app-check-compat",[Ny]:"fire-auth",[Oy]:"fire-auth-compat",[My]:"fire-rtdb",[ky]:"fire-data-connect",[Ly]:"fire-rtdb-compat",[Fy]:"fire-fn",[Uy]:"fire-fn-compat",[By]:"fire-iid",[jy]:"fire-iid-compat",[$y]:"fire-fcm",[qy]:"fire-fcm-compat",[Hy]:"fire-perf",[zy]:"fire-perf-compat",[Ky]:"fire-rc",[Wy]:"fire-rc-compat",[Gy]:"fire-gcs",[Qy]:"fire-gcs-compat",[Xy]:"fire-fst",[Jy]:"fire-fst-compat",[Yy]:"fire-vertex","fire-js":"fire-js",[Zy]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fi=new Map,nE=new Map,ba=new Map;function yu(e,t){try{e.container.addComponent(t)}catch(n){en.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Ui(e){const t=e.name;if(ba.has(t))return en.debug(`There were multiple attempts to register component ${t}.`),!1;ba.set(t,e);for(const n of Fi.values())yu(n,e);for(const n of nE.values())yu(n,e);return!0}function rE(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function sE(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Tn=new Uf("app","Firebase",iE);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Ns("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw Tn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE=tE;function qf(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r={name:Aa,automaticDataCollectionEnabled:!0,...t},s=r.name;if(typeof s!="string"||!s)throw Tn.create("bad-app-name",{appName:String(s)});if(n||(n=Ff()),!n)throw Tn.create("no-options");const i=Fi.get(s);if(i){if(Li(n,i.options)&&Li(r,i.config))return i;throw Tn.create("duplicate-app",{appName:s})}const a=new uy(s);for(const u of ba.values())a.addComponent(u);const l=new oE(n,r,a);return Fi.set(s,l),l}function lE(e=Aa){const t=Fi.get(e);if(!t&&e===Aa&&Ff())return qf();if(!t)throw Tn.create("no-app",{appName:e});return t}function wr(e,t,n){let r=eE[e]??e;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=t.match(/\s|\//);if(s||i){const a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),en.warn(a.join(" "));return}Ui(new Ns(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="firebase-heartbeat-database",uE=1,Os="firebase-heartbeat-store";let na=null;function Hf(){return na||(na=wy(cE,uE,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Os)}catch(n){console.warn(n)}}}}).catch(e=>{throw Tn.create("idb-open",{originalErrorMessage:e.message})})),na}async function hE(e){try{const n=(await Hf()).transaction(Os),r=await n.objectStore(Os).get(zf(e));return await n.done,r}catch(t){if(t instanceof Mr)en.warn(t.message);else{const n=Tn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});en.warn(n.message)}}}async function Eu(e,t){try{const r=(await Hf()).transaction(Os,"readwrite");await r.objectStore(Os).put(t,zf(e)),await r.done}catch(n){if(n instanceof Mr)en.warn(n.message);else{const r=Tn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});en.warn(r.message)}}}function zf(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=1024,dE=30;class pE{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new gE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Tu();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>dE){const a=_E(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){en.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Tu(),{heartbeatsToSend:r,unsentEntries:s}=mE(this._heartbeatsCache.heartbeats),i=ki(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return en.warn(n),""}}}function Tu(){return new Date().toISOString().substring(0,10)}function mE(e,t=fE){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),vu(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),vu(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class gE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ny()?ry().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Eu(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return Eu(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function vu(e){return ki(JSON.stringify({version:2,heartbeats:e})).length}function _E(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(e){Ui(new Ns("platform-logger",t=>new Sy(t),"PRIVATE")),Ui(new Ns("heartbeat",t=>new pE(t),"PRIVATE")),wr(wa,_u,e),wr(wa,_u,"esm2020"),wr("fire-js","")}yE("");var Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vn,Kf;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(w,g){function _(){}_.prototype=g.prototype,w.F=g.prototype,w.prototype=new _,w.prototype.constructor=w,w.D=function(I,v,S){for(var y=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)y[Mt-2]=arguments[Mt];return g.prototype[v].apply(I,y)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(w,g,_){_||(_=0);const I=Array(16);if(typeof g=="string")for(var v=0;v<16;++v)I[v]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(v=0;v<16;++v)I[v]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=w.g[0],_=w.g[1],v=w.g[2];let S=w.g[3],y;y=g+(S^_&(v^S))+I[0]+3614090360&4294967295,g=_+(y<<7&4294967295|y>>>25),y=S+(v^g&(_^v))+I[1]+3905402710&4294967295,S=g+(y<<12&4294967295|y>>>20),y=v+(_^S&(g^_))+I[2]+606105819&4294967295,v=S+(y<<17&4294967295|y>>>15),y=_+(g^v&(S^g))+I[3]+3250441966&4294967295,_=v+(y<<22&4294967295|y>>>10),y=g+(S^_&(v^S))+I[4]+4118548399&4294967295,g=_+(y<<7&4294967295|y>>>25),y=S+(v^g&(_^v))+I[5]+1200080426&4294967295,S=g+(y<<12&4294967295|y>>>20),y=v+(_^S&(g^_))+I[6]+2821735955&4294967295,v=S+(y<<17&4294967295|y>>>15),y=_+(g^v&(S^g))+I[7]+4249261313&4294967295,_=v+(y<<22&4294967295|y>>>10),y=g+(S^_&(v^S))+I[8]+1770035416&4294967295,g=_+(y<<7&4294967295|y>>>25),y=S+(v^g&(_^v))+I[9]+2336552879&4294967295,S=g+(y<<12&4294967295|y>>>20),y=v+(_^S&(g^_))+I[10]+4294925233&4294967295,v=S+(y<<17&4294967295|y>>>15),y=_+(g^v&(S^g))+I[11]+2304563134&4294967295,_=v+(y<<22&4294967295|y>>>10),y=g+(S^_&(v^S))+I[12]+1804603682&4294967295,g=_+(y<<7&4294967295|y>>>25),y=S+(v^g&(_^v))+I[13]+4254626195&4294967295,S=g+(y<<12&4294967295|y>>>20),y=v+(_^S&(g^_))+I[14]+2792965006&4294967295,v=S+(y<<17&4294967295|y>>>15),y=_+(g^v&(S^g))+I[15]+1236535329&4294967295,_=v+(y<<22&4294967295|y>>>10),y=g+(v^S&(_^v))+I[1]+4129170786&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^v&(g^_))+I[6]+3225465664&4294967295,S=g+(y<<9&4294967295|y>>>23),y=v+(g^_&(S^g))+I[11]+643717713&4294967295,v=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(v^S))+I[0]+3921069994&4294967295,_=v+(y<<20&4294967295|y>>>12),y=g+(v^S&(_^v))+I[5]+3593408605&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^v&(g^_))+I[10]+38016083&4294967295,S=g+(y<<9&4294967295|y>>>23),y=v+(g^_&(S^g))+I[15]+3634488961&4294967295,v=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(v^S))+I[4]+3889429448&4294967295,_=v+(y<<20&4294967295|y>>>12),y=g+(v^S&(_^v))+I[9]+568446438&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^v&(g^_))+I[14]+3275163606&4294967295,S=g+(y<<9&4294967295|y>>>23),y=v+(g^_&(S^g))+I[3]+4107603335&4294967295,v=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(v^S))+I[8]+1163531501&4294967295,_=v+(y<<20&4294967295|y>>>12),y=g+(v^S&(_^v))+I[13]+2850285829&4294967295,g=_+(y<<5&4294967295|y>>>27),y=S+(_^v&(g^_))+I[2]+4243563512&4294967295,S=g+(y<<9&4294967295|y>>>23),y=v+(g^_&(S^g))+I[7]+1735328473&4294967295,v=S+(y<<14&4294967295|y>>>18),y=_+(S^g&(v^S))+I[12]+2368359562&4294967295,_=v+(y<<20&4294967295|y>>>12),y=g+(_^v^S)+I[5]+4294588738&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^v)+I[8]+2272392833&4294967295,S=g+(y<<11&4294967295|y>>>21),y=v+(S^g^_)+I[11]+1839030562&4294967295,v=S+(y<<16&4294967295|y>>>16),y=_+(v^S^g)+I[14]+4259657740&4294967295,_=v+(y<<23&4294967295|y>>>9),y=g+(_^v^S)+I[1]+2763975236&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^v)+I[4]+1272893353&4294967295,S=g+(y<<11&4294967295|y>>>21),y=v+(S^g^_)+I[7]+4139469664&4294967295,v=S+(y<<16&4294967295|y>>>16),y=_+(v^S^g)+I[10]+3200236656&4294967295,_=v+(y<<23&4294967295|y>>>9),y=g+(_^v^S)+I[13]+681279174&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^v)+I[0]+3936430074&4294967295,S=g+(y<<11&4294967295|y>>>21),y=v+(S^g^_)+I[3]+3572445317&4294967295,v=S+(y<<16&4294967295|y>>>16),y=_+(v^S^g)+I[6]+76029189&4294967295,_=v+(y<<23&4294967295|y>>>9),y=g+(_^v^S)+I[9]+3654602809&4294967295,g=_+(y<<4&4294967295|y>>>28),y=S+(g^_^v)+I[12]+3873151461&4294967295,S=g+(y<<11&4294967295|y>>>21),y=v+(S^g^_)+I[15]+530742520&4294967295,v=S+(y<<16&4294967295|y>>>16),y=_+(v^S^g)+I[2]+3299628645&4294967295,_=v+(y<<23&4294967295|y>>>9),y=g+(v^(_|~S))+I[0]+4096336452&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~v))+I[7]+1126891415&4294967295,S=g+(y<<10&4294967295|y>>>22),y=v+(g^(S|~_))+I[14]+2878612391&4294967295,v=S+(y<<15&4294967295|y>>>17),y=_+(S^(v|~g))+I[5]+4237533241&4294967295,_=v+(y<<21&4294967295|y>>>11),y=g+(v^(_|~S))+I[12]+1700485571&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~v))+I[3]+2399980690&4294967295,S=g+(y<<10&4294967295|y>>>22),y=v+(g^(S|~_))+I[10]+4293915773&4294967295,v=S+(y<<15&4294967295|y>>>17),y=_+(S^(v|~g))+I[1]+2240044497&4294967295,_=v+(y<<21&4294967295|y>>>11),y=g+(v^(_|~S))+I[8]+1873313359&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~v))+I[15]+4264355552&4294967295,S=g+(y<<10&4294967295|y>>>22),y=v+(g^(S|~_))+I[6]+2734768916&4294967295,v=S+(y<<15&4294967295|y>>>17),y=_+(S^(v|~g))+I[13]+1309151649&4294967295,_=v+(y<<21&4294967295|y>>>11),y=g+(v^(_|~S))+I[4]+4149444226&4294967295,g=_+(y<<6&4294967295|y>>>26),y=S+(_^(g|~v))+I[11]+3174756917&4294967295,S=g+(y<<10&4294967295|y>>>22),y=v+(g^(S|~_))+I[2]+718787259&4294967295,v=S+(y<<15&4294967295|y>>>17),y=_+(S^(v|~g))+I[9]+3951481745&4294967295,w.g[0]=w.g[0]+g&4294967295,w.g[1]=w.g[1]+(v+(y<<21&4294967295|y>>>11))&4294967295,w.g[2]=w.g[2]+v&4294967295,w.g[3]=w.g[3]+S&4294967295}r.prototype.v=function(w,g){g===void 0&&(g=w.length);const _=g-this.blockSize,I=this.C;let v=this.h,S=0;for(;S<g;){if(v==0)for(;S<=_;)s(this,w,S),S+=this.blockSize;if(typeof w=="string"){for(;S<g;)if(I[v++]=w.charCodeAt(S++),v==this.blockSize){s(this,I),v=0;break}}else for(;S<g;)if(I[v++]=w[S++],v==this.blockSize){s(this,I),v=0;break}}this.h=v,this.o+=g},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var g=1;g<w.length-8;++g)w[g]=0;g=this.o*8;for(var _=w.length-8;_<w.length;++_)w[_]=g&255,g/=256;for(this.v(w),w=Array(16),g=0,_=0;_<4;++_)for(let I=0;I<32;I+=8)w[g++]=this.g[_]>>>I&255;return w};function i(w,g){var _=l;return Object.prototype.hasOwnProperty.call(_,w)?_[w]:_[w]=g(w)}function a(w,g){this.h=g;const _=[];let I=!0;for(let v=w.length-1;v>=0;v--){const S=w[v]|0;I&&S==g||(_[v]=S,I=!1)}this.g=_}var l={};function u(w){return-128<=w&&w<128?i(w,function(g){return new a([g|0],g<0?-1:0)}):new a([w|0],w<0?-1:0)}function f(w){if(isNaN(w)||!isFinite(w))return m;if(w<0)return B(f(-w));const g=[];let _=1;for(let I=0;w>=_;I++)g[I]=w/_|0,_*=4294967296;return new a(g,0)}function d(w,g){if(w.length==0)throw Error("number format error: empty string");if(g=g||10,g<2||36<g)throw Error("radix out of range: "+g);if(w.charAt(0)=="-")return B(d(w.substring(1),g));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');const _=f(Math.pow(g,8));let I=m;for(let S=0;S<w.length;S+=8){var v=Math.min(8,w.length-S);const y=parseInt(w.substring(S,S+v),g);v<8?(v=f(Math.pow(g,v)),I=I.j(v).add(f(y))):(I=I.j(_),I=I.add(f(y)))}return I}var m=u(0),E=u(1),A=u(16777216);e=a.prototype,e.m=function(){if(U(this))return-B(this).m();let w=0,g=1;for(let _=0;_<this.g.length;_++){const I=this.i(_);w+=(I>=0?I:4294967296+I)*g,g*=4294967296}return w},e.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(D(this))return"0";if(U(this))return"-"+B(this).toString(w);const g=f(Math.pow(w,6));var _=this;let I="";for(;;){const v=z(_,g).g;_=K(_,v.j(g));let S=((_.g.length>0?_.g[0]:_.h)>>>0).toString(w);if(_=v,D(_))return S+I;for(;S.length<6;)S="0"+S;I=S+I}},e.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function D(w){if(w.h!=0)return!1;for(let g=0;g<w.g.length;g++)if(w.g[g]!=0)return!1;return!0}function U(w){return w.h==-1}e.l=function(w){return w=K(this,w),U(w)?-1:D(w)?0:1};function B(w){const g=w.g.length,_=[];for(let I=0;I<g;I++)_[I]=~w.g[I];return new a(_,~w.h).add(E)}e.abs=function(){return U(this)?B(this):this},e.add=function(w){const g=Math.max(this.g.length,w.g.length),_=[];let I=0;for(let v=0;v<=g;v++){let S=I+(this.i(v)&65535)+(w.i(v)&65535),y=(S>>>16)+(this.i(v)>>>16)+(w.i(v)>>>16);I=y>>>16,S&=65535,y&=65535,_[v]=y<<16|S}return new a(_,_[_.length-1]&-2147483648?-1:0)};function K(w,g){return w.add(B(g))}e.j=function(w){if(D(this)||D(w))return m;if(U(this))return U(w)?B(this).j(B(w)):B(B(this).j(w));if(U(w))return B(this.j(B(w)));if(this.l(A)<0&&w.l(A)<0)return f(this.m()*w.m());const g=this.g.length+w.g.length,_=[];for(var I=0;I<2*g;I++)_[I]=0;for(I=0;I<this.g.length;I++)for(let v=0;v<w.g.length;v++){const S=this.i(I)>>>16,y=this.i(I)&65535,Mt=w.i(v)>>>16,Ee=w.i(v)&65535;_[2*I+2*v]+=y*Ee,W(_,2*I+2*v),_[2*I+2*v+1]+=S*Ee,W(_,2*I+2*v+1),_[2*I+2*v+1]+=y*Mt,W(_,2*I+2*v+1),_[2*I+2*v+2]+=S*Mt,W(_,2*I+2*v+2)}for(w=0;w<g;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=g;w<2*g;w++)_[w]=0;return new a(_,0)};function W(w,g){for(;(w[g]&65535)!=w[g];)w[g+1]+=w[g]>>>16,w[g]&=65535,g++}function Q(w,g){this.g=w,this.h=g}function z(w,g){if(D(g))throw Error("division by zero");if(D(w))return new Q(m,m);if(U(w))return g=z(B(w),g),new Q(B(g.g),B(g.h));if(U(g))return g=z(w,B(g)),new Q(B(g.g),g.h);if(w.g.length>30){if(U(w)||U(g))throw Error("slowDivide_ only works with positive integers.");for(var _=E,I=g;I.l(w)<=0;)_=rt(_),I=rt(I);var v=Et(_,1),S=Et(I,1);for(I=Et(I,2),_=Et(_,2);!D(I);){var y=S.add(I);y.l(w)<=0&&(v=v.add(_),S=y),I=Et(I,1),_=Et(_,1)}return g=K(w,v.j(g)),new Q(v,g)}for(v=m;w.l(g)>=0;){for(_=Math.max(1,Math.floor(w.m()/g.m())),I=Math.ceil(Math.log(_)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),S=f(_),y=S.j(g);U(y)||y.l(w)>0;)_-=I,S=f(_),y=S.j(g);D(S)&&(S=E),v=v.add(S),w=K(w,y)}return new Q(v,w)}e.B=function(w){return z(this,w).h},e.and=function(w){const g=Math.max(this.g.length,w.g.length),_=[];for(let I=0;I<g;I++)_[I]=this.i(I)&w.i(I);return new a(_,this.h&w.h)},e.or=function(w){const g=Math.max(this.g.length,w.g.length),_=[];for(let I=0;I<g;I++)_[I]=this.i(I)|w.i(I);return new a(_,this.h|w.h)},e.xor=function(w){const g=Math.max(this.g.length,w.g.length),_=[];for(let I=0;I<g;I++)_[I]=this.i(I)^w.i(I);return new a(_,this.h^w.h)};function rt(w){const g=w.g.length+1,_=[];for(let I=0;I<g;I++)_[I]=w.i(I)<<1|w.i(I-1)>>>31;return new a(_,w.h)}function Et(w,g){const _=g>>5;g%=32;const I=w.g.length-_,v=[];for(let S=0;S<I;S++)v[S]=g>0?w.i(S+_)>>>g|w.i(S+_+1)<<32-g:w.i(S+_);return new a(v,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Kf=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,vn=a}).apply(typeof Iu<"u"?Iu:typeof self<"u"?self:typeof window<"u"?window:{});var ui=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wf,hs,Gf,Ti,Sa,Qf,Xf,Yf;(function(){var e,t=Object.defineProperty;function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof ui=="object"&&ui];for(var c=0;c<o.length;++c){var h=o[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,c){if(c)t:{var h=r;o=o.split(".");for(var p=0;p<o.length-1;p++){var R=o[p];if(!(R in h))break t;h=h[R]}o=o[o.length-1],p=h[o],c=c(p),c!=p&&c!=null&&t(h,o,{configurable:!0,writable:!0,value:c})}}s("Symbol.dispose",function(o){return o||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(o){return o||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(o){return o||function(c){var h=[],p;for(p in c)Object.prototype.hasOwnProperty.call(c,p)&&h.push([p,c[p]]);return h}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(o){var c=typeof o;return c=="object"&&o!=null||c=="function"}function u(o,c,h){return o.call.apply(o.bind,arguments)}function f(o,c,h){return f=u,f.apply(null,arguments)}function d(o,c){var h=Array.prototype.slice.call(arguments,1);return function(){var p=h.slice();return p.push.apply(p,arguments),o.apply(this,p)}}function m(o,c){function h(){}h.prototype=c.prototype,o.Z=c.prototype,o.prototype=new h,o.prototype.constructor=o,o.Ob=function(p,R,C){for(var j=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)j[ot-2]=arguments[ot];return c.prototype[R].apply(p,j)}}var E=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?o=>o&&AsyncContext.Snapshot.wrap(o):o=>o;function A(o){const c=o.length;if(c>0){const h=Array(c);for(let p=0;p<c;p++)h[p]=o[p];return h}return[]}function D(o,c){for(let p=1;p<arguments.length;p++){const R=arguments[p];var h=typeof R;if(h=h!="object"?h:R?Array.isArray(R)?"array":h:"null",h=="array"||h=="object"&&typeof R.length=="number"){h=o.length||0;const C=R.length||0;o.length=h+C;for(let j=0;j<C;j++)o[h+j]=R[j]}else o.push(R)}}class U{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function B(o){a.setTimeout(()=>{throw o},0)}function K(){var o=w;let c=null;return o.g&&(c=o.g,o.g=o.g.next,o.g||(o.h=null),c.next=null),c}class W{constructor(){this.h=this.g=null}add(c,h){const p=Q.get();p.set(c,h),this.h?this.h.next=p:this.g=p,this.h=p}}var Q=new U(()=>new z,o=>o.reset());class z{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let rt,Et=!1,w=new W,g=()=>{const o=Promise.resolve(void 0);rt=()=>{o.then(_)}};function _(){for(var o;o=K();){try{o.h.call(o.g)}catch(h){B(h)}var c=Q;c.j(o),c.h<100&&(c.h++,o.next=c.g,c.g=o)}Et=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function v(o,c){this.type=o,this.g=this.target=c,this.defaultPrevented=!1}v.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!a.addEventListener||!Object.defineProperty)return!1;var o=!1,c=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};a.addEventListener("test",h,c),a.removeEventListener("test",h,c)}catch{}return o})();function y(o){return/^[\s\xa0]*$/.test(o)}function Mt(o,c){v.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o&&this.init(o,c)}m(Mt,v),Mt.prototype.init=function(o,c){const h=this.type=o.type,p=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;this.target=o.target||o.srcElement,this.g=c,c=o.relatedTarget,c||(h=="mouseover"?c=o.fromElement:h=="mouseout"&&(c=o.toElement)),this.relatedTarget=c,p?(this.clientX=p.clientX!==void 0?p.clientX:p.pageX,this.clientY=p.clientY!==void 0?p.clientY:p.pageY,this.screenX=p.screenX||0,this.screenY=p.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=o.pointerType,this.state=o.state,this.i=o,o.defaultPrevented&&Mt.Z.h.call(this)},Mt.prototype.h=function(){Mt.Z.h.call(this);const o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ee="closure_listenable_"+(Math.random()*1e6|0),Pt=0;function at(o,c,h,p,R){this.listener=o,this.proxy=null,this.src=c,this.type=h,this.capture=!!p,this.ha=R,this.key=++Pt,this.da=this.fa=!1}function gt(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Te(o,c,h){for(const p in o)c.call(h,o[p],p,o)}function nr(o,c){for(const h in o)c.call(void 0,o[h],h,o)}function Ve(o){const c={};for(const h in o)c[h]=o[h];return c}const de="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Br(o,c){let h,p;for(let R=1;R<arguments.length;R++){p=arguments[R];for(h in p)o[h]=p[h];for(let C=0;C<de.length;C++)h=de[C],Object.prototype.hasOwnProperty.call(p,h)&&(o[h]=p[h])}}function rr(o){this.src=o,this.g={},this.h=0}rr.prototype.add=function(o,c,h,p,R){const C=o.toString();o=this.g[C],o||(o=this.g[C]=[],this.h++);const j=ze(o,c,p,R);return j>-1?(c=o[j],h||(c.fa=!1)):(c=new at(c,this.src,C,!!p,R),c.fa=h,o.push(c)),c};function jr(o,c){const h=c.type;if(h in o.g){var p=o.g[h],R=Array.prototype.indexOf.call(p,c,void 0),C;(C=R>=0)&&Array.prototype.splice.call(p,R,1),C&&(gt(c),o.g[h].length==0&&(delete o.g[h],o.h--))}}function ze(o,c,h,p){for(let R=0;R<o.length;++R){const C=o[R];if(!C.da&&C.listener==c&&C.capture==!!h&&C.ha==p)return R}return-1}var on="closure_lm_"+(Math.random()*1e6|0),xn={};function $r(o,c,h,p,R){if(Array.isArray(c)){for(let C=0;C<c.length;C++)$r(o,c[C],h,p,R);return null}return h=$(h),o&&o[Ee]?o.J(c,h,l(p)?!!p.capture:!1,R):Nn(o,c,h,!1,p,R)}function Nn(o,c,h,p,R,C){if(!c)throw Error("Invalid event type");const j=l(R)?!!R.capture:!!R;let ot=x(o);if(ot||(o[on]=ot=new rr(o)),h=ot.add(c,h,p,j,C),h.proxy)return h;if(p=jl(),h.proxy=p,p.src=o,p.listener=h,o.addEventListener)S||(R=j),R===void 0&&(R=!1),o.addEventListener(c.toString(),p,R);else if(o.attachEvent)o.attachEvent(P(c.toString()),p);else if(o.addListener&&o.removeListener)o.addListener(p);else throw Error("addEventListener and attachEvent are unavailable.");return h}function jl(){function o(h){return c.call(o.src,o.listener,h)}const c=F;return o}function T(o,c,h,p,R){if(Array.isArray(c))for(var C=0;C<c.length;C++)T(o,c[C],h,p,R);else p=l(p)?!!p.capture:!!p,h=$(h),o&&o[Ee]?(o=o.i,C=String(c).toString(),C in o.g&&(c=o.g[C],h=ze(c,h,p,R),h>-1&&(gt(c[h]),Array.prototype.splice.call(c,h,1),c.length==0&&(delete o.g[C],o.h--)))):o&&(o=x(o))&&(c=o.g[c.toString()],o=-1,c&&(o=ze(c,h,p,R)),(h=o>-1?c[o]:null)&&b(h))}function b(o){if(typeof o!="number"&&o&&!o.da){var c=o.src;if(c&&c[Ee])jr(c.i,o);else{var h=o.type,p=o.proxy;c.removeEventListener?c.removeEventListener(h,p,o.capture):c.detachEvent?c.detachEvent(P(h),p):c.addListener&&c.removeListener&&c.removeListener(p),(h=x(c))?(jr(h,o),h.h==0&&(h.src=null,c[on]=null)):gt(o)}}}function P(o){return o in xn?xn[o]:xn[o]="on"+o}function F(o,c){if(o.da)o=!0;else{c=new Mt(c,this);const h=o.listener,p=o.ha||o.src;o.fa&&b(o),o=h.call(p,c)}return o}function x(o){return o=o[on],o instanceof rr?o:null}var O="__closure_events_fn_"+(Math.random()*1e9>>>0);function $(o){return typeof o=="function"?o:(o[O]||(o[O]=function(c){return o.handleEvent(c)}),o[O])}function L(){I.call(this),this.i=new rr(this),this.M=this,this.G=null}m(L,I),L.prototype[Ee]=!0,L.prototype.removeEventListener=function(o,c,h,p){T(this,o,c,h,p)};function k(o,c){var h,p=o.G;if(p)for(h=[];p;p=p.G)h.push(p);if(o=o.M,p=c.type||c,typeof c=="string")c=new v(c,o);else if(c instanceof v)c.target=c.target||o;else{var R=c;c=new v(p,o),Br(c,R)}R=!0;let C,j;if(h)for(j=h.length-1;j>=0;j--)C=c.g=h[j],R=M(C,p,!0,c)&&R;if(C=c.g=o,R=M(C,p,!0,c)&&R,R=M(C,p,!1,c)&&R,h)for(j=0;j<h.length;j++)C=c.g=h[j],R=M(C,p,!1,c)&&R}L.prototype.N=function(){if(L.Z.N.call(this),this.i){var o=this.i;for(const c in o.g){const h=o.g[c];for(let p=0;p<h.length;p++)gt(h[p]);delete o.g[c],o.h--}}this.G=null},L.prototype.J=function(o,c,h,p){return this.i.add(String(o),c,!1,h,p)},L.prototype.K=function(o,c,h,p){return this.i.add(String(o),c,!0,h,p)};function M(o,c,h,p){if(c=o.i.g[String(c)],!c)return!0;c=c.concat();let R=!0;for(let C=0;C<c.length;++C){const j=c[C];if(j&&!j.da&&j.capture==h){const ot=j.listener,Bt=j.ha||j.src;j.fa&&jr(o.i,j),R=ot.call(Bt,p)!==!1&&R}}return R&&!p.defaultPrevented}function J(o,c){if(typeof o!="function")if(o&&typeof o.handleEvent=="function")o=f(o.handleEvent,o);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:a.setTimeout(o,c||0)}function q(o){o.g=J(()=>{o.g=null,o.i&&(o.i=!1,q(o))},o.l);const c=o.h;o.h=null,o.m.apply(null,c)}class X extends I{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:q(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Z(o){I.call(this),this.h=o,this.g={}}m(Z,I);var lt=[];function Tt(o){Te(o.g,function(c,h){this.g.hasOwnProperty(h)&&b(c)},o),o.g={}}Z.prototype.N=function(){Z.Z.N.call(this),Tt(this)},Z.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var dt=a.JSON.stringify,Zt=a.JSON.parse,te=class{stringify(o){return a.JSON.stringify(o,void 0)}parse(o){return a.JSON.parse(o,void 0)}};function pe(){}function me(){}var be={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function sr(){v.call(this,"d")}m(sr,v);function Wt(){v.call(this,"c")}m(Wt,v);var Ht={},qr=null;function On(){return qr=qr||new L}Ht.Ia="serverreachability";function $l(o){v.call(this,Ht.Ia,o)}m($l,v);function Hr(o){const c=On();k(c,new $l(c))}Ht.STAT_EVENT="statevent";function ql(o,c){v.call(this,Ht.STAT_EVENT,o),this.stat=c}m(ql,v);function le(o){const c=On();k(c,new ql(c,o))}Ht.Ja="timingevent";function Hl(o,c){v.call(this,Ht.Ja,o),this.size=c}m(Hl,v);function zr(o,c){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){o()},c)}function Kr(){this.g=!0}Kr.prototype.ua=function(){this.g=!1};function wp(o,c,h,p,R,C){o.info(function(){if(o.g)if(C){var j="",ot=C.split("&");for(let vt=0;vt<ot.length;vt++){var Bt=ot[vt].split("=");if(Bt.length>1){const zt=Bt[0];Bt=Bt[1];const xe=zt.split("_");j=xe.length>=2&&xe[1]=="type"?j+(zt+"="+Bt+"&"):j+(zt+"=redacted&")}}}else j=null;else j=C;return"XMLHTTP REQ ("+p+") [attempt "+R+"]: "+c+`
`+h+`
`+j})}function Ap(o,c,h,p,R,C,j){o.info(function(){return"XMLHTTP RESP ("+p+") [ attempt "+R+"]: "+c+`
`+h+`
`+C+" "+j})}function ir(o,c,h,p){o.info(function(){return"XMLHTTP TEXT ("+c+"): "+Sp(o,h)+(p?" "+p:"")})}function bp(o,c){o.info(function(){return"TIMEOUT: "+c})}Kr.prototype.info=function(){};function Sp(o,c){if(!o.g)return c;if(!c)return null;try{const C=JSON.parse(c);if(C){for(o=0;o<C.length;o++)if(Array.isArray(C[o])){var h=C[o];if(!(h.length<2)){var p=h[1];if(Array.isArray(p)&&!(p.length<1)){var R=p[0];if(R!="noop"&&R!="stop"&&R!="close")for(let j=1;j<p.length;j++)p[j]=""}}}}return dt(C)}catch{return c}}var Xs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},zl={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Kl;function Co(){}m(Co,pe),Co.prototype.g=function(){return new XMLHttpRequest},Kl=new Co;function Wr(o){return encodeURIComponent(String(o))}function Rp(o){var c=1;o=o.split(":");const h=[];for(;c>0&&o.length;)h.push(o.shift()),c--;return o.length&&h.push(o.join(":")),h}function an(o,c,h,p){this.j=o,this.i=c,this.l=h,this.S=p||1,this.V=new Z(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Wl}function Wl(){this.i=null,this.g="",this.h=!1}var Gl={},Po={};function Vo(o,c,h){o.M=1,o.A=Js(De(c)),o.u=h,o.R=!0,Ql(o,null)}function Ql(o,c){o.F=Date.now(),Ys(o),o.B=De(o.A);var h=o.B,p=o.S;Array.isArray(p)||(p=[String(p)]),lc(h.i,"t",p),o.C=0,h=o.j.L,o.h=new Wl,o.g=Sc(o.j,h?c:null,!o.u),o.P>0&&(o.O=new X(f(o.Y,o,o.g),o.P)),c=o.V,h=o.g,p=o.ba;var R="readystatechange";Array.isArray(R)||(R&&(lt[0]=R.toString()),R=lt);for(let C=0;C<R.length;C++){const j=$r(h,R[C],p||c.handleEvent,!1,c.h||c);if(!j)break;c.g[j.key]=j}c=o.J?Ve(o.J):{},o.u?(o.v||(o.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.B,o.v,o.u,c)):(o.v="GET",o.g.ea(o.B,o.v,null,c)),Hr(),wp(o.i,o.v,o.B,o.l,o.S,o.u)}an.prototype.ba=function(o){o=o.target;const c=this.O;c&&un(o)==3?c.j():this.Y(o)},an.prototype.Y=function(o){try{if(o==this.g)t:{const ot=un(this.g),Bt=this.g.ya(),vt=this.g.ca();if(!(ot<3)&&(ot!=3||this.g&&(this.h.h||this.g.la()||mc(this.g)))){this.K||ot!=4||Bt==7||(Bt==8||vt<=0?Hr(3):Hr(2)),Do(this);var c=this.g.ca();this.X=c;var h=Cp(this);if(this.o=c==200,Ap(this.i,this.v,this.B,this.l,this.S,ot,c),this.o){if(this.U&&!this.L){e:{if(this.g){var p,R=this.g;if((p=R.g?R.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(p)){var C=p;break e}}C=null}if(o=C)ir(this.i,this.l,o,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,xo(this,o);else{this.o=!1,this.m=3,le(12),Mn(this),Gr(this);break t}}if(this.R){o=!0;let zt;for(;!this.K&&this.C<h.length;)if(zt=Pp(this,h),zt==Po){ot==4&&(this.m=4,le(14),o=!1),ir(this.i,this.l,null,"[Incomplete Response]");break}else if(zt==Gl){this.m=4,le(15),ir(this.i,this.l,h,"[Invalid Chunk]"),o=!1;break}else ir(this.i,this.l,zt,null),xo(this,zt);if(Xl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||h.length!=0||this.h.h||(this.m=1,le(16),o=!1),this.o=this.o&&o,!o)ir(this.i,this.l,h,"[Invalid Chunked Response]"),Mn(this),Gr(this);else if(h.length>0&&!this.W){this.W=!0;var j=this.j;j.g==this&&j.aa&&!j.P&&(j.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),Bo(j),j.P=!0,le(11))}}else ir(this.i,this.l,h,null),xo(this,h);ot==4&&Mn(this),this.o&&!this.K&&(ot==4?Ic(this.j,this):(this.o=!1,Ys(this)))}else qp(this.g),c==400&&h.indexOf("Unknown SID")>0?(this.m=3,le(12)):(this.m=0,le(13)),Mn(this),Gr(this)}}}catch{}finally{}};function Cp(o){if(!Xl(o))return o.g.la();const c=mc(o.g);if(c==="")return"";let h="";const p=c.length,R=un(o.g)==4;if(!o.h.i){if(typeof TextDecoder>"u")return Mn(o),Gr(o),"";o.h.i=new a.TextDecoder}for(let C=0;C<p;C++)o.h.h=!0,h+=o.h.i.decode(c[C],{stream:!(R&&C==p-1)});return c.length=0,o.h.g+=h,o.C=0,o.h.g}function Xl(o){return o.g?o.v=="GET"&&o.M!=2&&o.j.Aa:!1}function Pp(o,c){var h=o.C,p=c.indexOf(`
`,h);return p==-1?Po:(h=Number(c.substring(h,p)),isNaN(h)?Gl:(p+=1,p+h>c.length?Po:(c=c.slice(p,p+h),o.C=p+h,c)))}an.prototype.cancel=function(){this.K=!0,Mn(this)};function Ys(o){o.T=Date.now()+o.H,Yl(o,o.H)}function Yl(o,c){if(o.D!=null)throw Error("WatchDog timer not null");o.D=zr(f(o.aa,o),c)}function Do(o){o.D&&(a.clearTimeout(o.D),o.D=null)}an.prototype.aa=function(){this.D=null;const o=Date.now();o-this.T>=0?(bp(this.i,this.B),this.M!=2&&(Hr(),le(17)),Mn(this),this.m=2,Gr(this)):Yl(this,this.T-o)};function Gr(o){o.j.I==0||o.K||Ic(o.j,o)}function Mn(o){Do(o);var c=o.O;c&&typeof c.dispose=="function"&&c.dispose(),o.O=null,Tt(o.V),o.g&&(c=o.g,o.g=null,c.abort(),c.dispose())}function xo(o,c){try{var h=o.j;if(h.I!=0&&(h.g==o||No(h.h,o))){if(!o.L&&No(h.h,o)&&h.I==3){try{var p=h.Ba.g.parse(c)}catch{p=null}if(Array.isArray(p)&&p.length==3){var R=p;if(R[0]==0){t:if(!h.v){if(h.g)if(h.g.F+3e3<o.F)ri(h),ei(h);else break t;Uo(h),le(18)}}else h.xa=R[1],0<h.xa-h.K&&R[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=zr(f(h.Va,h),6e3));tc(h.h)<=1&&h.ta&&(h.ta=void 0)}else Ln(h,11)}else if((o.L||h.g==o)&&ri(h),!y(c))for(R=h.Ba.g.parse(c),c=0;c<R.length;c++){let vt=R[c];const zt=vt[0];if(!(zt<=h.K))if(h.K=zt,vt=vt[1],h.I==2)if(vt[0]=="c"){h.M=vt[1],h.ba=vt[2];const xe=vt[3];xe!=null&&(h.ka=xe,h.j.info("VER="+h.ka));const Fn=vt[4];Fn!=null&&(h.za=Fn,h.j.info("SVER="+h.za));const hn=vt[5];hn!=null&&typeof hn=="number"&&hn>0&&(p=1.5*hn,h.O=p,h.j.info("backChannelRequestTimeoutMs_="+p)),p=h;const fn=o.g;if(fn){const ii=fn.g?fn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ii){var C=p.h;C.g||ii.indexOf("spdy")==-1&&ii.indexOf("quic")==-1&&ii.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(Oo(C,C.h),C.h=null))}if(p.G){const jo=fn.g?fn.g.getResponseHeader("X-HTTP-Session-Id"):null;jo&&(p.wa=jo,St(p.J,p.G,jo))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-o.F,h.j.info("Handshake RTT: "+h.T+"ms")),p=h;var j=o;if(p.na=bc(p,p.L?p.ba:null,p.W),j.L){ec(p.h,j);var ot=j,Bt=p.O;Bt&&(ot.H=Bt),ot.D&&(Do(ot),Ys(ot)),p.g=j}else Tc(p);h.i.length>0&&ni(h)}else vt[0]!="stop"&&vt[0]!="close"||Ln(h,7);else h.I==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?Ln(h,7):Fo(h):vt[0]!="noop"&&h.l&&h.l.qa(vt),h.A=0)}}Hr(4)}catch{}}var Vp=class{constructor(o,c){this.g=o,this.map=c}};function Jl(o){this.l=o||10,a.PerformanceNavigationTiming?(o=a.performance.getEntriesByType("navigation"),o=o.length>0&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Zl(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function tc(o){return o.h?1:o.g?o.g.size:0}function No(o,c){return o.h?o.h==c:o.g?o.g.has(c):!1}function Oo(o,c){o.g?o.g.add(c):o.h=c}function ec(o,c){o.h&&o.h==c?o.h=null:o.g&&o.g.has(c)&&o.g.delete(c)}Jl.prototype.cancel=function(){if(this.i=nc(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function nc(o){if(o.h!=null)return o.i.concat(o.h.G);if(o.g!=null&&o.g.size!==0){let c=o.i;for(const h of o.g.values())c=c.concat(h.G);return c}return A(o.i)}var rc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Dp(o,c){if(o){o=o.split("&");for(let h=0;h<o.length;h++){const p=o[h].indexOf("=");let R,C=null;p>=0?(R=o[h].substring(0,p),C=o[h].substring(p+1)):R=o[h],c(R,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function ln(o){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;o instanceof ln?(this.l=o.l,Qr(this,o.j),this.o=o.o,this.g=o.g,Xr(this,o.u),this.h=o.h,Mo(this,cc(o.i)),this.m=o.m):o&&(c=String(o).match(rc))?(this.l=!1,Qr(this,c[1]||"",!0),this.o=Yr(c[2]||""),this.g=Yr(c[3]||"",!0),Xr(this,c[4]),this.h=Yr(c[5]||"",!0),Mo(this,c[6]||"",!0),this.m=Yr(c[7]||"")):(this.l=!1,this.i=new Zr(null,this.l))}ln.prototype.toString=function(){const o=[];var c=this.j;c&&o.push(Jr(c,sc,!0),":");var h=this.g;return(h||c=="file")&&(o.push("//"),(c=this.o)&&o.push(Jr(c,sc,!0),"@"),o.push(Wr(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&o.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Jr(h,h.charAt(0)=="/"?Op:Np,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Jr(h,kp)),o.join("")},ln.prototype.resolve=function(o){const c=De(this);let h=!!o.j;h?Qr(c,o.j):h=!!o.o,h?c.o=o.o:h=!!o.g,h?c.g=o.g:h=o.u!=null;var p=o.h;if(h)Xr(c,o.u);else if(h=!!o.h){if(p.charAt(0)!="/")if(this.g&&!this.h)p="/"+p;else{var R=c.h.lastIndexOf("/");R!=-1&&(p=c.h.slice(0,R+1)+p)}if(R=p,R==".."||R==".")p="";else if(R.indexOf("./")!=-1||R.indexOf("/.")!=-1){p=R.lastIndexOf("/",0)==0,R=R.split("/");const C=[];for(let j=0;j<R.length;){const ot=R[j++];ot=="."?p&&j==R.length&&C.push(""):ot==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),p&&j==R.length&&C.push("")):(C.push(ot),p=!0)}p=C.join("/")}else p=R}return h?c.h=p:h=o.i.toString()!=="",h?Mo(c,cc(o.i)):h=!!o.m,h&&(c.m=o.m),c};function De(o){return new ln(o)}function Qr(o,c,h){o.j=h?Yr(c,!0):c,o.j&&(o.j=o.j.replace(/:$/,""))}function Xr(o,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);o.u=c}else o.u=null}function Mo(o,c,h){c instanceof Zr?(o.i=c,Lp(o.i,o.l)):(h||(c=Jr(c,Mp)),o.i=new Zr(c,o.l))}function St(o,c,h){o.i.set(c,h)}function Js(o){return St(o,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),o}function Yr(o,c){return o?c?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Jr(o,c,h){return typeof o=="string"?(o=encodeURI(o).replace(c,xp),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function xp(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var sc=/[#\/\?@]/g,Np=/[#\?:]/g,Op=/[#\?]/g,Mp=/[#\?@]/g,kp=/#/g;function Zr(o,c){this.h=this.g=null,this.i=o||null,this.j=!!c}function kn(o){o.g||(o.g=new Map,o.h=0,o.i&&Dp(o.i,function(c,h){o.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}e=Zr.prototype,e.add=function(o,c){kn(this),this.i=null,o=or(this,o);let h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(c),this.h+=1,this};function ic(o,c){kn(o),c=or(o,c),o.g.has(c)&&(o.i=null,o.h-=o.g.get(c).length,o.g.delete(c))}function oc(o,c){return kn(o),c=or(o,c),o.g.has(c)}e.forEach=function(o,c){kn(this),this.g.forEach(function(h,p){h.forEach(function(R){o.call(c,R,p,this)},this)},this)};function ac(o,c){kn(o);let h=[];if(typeof c=="string")oc(o,c)&&(h=h.concat(o.g.get(or(o,c))));else for(o=Array.from(o.g.values()),c=0;c<o.length;c++)h=h.concat(o[c]);return h}e.set=function(o,c){return kn(this),this.i=null,o=or(this,o),oc(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[c]),this.h+=1,this},e.get=function(o,c){return o?(o=ac(this,o),o.length>0?String(o[0]):c):c};function lc(o,c,h){ic(o,c),h.length>0&&(o.i=null,o.g.set(or(o,c),A(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],c=Array.from(this.g.keys());for(let p=0;p<c.length;p++){var h=c[p];const R=Wr(h);h=ac(this,h);for(let C=0;C<h.length;C++){let j=R;h[C]!==""&&(j+="="+Wr(h[C])),o.push(j)}}return this.i=o.join("&")};function cc(o){const c=new Zr;return c.i=o.i,o.g&&(c.g=new Map(o.g),c.h=o.h),c}function or(o,c){return c=String(c),o.j&&(c=c.toLowerCase()),c}function Lp(o,c){c&&!o.j&&(kn(o),o.i=null,o.g.forEach(function(h,p){const R=p.toLowerCase();p!=R&&(ic(this,p),lc(this,R,h))},o)),o.j=c}function Fp(o,c){const h=new Kr;if(a.Image){const p=new Image;p.onload=d(cn,h,"TestLoadImage: loaded",!0,c,p),p.onerror=d(cn,h,"TestLoadImage: error",!1,c,p),p.onabort=d(cn,h,"TestLoadImage: abort",!1,c,p),p.ontimeout=d(cn,h,"TestLoadImage: timeout",!1,c,p),a.setTimeout(function(){p.ontimeout&&p.ontimeout()},1e4),p.src=o}else c(!1)}function Up(o,c){const h=new Kr,p=new AbortController,R=setTimeout(()=>{p.abort(),cn(h,"TestPingServer: timeout",!1,c)},1e4);fetch(o,{signal:p.signal}).then(C=>{clearTimeout(R),C.ok?cn(h,"TestPingServer: ok",!0,c):cn(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(R),cn(h,"TestPingServer: error",!1,c)})}function cn(o,c,h,p,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),p(h)}catch{}}function Bp(){this.g=new te}function ko(o){this.i=o.Sb||null,this.h=o.ab||!1}m(ko,pe),ko.prototype.g=function(){return new Zs(this.i,this.h)};function Zs(o,c){L.call(this),this.H=o,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Zs,L),e=Zs.prototype,e.open=function(o,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=o,this.D=c,this.readyState=1,es(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};o&&(c.body=o),(this.H||a).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ts(this)),this.readyState=0},e.Pa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,es(this)),this.g&&(this.readyState=3,es(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;uc(this)}else o.text().then(this.Oa.bind(this),this.ga.bind(this))};function uc(o){o.j.read().then(o.Ma.bind(o)).catch(o.ga.bind(o))}e.Ma=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var c=o.value?o.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!o.done}))&&(this.response=this.responseText+=c)}o.done?ts(this):es(this),this.readyState==3&&uc(this)}},e.Oa=function(o){this.g&&(this.response=this.responseText=o,ts(this))},e.Na=function(o){this.g&&(this.response=o,ts(this))},e.ga=function(){this.g&&ts(this)};function ts(o){o.readyState=4,o.l=null,o.j=null,o.B=null,es(o)}e.setRequestHeader=function(o,c){this.A.append(o,c)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=c.next();return o.join(`\r
`)};function es(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(Zs.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function hc(o){let c="";return Te(o,function(h,p){c+=p,c+=":",c+=h,c+=`\r
`}),c}function Lo(o,c,h){t:{for(p in h){var p=!1;break t}p=!0}p||(h=hc(h),typeof o=="string"?h!=null&&Wr(h):St(o,c,h))}function Dt(o){L.call(this),this.headers=new Map,this.L=o||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Dt,L);var jp=/^https?$/i,$p=["POST","PUT"];e=Dt.prototype,e.Fa=function(o){this.H=o},e.ea=function(o,c,h,p){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);c=c?c.toUpperCase():"GET",this.D=o,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Kl.g(),this.g.onreadystatechange=E(f(this.Ca,this));try{this.B=!0,this.g.open(c,String(o),!0),this.B=!1}catch(C){fc(this,C);return}if(o=h||"",h=new Map(this.headers),p)if(Object.getPrototypeOf(p)===Object.prototype)for(var R in p)h.set(R,p[R]);else if(typeof p.keys=="function"&&typeof p.get=="function")for(const C of p.keys())h.set(C,p.get(C));else throw Error("Unknown input type for opt_headers: "+String(p));p=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),R=a.FormData&&o instanceof a.FormData,!(Array.prototype.indexOf.call($p,c,void 0)>=0)||p||R||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[C,j]of h)this.g.setRequestHeader(C,j);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(o),this.v=!1}catch(C){fc(this,C)}};function fc(o,c){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=c,o.o=5,dc(o),ti(o)}function dc(o){o.A||(o.A=!0,k(o,"complete"),k(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=o||7,k(this,"complete"),k(this,"abort"),ti(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ti(this,!0)),Dt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?pc(this):this.Xa())},e.Xa=function(){pc(this)};function pc(o){if(o.h&&typeof i<"u"){if(o.v&&un(o)==4)setTimeout(o.Ca.bind(o),0);else if(k(o,"readystatechange"),un(o)==4){o.h=!1;try{const C=o.ca();t:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break t;default:c=!1}var h;if(!(h=c)){var p;if(p=C===0){let j=String(o.D).match(rc)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),p=!jp.test(j?j.toLowerCase():"")}h=p}if(h)k(o,"complete"),k(o,"success");else{o.o=6;try{var R=un(o)>2?o.g.statusText:""}catch{R=""}o.l=R+" ["+o.ca()+"]",dc(o)}}finally{ti(o)}}}}function ti(o,c){if(o.g){o.m&&(clearTimeout(o.m),o.m=null);const h=o.g;o.g=null,c||k(o,"ready");try{h.onreadystatechange=null}catch{}}}e.isActive=function(){return!!this.g};function un(o){return o.g?o.g.readyState:0}e.ca=function(){try{return un(this)>2?this.g.status:-1}catch{return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.La=function(o){if(this.g){var c=this.g.responseText;return o&&c.indexOf(o)==0&&(c=c.substring(o.length)),Zt(c)}};function mc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.F){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function qp(o){const c={};o=(o.g&&un(o)>=2&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let p=0;p<o.length;p++){if(y(o[p]))continue;var h=Rp(o[p]);const R=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const C=c[R]||[];c[R]=C,C.push(h)}nr(c,function(p){return p.join(", ")})}e.ya=function(){return this.o},e.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ns(o,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||c}function gc(o){this.za=0,this.i=[],this.j=new Kr,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ns("failFast",!1,o),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ns("baseRetryDelayMs",5e3,o),this.Za=ns("retryDelaySeedMs",1e4,o),this.Ta=ns("forwardChannelMaxRetries",2,o),this.va=ns("forwardChannelRequestTimeoutMs",2e4,o),this.ma=o&&o.xmlHttpFactory||void 0,this.Ua=o&&o.Rb||void 0,this.Aa=o&&o.useFetchStreams||!1,this.O=void 0,this.L=o&&o.supportsCrossDomainXhr||!1,this.M="",this.h=new Jl(o&&o.concurrentRequestLimit),this.Ba=new Bp,this.S=o&&o.fastHandshake||!1,this.R=o&&o.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=o&&o.Pb||!1,o&&o.ua&&this.j.ua(),o&&o.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&o&&o.detectBufferingProxy||!1,this.ia=void 0,o&&o.longPollingTimeout&&o.longPollingTimeout>0&&(this.ia=o.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}e=gc.prototype,e.ka=8,e.I=1,e.connect=function(o,c,h,p){le(0),this.W=o,this.H=c||{},h&&p!==void 0&&(this.H.OSID=h,this.H.OAID=p),this.F=this.X,this.J=bc(this,null,this.W),ni(this)};function Fo(o){if(_c(o),o.I==3){var c=o.V++,h=De(o.J);if(St(h,"SID",o.M),St(h,"RID",c),St(h,"TYPE","terminate"),rs(o,h),c=new an(o,o.j,c),c.M=2,c.A=Js(De(h)),h=!1,a.navigator&&a.navigator.sendBeacon)try{h=a.navigator.sendBeacon(c.A.toString(),"")}catch{}!h&&a.Image&&(new Image().src=c.A,h=!0),h||(c.g=Sc(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Ys(c)}Ac(o)}function ei(o){o.g&&(Bo(o),o.g.cancel(),o.g=null)}function _c(o){ei(o),o.v&&(a.clearTimeout(o.v),o.v=null),ri(o),o.h.cancel(),o.m&&(typeof o.m=="number"&&a.clearTimeout(o.m),o.m=null)}function ni(o){if(!Zl(o.h)&&!o.m){o.m=!0;var c=o.Ea;rt||g(),Et||(rt(),Et=!0),w.add(c,o),o.D=0}}function Hp(o,c){return tc(o.h)>=o.h.j-(o.m?1:0)?!1:o.m?(o.i=c.G.concat(o.i),!0):o.I==1||o.I==2||o.D>=(o.Sa?0:o.Ta)?!1:(o.m=zr(f(o.Ea,o,c),wc(o,o.D)),o.D++,!0)}e.Ea=function(o){if(this.m)if(this.m=null,this.I==1){if(!o){this.V=Math.floor(Math.random()*1e5),o=this.V++;const R=new an(this,this.j,o);let C=this.o;if(this.U&&(C?(C=Ve(C),Br(C,this.U)):C=this.U),this.u!==null||this.R||(R.J=C,C=null),this.S)t:{for(var c=0,h=0;h<this.i.length;h++){e:{var p=this.i[h];if("__data__"in p.map&&(p=p.map.__data__,typeof p=="string")){p=p.length;break e}p=void 0}if(p===void 0)break;if(c+=p,c>4096){c=h;break t}if(c===4096||h===this.i.length-1){c=h+1;break t}}c=1e3}else c=1e3;c=Ec(this,R,c),h=De(this.J),St(h,"RID",o),St(h,"CVER",22),this.G&&St(h,"X-HTTP-Session-Id",this.G),rs(this,h),C&&(this.R?c="headers="+Wr(hc(C))+"&"+c:this.u&&Lo(h,this.u,C)),Oo(this.h,R),this.Ra&&St(h,"TYPE","init"),this.S?(St(h,"$req",c),St(h,"SID","null"),R.U=!0,Vo(R,h,null)):Vo(R,h,c),this.I=2}}else this.I==3&&(o?yc(this,o):this.i.length==0||Zl(this.h)||yc(this))};function yc(o,c){var h;c?h=c.l:h=o.V++;const p=De(o.J);St(p,"SID",o.M),St(p,"RID",h),St(p,"AID",o.K),rs(o,p),o.u&&o.o&&Lo(p,o.u,o.o),h=new an(o,o.j,h,o.D+1),o.u===null&&(h.J=o.o),c&&(o.i=c.G.concat(o.i)),c=Ec(o,h,1e3),h.H=Math.round(o.va*.5)+Math.round(o.va*.5*Math.random()),Oo(o.h,h),Vo(h,p,c)}function rs(o,c){o.H&&Te(o.H,function(h,p){St(c,p,h)}),o.l&&Te({},function(h,p){St(c,p,h)})}function Ec(o,c,h){h=Math.min(o.i.length,h);const p=o.l?f(o.l.Ka,o.l,o):null;t:{var R=o.i;let ot=-1;for(;;){const Bt=["count="+h];ot==-1?h>0?(ot=R[0].g,Bt.push("ofs="+ot)):ot=0:Bt.push("ofs="+ot);let vt=!0;for(let zt=0;zt<h;zt++){var C=R[zt].g;const xe=R[zt].map;if(C-=ot,C<0)ot=Math.max(0,R[zt].g-100),vt=!1;else try{C="req"+C+"_"||"";try{var j=xe instanceof Map?xe:Object.entries(xe);for(const[Fn,hn]of j){let fn=hn;l(hn)&&(fn=dt(hn)),Bt.push(C+Fn+"="+encodeURIComponent(fn))}}catch(Fn){throw Bt.push(C+"type="+encodeURIComponent("_badmap")),Fn}}catch{p&&p(xe)}}if(vt){j=Bt.join("&");break t}}j=void 0}return o=o.i.splice(0,h),c.G=o,j}function Tc(o){if(!o.g&&!o.v){o.Y=1;var c=o.Da;rt||g(),Et||(rt(),Et=!0),w.add(c,o),o.A=0}}function Uo(o){return o.g||o.v||o.A>=3?!1:(o.Y++,o.v=zr(f(o.Da,o),wc(o,o.A)),o.A++,!0)}e.Da=function(){if(this.v=null,vc(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var o=4*this.T;this.j.info("BP detection timer enabled: "+o),this.B=zr(f(this.Wa,this),o)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,le(10),ei(this),vc(this))};function Bo(o){o.B!=null&&(a.clearTimeout(o.B),o.B=null)}function vc(o){o.g=new an(o,o.j,"rpc",o.Y),o.u===null&&(o.g.J=o.o),o.g.P=0;var c=De(o.na);St(c,"RID","rpc"),St(c,"SID",o.M),St(c,"AID",o.K),St(c,"CI",o.F?"0":"1"),!o.F&&o.ia&&St(c,"TO",o.ia),St(c,"TYPE","xmlhttp"),rs(o,c),o.u&&o.o&&Lo(c,o.u,o.o),o.O&&(o.g.H=o.O);var h=o.g;o=o.ba,h.M=1,h.A=Js(De(c)),h.u=null,h.R=!0,Ql(h,o)}e.Va=function(){this.C!=null&&(this.C=null,ei(this),Uo(this),le(19))};function ri(o){o.C!=null&&(a.clearTimeout(o.C),o.C=null)}function Ic(o,c){var h=null;if(o.g==c){ri(o),Bo(o),o.g=null;var p=2}else if(No(o.h,c))h=c.G,ec(o.h,c),p=1;else return;if(o.I!=0){if(c.o)if(p==1){h=c.u?c.u.length:0,c=Date.now()-c.F;var R=o.D;p=On(),k(p,new Hl(p,h)),ni(o)}else Tc(o);else if(R=c.m,R==3||R==0&&c.X>0||!(p==1&&Hp(o,c)||p==2&&Uo(o)))switch(h&&h.length>0&&(c=o.h,c.i=c.i.concat(h)),R){case 1:Ln(o,5);break;case 4:Ln(o,10);break;case 3:Ln(o,6);break;default:Ln(o,2)}}}function wc(o,c){let h=o.Qa+Math.floor(Math.random()*o.Za);return o.isActive()||(h*=2),h*c}function Ln(o,c){if(o.j.info("Error code "+c),c==2){var h=f(o.bb,o),p=o.Ua;const R=!p;p=new ln(p||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Qr(p,"https"),Js(p),R?Fp(p.toString(),h):Up(p.toString(),h)}else le(2);o.I=0,o.l&&o.l.pa(c),Ac(o),_c(o)}e.bb=function(o){o?(this.j.info("Successfully pinged google.com"),le(2)):(this.j.info("Failed to ping google.com"),le(1))};function Ac(o){if(o.I=0,o.ja=[],o.l){const c=nc(o.h);(c.length!=0||o.i.length!=0)&&(D(o.ja,c),D(o.ja,o.i),o.h.i.length=0,A(o.i),o.i.length=0),o.l.oa()}}function bc(o,c,h){var p=h instanceof ln?De(h):new ln(h);if(p.g!="")c&&(p.g=c+"."+p.g),Xr(p,p.u);else{var R=a.location;p=R.protocol,c=c?c+"."+R.hostname:R.hostname,R=+R.port;const C=new ln(null);p&&Qr(C,p),c&&(C.g=c),R&&Xr(C,R),h&&(C.h=h),p=C}return h=o.G,c=o.wa,h&&c&&St(p,h,c),St(p,"VER",o.ka),rs(o,p),p}function Sc(o,c,h){if(c&&!o.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=o.Aa&&!o.ma?new Dt(new ko({ab:h})):new Dt(o.ma),c.Fa(o.L),c}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rc(){}e=Rc.prototype,e.ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){};function si(){}si.prototype.g=function(o,c){return new ge(o,c)};function ge(o,c){L.call(this),this.g=new gc(c),this.l=o,this.h=c&&c.messageUrlParams||null,o=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(o?o["X-WebChannel-Content-Type"]=c.messageContentType:o={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(o?o["X-WebChannel-Client-Profile"]=c.sa:o={"X-WebChannel-Client-Profile":c.sa}),this.g.U=o,(o=c&&c.Qb)&&!y(o)&&(this.g.u=o),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!y(c)&&(this.g.G=c,o=this.h,o!==null&&c in o&&(o=this.h,c in o&&delete o[c])),this.j=new ar(this)}m(ge,L),ge.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},ge.prototype.close=function(){Fo(this.g)},ge.prototype.o=function(o){var c=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.v&&(h={},h.__data__=dt(o),o=h);c.i.push(new Vp(c.Ya++,o)),c.I==3&&ni(c)},ge.prototype.N=function(){this.g.l=null,delete this.j,Fo(this.g),delete this.g,ge.Z.N.call(this)};function Cc(o){sr.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var c=o.__sm__;if(c){t:{for(const h in c){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,c=c!==null&&o in c?c[o]:void 0),this.data=c}else this.data=o}m(Cc,sr);function Pc(){Wt.call(this),this.status=1}m(Pc,Wt);function ar(o){this.g=o}m(ar,Rc),ar.prototype.ra=function(){k(this.g,"a")},ar.prototype.qa=function(o){k(this.g,new Cc(o))},ar.prototype.pa=function(o){k(this.g,new Pc)},ar.prototype.oa=function(){k(this.g,"b")},si.prototype.createWebChannel=si.prototype.g,ge.prototype.send=ge.prototype.o,ge.prototype.open=ge.prototype.m,ge.prototype.close=ge.prototype.close,Yf=function(){return new si},Xf=function(){return On()},Qf=Ht,Sa={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xs.NO_ERROR=0,Xs.TIMEOUT=8,Xs.HTTP_ERROR=6,Ti=Xs,zl.COMPLETE="complete",Gf=zl,me.EventType=be,be.OPEN="a",be.CLOSE="b",be.ERROR="c",be.MESSAGE="d",L.prototype.listen=L.prototype.J,hs=me,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,Wf=Dt}).apply(typeof ui<"u"?ui:typeof self<"u"?self:typeof window<"u"?window:{});const wu="@firebase/firestore",Au="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}re.UNAUTHENTICATED=new re(null),re.GOOGLE_CREDENTIALS=new re("google-credentials-uid"),re.FIRST_PARTY=new re("first-party-uid"),re.MOCK_USER=new re("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kr="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new Bf("@firebase/firestore");function pr(){return Gn.logLevel}function H(e,...t){if(Gn.logLevel<=ft.DEBUG){const n=t.map(dl);Gn.debug(`Firestore (${kr}): ${e}`,...n)}}function nn(e,...t){if(Gn.logLevel<=ft.ERROR){const n=t.map(dl);Gn.error(`Firestore (${kr}): ${e}`,...n)}}function Cr(e,...t){if(Gn.logLevel<=ft.WARN){const n=t.map(dl);Gn.warn(`Firestore (${kr}): ${e}`,...n)}}function dl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,Jf(e,r,n)}function Jf(e,t,n){let r=`FIRESTORE (${kr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw nn(r),new Error(r)}function yt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||Jf(t,s,r)}function st(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends Mr{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class EE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(re.UNAUTHENTICATED)))}shutdown(){}}class TE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class vE{constructor(t){this.t=t,this.currentUser=re.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){yt(this.o===void 0,42304);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new In;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new In,t.enqueueRetryable((()=>s(this.currentUser)))};const a=()=>{const u=i;t.enqueueRetryable((async()=>{await u.promise,await s(this.currentUser)}))},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit((u=>l(u))),setTimeout((()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new In)}}),0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(yt(typeof r.accessToken=="string",31837,{l:r}),new Zf(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return yt(t===null||typeof t=="string",2055,{h:t}),new re(t)}}class IE{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=re.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class wE{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new IE(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(re.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class bu{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class AE{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,sE(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){yt(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable((()=>r(i)))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((i=>s(i))),setTimeout((()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new bu(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(yt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new bu(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=bE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ct(e,t){return e<t?-1:e>t?1:0}function Ra(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const s=e.charAt(r),i=t.charAt(r);if(s!==i)return ra(s)===ra(i)?ct(s,i):ra(s)?1:-1}return ct(e.length,t.length)}const SE=55296,RE=57343;function ra(e){const t=e.charCodeAt(0);return t>=SE&&t<=RE}function Pr(e,t,n){return e.length===t.length&&e.every(((r,s)=>n(r,t[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Su="__name__";class Me{constructor(t,n,r){n===void 0?n=0:n>t.length&&tt(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&tt(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Me.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Me?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Me.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ct(t.length,n.length)}static compareSegments(t,n){const r=Me.isNumericId(t),s=Me.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Me.extractNumericId(t).compare(Me.extractNumericId(n)):Ra(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return vn.fromString(t.substring(4,t.length-2))}}class Rt extends Me{construct(t,n,r){return new Rt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new G(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((s=>s.length>0)))}return new Rt(n)}static emptyPath(){return new Rt([])}}const CE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xt extends Me{construct(t,n,r){return new Xt(t,n,r)}static isValidIdentifier(t){return CE.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xt.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Su}static keyField(){return new Xt([Su])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(N.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new G(N.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new G(N.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Xt(n)}static emptyPath(){return new Xt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(t){this.path=t}static fromPath(t){return new Y(Rt.fromString(t))}static fromName(t){return new Y(Rt.fromString(t).popFirst(5))}static empty(){return new Y(Rt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Rt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Rt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Y(new Rt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function td(e,t,n){if(!n)throw new G(N.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function PE(e,t,n,r){if(t===!0&&r===!0)throw new G(N.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Ru(e){if(!Y.isDocumentKey(e))throw new G(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Cu(e){if(Y.isDocumentKey(e))throw new G(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function ed(e){return typeof e=="object"&&e!==null&&(Object.getPrototypeOf(e)===Object.prototype||Object.getPrototypeOf(e)===null)}function ml(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":tt(12329,{type:typeof e})}function Bi(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new G(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ml(e);throw new G(N.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ft(e,t){const n={typeString:e};return t&&(n.value=t),n}function zs(e,t){if(!ed(e))throw new G(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n=`JSON missing required field: '${r}'`;break}const a=e[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new G(N.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=-62135596800,Vu=1e6;class Ct{static now(){return Ct.fromMillis(Date.now())}static fromDate(t){return Ct.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Vu);return new Ct(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new G(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<Pu)throw new G(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new G(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vu}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ct._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(zs(t,Ct._jsonSchema))return new Ct(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-Pu;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ct._jsonSchemaVersion="firestore/timestamp/1.0",Ct._jsonSchema={type:Ft("string",Ct._jsonSchemaVersion),seconds:Ft("number"),nanoseconds:Ft("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{static fromTimestamp(t){return new nt(t)}static min(){return new nt(new Ct(0,0))}static max(){return new nt(new Ct(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ms=-1;function VE(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=nt.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new Sn(s,Y.empty(),t)}function DE(e){return new Sn(e.readTime,e.key,Ms)}class Sn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new Sn(nt.min(),Y.empty(),Ms)}static max(){return new Sn(nt.max(),Y.empty(),Ms)}}function xE(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Y.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class OE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lr(e){if(e.code!==N.FAILED_PRECONDITION||e.message!==NE)throw e;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new V(((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):V.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):V.reject(n)}static resolve(t){return new V(((n,r)=>{n(t)}))}static reject(t){return new V(((n,r)=>{r(t)}))}static waitFor(t){return new V(((n,r)=>{let s=0,i=0,a=!1;t.forEach((l=>{++s,l.next((()=>{++i,a&&i===s&&n()}),(u=>r(u)))})),a=!0,i===s&&n()}))}static or(t){let n=V.resolve(!1);for(const r of t)n=n.next((s=>s?V.resolve(s):r()));return n}static forEach(t,n){const r=[];return t.forEach(((s,i)=>{r.push(n.call(this,s,i))})),this.waitFor(r)}static mapArray(t,n){return new V(((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const f=u;n(t[f]).next((d=>{a[f]=d,++l,l===i&&r(a)}),(d=>s(d)))}}))}static doWhile(t,n){return new V(((r,s)=>{const i=()=>{t()===!0?n().next((()=>{i()}),s):r()};i()}))}}function ME(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Fr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}fo.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl=-1;function po(e){return e==null}function ji(e){return e===0&&1/e==-1/0}function kE(e){return typeof e=="number"&&Number.isInteger(e)&&!ji(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nd="";function LE(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Du(t)),t=FE(e.get(n),t);return Du(t)}function FE(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case nd:n+="";break;default:n+=i}}return n}function Du(e){return e+nd+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Jn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function rd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(t,n){this.comparator=t,this.root=n||Gt.EMPTY}insert(t,n){return new Vt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Gt.BLACK,null,null))}remove(t){return new Vt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new hi(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new hi(this.root,t,this.comparator,!1)}getReverseIterator(){return new hi(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new hi(this.root,t,this.comparator,!0)}}class hi{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Gt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Gt.RED,this.left=s??Gt.EMPTY,this.right=i??Gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Gt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Gt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw tt(27949);return t+(this.isRed()?0:1)}}Gt.EMPTY=null,Gt.RED=!0,Gt.BLACK=!1;Gt.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Gt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(t){this.comparator=t,this.data=new Vt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Nu(this.data.getIterator())}getIteratorFrom(t){return new Nu(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof qt)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new qt(this.comparator);return n.data=t,n}}class Nu{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(t){this.fields=t,t.sort(Xt.comparator)}static empty(){return new Re([])}unionWith(t){let n=new qt(Xt.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Re(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Pr(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sd("Invalid base64 string: "+i):i}})(t);return new Jt(n)}static fromUint8Array(t){const n=(function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i})(t);return new Jt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Jt.EMPTY_BYTE_STRING=new Jt("");const UE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Rn(e){if(yt(!!e,39018),typeof e=="string"){let t=0;const n=UE.exec(e);if(yt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ot(e.seconds),nanos:Ot(e.nanos)}}function Ot(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function Cn(e){return typeof e=="string"?Jt.fromBase64String(e):Jt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const id="server_timestamp",od="__type__",ad="__previous_value__",ld="__local_write_time__";function _l(e){var n,r;return((r=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[od])==null?void 0:r.stringValue)===id}function mo(e){const t=e.mapValue.fields[ad];return _l(t)?mo(t):t}function ks(e){const t=Rn(e.mapValue.fields[ld].timestampValue);return new Ct(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE{constructor(t,n,r,s,i,a,l,u,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=f,this.isUsingEmulator=d}}const $i="(default)";class Ls{constructor(t,n){this.projectId=t,this.database=n||$i}static empty(){return new Ls("","")}get isDefaultDatabase(){return this.database===$i}isEqual(t){return t instanceof Ls&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cd="__type__",jE="__max__",fi={mapValue:{}},ud="__vector__",qi="value";function Pn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_l(e)?4:qE(e)?9007199254740991:$E(e)?10:11:tt(28295,{value:e})}function qe(e,t){if(e===t)return!0;const n=Pn(e);if(n!==Pn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ks(e).isEqual(ks(t));case 3:return(function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=Rn(s.timestampValue),l=Rn(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos})(e,t);case 5:return e.stringValue===t.stringValue;case 6:return(function(s,i){return Cn(s.bytesValue).isEqual(Cn(i.bytesValue))})(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return(function(s,i){return Ot(s.geoPointValue.latitude)===Ot(i.geoPointValue.latitude)&&Ot(s.geoPointValue.longitude)===Ot(i.geoPointValue.longitude)})(e,t);case 2:return(function(s,i){if("integerValue"in s&&"integerValue"in i)return Ot(s.integerValue)===Ot(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Ot(s.doubleValue),l=Ot(i.doubleValue);return a===l?ji(a)===ji(l):isNaN(a)&&isNaN(l)}return!1})(e,t);case 9:return Pr(e.arrayValue.values||[],t.arrayValue.values||[],qe);case 10:case 11:return(function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(xu(a)!==xu(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!qe(a[u],l[u])))return!1;return!0})(e,t);default:return tt(52216,{left:e})}}function Fs(e,t){return(e.values||[]).find((n=>qe(n,t)))!==void 0}function Vr(e,t){if(e===t)return 0;const n=Pn(e),r=Pn(t);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return(function(i,a){const l=Ot(i.integerValue||i.doubleValue),u=Ot(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1})(e,t);case 3:return Ou(e.timestampValue,t.timestampValue);case 4:return Ou(ks(e),ks(t));case 5:return Ra(e.stringValue,t.stringValue);case 6:return(function(i,a){const l=Cn(i),u=Cn(a);return l.compareTo(u)})(e.bytesValue,t.bytesValue);case 7:return(function(i,a){const l=i.split("/"),u=a.split("/");for(let f=0;f<l.length&&f<u.length;f++){const d=ct(l[f],u[f]);if(d!==0)return d}return ct(l.length,u.length)})(e.referenceValue,t.referenceValue);case 8:return(function(i,a){const l=ct(Ot(i.latitude),Ot(a.latitude));return l!==0?l:ct(Ot(i.longitude),Ot(a.longitude))})(e.geoPointValue,t.geoPointValue);case 9:return Mu(e.arrayValue,t.arrayValue);case 10:return(function(i,a){var E,A,D,U;const l=i.fields||{},u=a.fields||{},f=(E=l[qi])==null?void 0:E.arrayValue,d=(A=u[qi])==null?void 0:A.arrayValue,m=ct(((D=f==null?void 0:f.values)==null?void 0:D.length)||0,((U=d==null?void 0:d.values)==null?void 0:U.length)||0);return m!==0?m:Mu(f,d)})(e.mapValue,t.mapValue);case 11:return(function(i,a){if(i===fi.mapValue&&a===fi.mapValue)return 0;if(i===fi.mapValue)return 1;if(a===fi.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),f=a.fields||{},d=Object.keys(f);u.sort(),d.sort();for(let m=0;m<u.length&&m<d.length;++m){const E=Ra(u[m],d[m]);if(E!==0)return E;const A=Vr(l[u[m]],f[d[m]]);if(A!==0)return A}return ct(u.length,d.length)})(e.mapValue,t.mapValue);default:throw tt(23264,{he:n})}}function Ou(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=Rn(e),r=Rn(t),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Mu(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Vr(n[s],r[s]);if(i)return i}return ct(n.length,r.length)}function Dr(e){return Ca(e)}function Ca(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(function(n){const r=Rn(n);return`time(${r.seconds},${r.nanos})`})(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?(function(n){return Cn(n).toBase64()})(e.bytesValue):"referenceValue"in e?(function(n){return Y.fromName(n).toString()})(e.referenceValue):"geoPointValue"in e?(function(n){return`geo(${n.latitude},${n.longitude})`})(e.geoPointValue):"arrayValue"in e?(function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ca(i);return r+"]"})(e.arrayValue):"mapValue"in e?(function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${Ca(n.fields[a])}`;return s+"}"})(e.mapValue):tt(61005,{value:e})}function vi(e){switch(Pn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=mo(e);return t?16+vi(t):16;case 5:return 2*e.stringValue.length;case 6:return Cn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((s,i)=>s+vi(i)),0)})(e.arrayValue);case 10:case 11:return(function(r){let s=0;return Jn(r.fields,((i,a)=>{s+=i.length+vi(a)})),s})(e.mapValue);default:throw tt(13486,{value:e})}}function Pa(e){return!!e&&"integerValue"in e}function yl(e){return!!e&&"arrayValue"in e}function ku(e){return!!e&&"nullValue"in e}function Lu(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ii(e){return!!e&&"mapValue"in e}function $E(e){var n,r;return((r=(((n=e==null?void 0:e.mapValue)==null?void 0:n.fields)||{})[cd])==null?void 0:r.stringValue)===ud}function ws(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:{...e.timestampValue}};if(e.mapValue){const t={mapValue:{fields:{}}};return Jn(e.mapValue.fields,((n,r)=>t.mapValue.fields[n]=ws(r))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ws(e.arrayValue.values[n]);return t}return{...e}}function qE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===jE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(t){this.value=t}static empty(){return new ve({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ii(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ws(n)}setAll(t){let n=Xt.emptyPath(),r={},s=[];t.forEach(((a,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ws(a):s.push(l.lastSegment())}));const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());Ii(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return qe(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];Ii(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Jn(n,((s,i)=>t[s]=i));for(const s of r)delete t[s]}clone(){return new ve(ws(this.value))}}function hd(e){const t=[];return Jn(e.fields,((n,r)=>{const s=new Xt([n]);if(Ii(r)){const i=hd(r.mapValue).fields;if(i.length===0)t.push(s);else for(const a of i)t.push(s.child(a))}else t.push(s)})),new Re(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new ie(t,0,nt.min(),nt.min(),nt.min(),ve.empty(),0)}static newFoundDocument(t,n,r,s){return new ie(t,1,n,nt.min(),r,s,0)}static newNoDocument(t,n){return new ie(t,2,n,nt.min(),nt.min(),ve.empty(),0)}static newUnknownDocument(t,n){return new ie(t,3,n,nt.min(),nt.min(),ve.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ve.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ve.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=nt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ie&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ie(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(t,n){this.position=t,this.inclusive=n}}function Fu(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(a.referenceValue),n.key):r=Vr(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Uu(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!qe(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(t,n="asc"){this.field=t,this.dir=n}}function HE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{}class $t extends fd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new KE(t,n,r):n==="array-contains"?new QE(t,r):n==="in"?new XE(t,r):n==="not-in"?new YE(t,r):n==="array-contains-any"?new JE(t,r):new $t(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new WE(t,r):new GE(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Vr(n,this.value)):n!==null&&Pn(this.value)===Pn(n)&&this.matchesComparison(Vr(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class He extends fd{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new He(t,n)}matches(t){return dd(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function dd(e){return e.op==="and"}function pd(e){return zE(e)&&dd(e)}function zE(e){for(const t of e.filters)if(t instanceof He)return!1;return!0}function Va(e){if(e instanceof $t)return e.field.canonicalString()+e.op.toString()+Dr(e.value);if(pd(e))return e.filters.map((t=>Va(t))).join(",");{const t=e.filters.map((n=>Va(n))).join(",");return`${e.op}(${t})`}}function md(e,t){return e instanceof $t?(function(r,s){return s instanceof $t&&r.op===s.op&&r.field.isEqual(s.field)&&qe(r.value,s.value)})(e,t):e instanceof He?(function(r,s){return s instanceof He&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce(((i,a,l)=>i&&md(a,s.filters[l])),!0):!1})(e,t):void tt(19439)}function gd(e){return e instanceof $t?(function(n){return`${n.field.canonicalString()} ${n.op} ${Dr(n.value)}`})(e):e instanceof He?(function(n){return n.op.toString()+" {"+n.getFilters().map(gd).join(" ,")+"}"})(e):"Filter"}class KE extends $t{constructor(t,n,r){super(t,n,r),this.key=Y.fromName(r.referenceValue)}matches(t){const n=Y.comparator(t.key,this.key);return this.matchesComparison(n)}}class WE extends $t{constructor(t,n){super(t,"in",n),this.keys=_d("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class GE extends $t{constructor(t,n){super(t,"not-in",n),this.keys=_d("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function _d(e,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((r=>Y.fromName(r.referenceValue)))}class QE extends $t{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return yl(n)&&Fs(n.arrayValue,this.value)}}class XE extends $t{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Fs(this.value.arrayValue,n)}}class YE extends $t{constructor(t,n){super(t,"not-in",n)}matches(t){if(Fs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Fs(this.value.arrayValue,n)}}class JE extends $t{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!yl(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Fs(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Bu(e,t=null,n=[],r=[],s=null,i=null,a=null){return new ZE(e,t,n,r,s,i,a)}function El(e){const t=st(e);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>Va(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(i){return i.field.canonicalString()+i.dir})(r))).join(","),po(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Dr(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Dr(r))).join(",")),t.Te=n}return t.Te}function Tl(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!HE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!md(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Uu(e.startAt,t.startAt)&&Uu(e.endAt,t.endAt)}function Da(e){return Y.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tT(e,t,n,r,s,i,a,l){return new go(e,t,n,r,s,i,a,l)}function yd(e){return new go(e)}function ju(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function eT(e){return e.collectionGroup!==null}function As(e){const t=st(e);if(t.Ie===null){t.Ie=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ie.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new qt(Xt.comparator);return a.filters.forEach((u=>{u.getFlattenedFilters().forEach((f=>{f.isInequality()&&(l=l.add(f.field))}))})),l})(t).forEach((i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ie.push(new zi(i,r))})),n.has(Xt.keyField().canonicalString())||t.Ie.push(new zi(Xt.keyField(),r))}return t.Ie}function Fe(e){const t=st(e);return t.Ee||(t.Ee=nT(t,As(e))),t.Ee}function nT(e,t){if(e.limitType==="F")return Bu(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((s=>{const i=s.dir==="desc"?"asc":"desc";return new zi(s.field,i)}));const n=e.endAt?new Hi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Hi(e.startAt.position,e.startAt.inclusive):null;return Bu(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function xa(e,t,n){return new go(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function _o(e,t){return Tl(Fe(e),Fe(t))&&e.limitType===t.limitType}function Ed(e){return`${El(Fe(e))}|lt:${e.limitType}`}function mr(e){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((s=>gd(s))).join(", ")}]`),po(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((s=>(function(a){return`${a.field.canonicalString()} (${a.dir})`})(s))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((s=>Dr(s))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((s=>Dr(s))).join(",")),`Target(${r})`})(Fe(e))}; limitType=${e.limitType})`}function yo(e,t){return t.isFoundDocument()&&(function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)})(e,t)&&(function(r,s){for(const i of As(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0})(e,t)&&(function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0})(e,t)&&(function(r,s){return!(r.startAt&&!(function(a,l,u){const f=Fu(a,l,u);return a.inclusive?f<=0:f<0})(r.startAt,As(r),s)||r.endAt&&!(function(a,l,u){const f=Fu(a,l,u);return a.inclusive?f>=0:f>0})(r.endAt,As(r),s))})(e,t)}function rT(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Td(e){return(t,n)=>{let r=!1;for(const s of As(e)){const i=sT(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function sT(e,t,n){const r=e.field.isKeyField()?Y.comparator(t.key,n.key):(function(i,a,l){const u=a.data.field(i),f=l.data.field(i);return u!==null&&f!==null?Vr(u,f):tt(42886)})(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Jn(this.inner,((n,r)=>{for(const[s,i]of r)t(s,i)}))}isEmpty(){return rd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iT=new Vt(Y.comparator);function rn(){return iT}const vd=new Vt(Y.comparator);function fs(...e){let t=vd;for(const n of e)t=t.insert(n.key,n);return t}function Id(e){let t=vd;return e.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Hn(){return bs()}function wd(){return bs()}function bs(){return new Zn((e=>e.toString()),((e,t)=>e.isEqual(t)))}const oT=new Vt(Y.comparator),aT=new qt(Y.comparator);function ut(...e){let t=aT;for(const n of e)t=t.add(n);return t}const lT=new qt(ct);function cT(){return lT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ji(t)?"-0":t}}function Ad(e){return{integerValue:""+e}}function uT(e,t){return kE(t)?Ad(t):vl(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(){this._=void 0}}function hT(e,t,n){return e instanceof Ki?(function(s,i){const a={fields:{[od]:{stringValue:id},[ld]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&_l(i)&&(i=mo(i)),i&&(a.fields[ad]=i),{mapValue:a}})(n,t):e instanceof Us?Sd(e,t):e instanceof Bs?Rd(e,t):(function(s,i){const a=bd(s,i),l=$u(a)+$u(s.Ae);return Pa(a)&&Pa(s.Ae)?Ad(l):vl(s.serializer,l)})(e,t)}function fT(e,t,n){return e instanceof Us?Sd(e,t):e instanceof Bs?Rd(e,t):n}function bd(e,t){return e instanceof Wi?(function(r){return Pa(r)||(function(i){return!!i&&"doubleValue"in i})(r)})(t)?t:{integerValue:0}:null}class Ki extends Eo{}class Us extends Eo{constructor(t){super(),this.elements=t}}function Sd(e,t){const n=Cd(t);for(const r of e.elements)n.some((s=>qe(s,r)))||n.push(r);return{arrayValue:{values:n}}}class Bs extends Eo{constructor(t){super(),this.elements=t}}function Rd(e,t){let n=Cd(t);for(const r of e.elements)n=n.filter((s=>!qe(s,r)));return{arrayValue:{values:n}}}class Wi extends Eo{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function $u(e){return Ot(e.integerValue||e.doubleValue)}function Cd(e){return yl(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function dT(e,t){return e.field.isEqual(t.field)&&(function(r,s){return r instanceof Us&&s instanceof Us||r instanceof Bs&&s instanceof Bs?Pr(r.elements,s.elements,qe):r instanceof Wi&&s instanceof Wi?qe(r.Ae,s.Ae):r instanceof Ki&&s instanceof Ki})(e.transform,t.transform)}class pT{constructor(t,n){this.version=t,this.transformResults=n}}class Ye{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ye}static exists(t){return new Ye(void 0,t)}static updateTime(t){return new Ye(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function wi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class To{}function Pd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new Dd(e.key,Ye.none()):new Ks(e.key,e.data,Ye.none());{const n=e.data,r=ve.empty();let s=new qt(Xt.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new tr(e.key,r,new Re(s.toArray()),Ye.none())}}function mT(e,t,n){e instanceof Ks?(function(s,i,a){const l=s.value.clone(),u=Hu(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()})(e,t,n):e instanceof tr?(function(s,i,a){if(!wi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Hu(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Vd(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()})(e,t,n):(function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()})(0,t,n)}function Ss(e,t,n,r){return e instanceof Ks?(function(i,a,l,u){if(!wi(i.precondition,a))return l;const f=i.value.clone(),d=zu(i.fieldTransforms,u,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null})(e,t,n,r):e instanceof tr?(function(i,a,l,u){if(!wi(i.precondition,a))return l;const f=zu(i.fieldTransforms,u,a),d=a.data;return d.setAll(Vd(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map((m=>m.field)))})(e,t,n,r):(function(i,a,l){return wi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l})(e,t,n)}function gT(e,t){let n=null;for(const r of e.fieldTransforms){const s=t.data.field(r.field),i=bd(r.transform,s||null);i!=null&&(n===null&&(n=ve.empty()),n.set(r.field,i))}return n||null}function qu(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!(function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Pr(r,s,((i,a)=>dT(i,a)))})(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Ks extends To{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class tr extends To{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Vd(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function Hu(e,t,n){const r=new Map;yt(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,fT(a,l,n[s]))}return r}function zu(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,hT(i,a,t))}return r}class Dd extends To{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class _T extends To{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&mT(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=Ss(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=Ss(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=wd();return this.mutations.forEach((s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const u=Pd(a,l);u!==null&&r.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(nt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),ut())}isEqual(t){return this.batchId===t.batchId&&Pr(this.mutations,t.mutations,((n,r)=>qu(n,r)))&&Pr(this.baseMutations,t.baseMutations,((n,r)=>qu(n,r)))}}class Il{constructor(t,n,r,s){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(t,n,r){yt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let s=(function(){return oT})();const i=t.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,r[a].version);return new Il(t,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var kt,ht;function vT(e){switch(e){case N.OK:return tt(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return tt(15467,{code:e})}}function xd(e){if(e===void 0)return nn("GRPC error has no .code"),N.UNKNOWN;switch(e){case kt.OK:return N.OK;case kt.CANCELLED:return N.CANCELLED;case kt.UNKNOWN:return N.UNKNOWN;case kt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case kt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case kt.INTERNAL:return N.INTERNAL;case kt.UNAVAILABLE:return N.UNAVAILABLE;case kt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case kt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case kt.NOT_FOUND:return N.NOT_FOUND;case kt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case kt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case kt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case kt.ABORTED:return N.ABORTED;case kt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case kt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case kt.DATA_LOSS:return N.DATA_LOSS;default:return tt(39323,{code:e})}}(ht=kt||(kt={}))[ht.OK=0]="OK",ht[ht.CANCELLED=1]="CANCELLED",ht[ht.UNKNOWN=2]="UNKNOWN",ht[ht.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ht[ht.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ht[ht.NOT_FOUND=5]="NOT_FOUND",ht[ht.ALREADY_EXISTS=6]="ALREADY_EXISTS",ht[ht.PERMISSION_DENIED=7]="PERMISSION_DENIED",ht[ht.UNAUTHENTICATED=16]="UNAUTHENTICATED",ht[ht.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ht[ht.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ht[ht.ABORTED=10]="ABORTED",ht[ht.OUT_OF_RANGE=11]="OUT_OF_RANGE",ht[ht.UNIMPLEMENTED=12]="UNIMPLEMENTED",ht[ht.INTERNAL=13]="INTERNAL",ht[ht.UNAVAILABLE=14]="UNAVAILABLE",ht[ht.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=new vn([4294967295,4294967295],0);function Ku(e){const t=IT().encode(e),n=new Kf;return n.update(t),new Uint8Array(n.digest())}function Wu(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new vn([n,r],0),new vn([s,i],0)]}class wl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ds(`Invalid padding: ${n}`);if(r<0)throw new ds(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new ds(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new ds(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=vn.fromNumber(this.ge)}ye(t,n,r){let s=t.add(n.multiply(vn.fromNumber(r)));return s.compare(wT)===1&&(s=new vn([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=Ku(t),[r,s]=Wu(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);if(!this.we(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new wl(i,s,n);return r.forEach((l=>a.insert(l))),a}insert(t){if(this.ge===0)return;const n=Ku(t),[r,s]=Wu(n);for(let i=0;i<this.hashCount;i++){const a=this.ye(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class ds extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Ws.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new vo(nt.min(),s,new Vt(ct),rn(),ut())}}class Ws{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Ws(r,n,ut(),ut(),ut())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(t,n,r,s){this.be=t,this.removedTargetIds=n,this.key=r,this.De=s}}class Nd{constructor(t,n){this.targetId=t,this.Ce=n}}class Od{constructor(t,n,r=Jt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Gu{constructor(){this.ve=0,this.Fe=Qu(),this.Me=Jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=ut(),n=ut(),r=ut();return this.Fe.forEach(((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:tt(38017,{changeType:i})}})),new Ws(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=Qu()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,yt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class AT{constructor(t){this.Ge=t,this.ze=new Map,this.je=rn(),this.Je=di(),this.He=di(),this.Ye=new Vt(ct)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:tt(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,s)=>{this.rt(s)&&n(s)}))}st(t){const n=t.targetId,r=t.Ce.count,s=this.ot(n);if(s){const i=s.target;if(Da(i))if(r===0){const a=new Y(i.path);this.et(n,a,ie.newNoDocument(a,nt.min()))}else yt(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(t),u=l?this.ct(l,t,a):1;if(u!==0){this.it(n);const f=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,f)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=Cn(r).toUint8Array()}catch(u){if(u instanceof sd)return Cr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new wl(a,s,i)}catch(u){return Cr(u instanceof ds?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach((i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.et(n,i,null),s++)})),s}Tt(t){const n=new Map;this.ze.forEach(((i,a)=>{const l=this.ot(a);if(l){if(i.current&&Da(l.target)){const u=new Y(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,ie.newNoDocument(u,t))}i.Be&&(n.set(a,i.ke()),i.qe())}}));let r=ut();this.He.forEach(((i,a)=>{let l=!0;a.forEachWhile((u=>{const f=this.ot(u);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)})),l&&(r=r.add(i))})),this.je.forEach(((i,a)=>a.setReadTime(t)));const s=new vo(t,n,this.Ye,this.je,r);return this.je=rn(),this.Je=di(),this.He=di(),this.Ye=new Vt(ct),s}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const s=this.nt(t);this.Et(t,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new Gu,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new qt(ct),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new qt(ct),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||H("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new Gu),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function di(){return new Vt(Y.comparator)}function Qu(){return new Vt(Y.comparator)}const bT={asc:"ASCENDING",desc:"DESCENDING"},ST={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},RT={and:"AND",or:"OR"};class CT{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function Na(e,t){return e.useProto3Json||po(t)?t:{value:t}}function Gi(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Md(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function PT(e,t){return Gi(e,t.toTimestamp())}function Ue(e){return yt(!!e,49232),nt.fromTimestamp((function(n){const r=Rn(n);return new Ct(r.seconds,r.nanos)})(e))}function Al(e,t){return Oa(e,t).canonicalString()}function Oa(e,t){const n=(function(s){return new Rt(["projects",s.projectId,"databases",s.database])})(e).child("documents");return t===void 0?n:n.child(t)}function kd(e){const t=Rt.fromString(e);return yt(jd(t),10190,{key:t.toString()}),t}function Ma(e,t){return Al(e.databaseId,t.path)}function sa(e,t){const n=kd(t);if(n.get(1)!==e.databaseId.projectId)throw new G(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new G(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Y(Fd(n))}function Ld(e,t){return Al(e.databaseId,t)}function VT(e){const t=kd(e);return t.length===4?Rt.emptyPath():Fd(t)}function ka(e){return new Rt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Fd(e){return yt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function Xu(e,t,n){return{name:Ma(e,t),fields:n.value.mapValue.fields}}function DT(e,t){let n;if("targetChange"in t){t.targetChange;const r=(function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:tt(39313,{state:f})})(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=(function(f,d){return f.useProto3Json?(yt(d===void 0||typeof d=="string",58123),Jt.fromBase64String(d||"")):(yt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Jt.fromUint8Array(d||new Uint8Array))})(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&(function(f){const d=f.code===void 0?N.UNKNOWN:xd(f.code);return new G(d,f.message||"")})(a);n=new Od(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=sa(e,r.document.name),i=Ue(r.document.updateTime),a=r.document.createTime?Ue(r.document.createTime):nt.min(),l=new ve({mapValue:{fields:r.document.fields}}),u=ie.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new Ai(f,d,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=sa(e,r.document),i=r.readTime?Ue(r.readTime):nt.min(),a=ie.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Ai([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=sa(e,r.document),i=r.removedTargetIds||[];n=new Ai([],i,s,null)}else{if(!("filter"in t))return tt(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new TT(s,i),l=r.targetId;n=new Nd(l,a)}}return n}function xT(e,t){let n;if(t instanceof Ks)n={update:Xu(e,t.key,t.value)};else if(t instanceof Dd)n={delete:Ma(e,t.key)};else if(t instanceof tr)n={update:Xu(e,t.key,t.data),updateMask:jT(t.fieldMask)};else{if(!(t instanceof _T))return tt(16599,{Vt:t.type});n={verify:Ma(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(i,a){const l=a.transform;if(l instanceof Ki)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Us)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Bs)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wi)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw tt(20930,{transform:a.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(s,i){return i.updateTime!==void 0?{updateTime:PT(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:tt(27497)})(e,t.precondition)),n}function NT(e,t){return e&&e.length>0?(yt(t!==void 0,14353),e.map((n=>(function(s,i){let a=s.updateTime?Ue(s.updateTime):Ue(i);return a.isEqual(nt.min())&&(a=Ue(i)),new pT(a,s.transformResults||[])})(n,t)))):[]}function OT(e,t){return{documents:[Ld(e,t.path)]}}function MT(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ld(e,s);const i=(function(f){if(f.length!==0)return Bd(He.create(f,"and"))})(t.filters);i&&(n.structuredQuery.where=i);const a=(function(f){if(f.length!==0)return f.map((d=>(function(E){return{field:gr(E.field),direction:FT(E.dir)}})(d)))})(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Na(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=(function(f){return{before:f.inclusive,values:f.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(f){return{before:!f.inclusive,values:f.position}})(t.endAt)),{ft:n,parent:s}}function kT(e){let t=VT(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){yt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=(function(m){const E=Ud(m);return E instanceof He&&pd(E)?E.getFilters():[E]})(n.where));let a=[];n.orderBy&&(a=(function(m){return m.map((E=>(function(D){return new zi(_r(D.field),(function(B){switch(B){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(D.direction))})(E)))})(n.orderBy));let l=null;n.limit&&(l=(function(m){let E;return E=typeof m=="object"?m.value:m,po(E)?null:E})(n.limit));let u=null;n.startAt&&(u=(function(m){const E=!!m.before,A=m.values||[];return new Hi(A,E)})(n.startAt));let f=null;return n.endAt&&(f=(function(m){const E=!m.before,A=m.values||[];return new Hi(A,E)})(n.endAt)),tT(t,s,a,i,l,"F",u,f)}function LT(e,t){const n=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:s})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Ud(e){return e.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=_r(n.unaryFilter.field);return $t.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=_r(n.unaryFilter.field);return $t.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=_r(n.unaryFilter.field);return $t.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=_r(n.unaryFilter.field);return $t.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(e):e.fieldFilter!==void 0?(function(n){return $t.create(_r(n.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(e):e.compositeFilter!==void 0?(function(n){return He.create(n.compositeFilter.filters.map((r=>Ud(r))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(e):tt(30097,{filter:e})}function FT(e){return bT[e]}function UT(e){return ST[e]}function BT(e){return RT[e]}function gr(e){return{fieldPath:e.canonicalString()}}function _r(e){return Xt.fromServerFormat(e.fieldPath)}function Bd(e){return e instanceof $t?(function(n){if(n.op==="=="){if(Lu(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NAN"}};if(ku(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Lu(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NAN"}};if(ku(n.value))return{unaryFilter:{field:gr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gr(n.field),op:UT(n.op),value:n.value}}})(e):e instanceof He?(function(n){const r=n.getFilters().map((s=>Bd(s)));return r.length===1?r[0]:{compositeFilter:{op:BT(n.op),filters:r}}})(e):tt(54877,{filter:e})}function jT(e){const t=[];return e.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function jd(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(t,n,r,s,i=nt.min(),a=nt.min(),l=Jt.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(t){return new _n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new _n(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new _n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new _n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t){this.yt=t}}function qT(e){const t=kT({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?xa(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(){this.Cn=new zT}addToCollectionParentIndex(t,n){return this.Cn.add(n),V.resolve()}getCollectionParents(t,n){return V.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return V.resolve()}deleteFieldIndex(t,n){return V.resolve()}deleteAllFieldIndexes(t){return V.resolve()}createTargetIndexes(t,n){return V.resolve()}getDocumentsMatchingTarget(t,n){return V.resolve(null)}getIndexType(t,n){return V.resolve(0)}getFieldIndexes(t,n){return V.resolve([])}getNextCollectionGroupToUpdate(t){return V.resolve(null)}getMinOffset(t,n){return V.resolve(Sn.min())}getMinOffsetFromCollectionGroup(t,n){return V.resolve(Sn.min())}updateCollectionGroup(t,n,r){return V.resolve()}updateIndexEntries(t,n){return V.resolve()}}class zT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new qt(Rt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new qt(Rt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},$d=41943040;class fe{static withCacheSize(t){return new fe(t,fe.DEFAULT_COLLECTION_PERCENTILE,fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */fe.DEFAULT_COLLECTION_PERCENTILE=10,fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fe.DEFAULT=new fe($d,fe.DEFAULT_COLLECTION_PERCENTILE,fe.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fe.DISABLED=new fe(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new xr(0)}static cr(){return new xr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju="LruGarbageCollector",KT=1048576;function Zu([e,t],[n,r]){const s=ct(e,n);return s===0?ct(t,r):s}class WT{constructor(t){this.Ir=t,this.buffer=new qt(Zu),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Zu(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class GT{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){H(Ju,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Fr(n)?H(Ju,"Ignoring IndexedDB error during garbage collection: ",n):await Lr(n)}await this.Vr(3e5)}))}}class QT{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return V.resolve(fo.ce);const r=new WT(n);return this.mr.forEachTarget(t,(s=>r.Ar(s.sequenceNumber))).next((()=>this.mr.pr(t,(s=>r.Ar(s))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),V.resolve(Yu)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Yu):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,s,i,a,l,u,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),s=this.params.maximumSequenceNumbersToCollect):s=m,a=Date.now(),this.nthSequenceNumber(t,s)))).next((m=>(r=m,l=Date.now(),this.removeTargets(t,r,n)))).next((m=>(i=m,u=Date.now(),this.removeOrphanedDocuments(t,r)))).next((m=>(f=Date.now(),pr()<=ft.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(f-u)+`ms
Total Duration: ${f-d}ms`),V.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:m}))))}}function XT(e,t){return new QT(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.changes=new Zn((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ie.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((s=>(r=s,this.remoteDocumentCache.getEntry(t,n)))).next((s=>(r!==null&&Ss(r.mutation,s,Re.empty(),Ct.now()),s)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,ut()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=ut()){const s=Hn();return this.populateOverlays(t,s,n).next((()=>this.computeViews(t,n,s,r).next((i=>{let a=fs();return i.forEach(((l,u)=>{a=a.insert(l,u.overlayedDocument)})),a}))))}getOverlayedDocuments(t,n){const r=Hn();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,ut())))}populateOverlays(t,n,r){const s=[];return r.forEach((i=>{n.has(i)||s.push(i)})),this.documentOverlayCache.getOverlays(t,s).next((i=>{i.forEach(((a,l)=>{n.set(a,l)}))}))}computeViews(t,n,r,s){let i=rn();const a=bs(),l=(function(){return bs()})();return n.forEach(((u,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof tr)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),Ss(d.mutation,f,d.mutation.getFieldMask(),Ct.now())):a.set(f.key,Re.empty())})),this.recalculateAndSaveOverlays(t,i).next((u=>(u.forEach(((f,d)=>a.set(f,d))),n.forEach(((f,d)=>l.set(f,new JT(d,a.get(f)??null)))),l)))}recalculateAndSaveOverlays(t,n){const r=bs();let s=new Vt(((a,l)=>a-l)),i=ut();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((a=>{for(const l of a)l.keys().forEach((u=>{const f=n.get(u);if(f===null)return;let d=r.get(u)||Re.empty();d=l.applyToLocalView(f,d),r.set(u,d);const m=(s.get(l.batchId)||ut()).add(u);s=s.insert(l.batchId,m)}))})).next((()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),f=u.key,d=u.value,m=wd();d.forEach((E=>{if(!i.has(E)){const A=Pd(n.get(E),r.get(E));A!==null&&m.set(E,A),i=i.add(E)}})),a.push(this.documentOverlayCache.saveOverlays(t,f,m))}return V.waitFor(a)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,s){return(function(a){return Y.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):eT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next((i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):V.resolve(Hn());let l=Ms,u=i;return a.next((f=>V.forEach(f,((d,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(d)?V.resolve():this.remoteDocumentCache.getEntry(t,d).next((E=>{u=u.insert(d,E)}))))).next((()=>this.populateOverlays(t,f,i))).next((()=>this.computeViews(t,u,f,ut()))).next((d=>({batchId:l,changes:Id(d)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Y(n)).next((r=>{let s=fs();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=fs();return this.indexManager.getCollectionParents(t,i).next((l=>V.forEach(l,(u=>{const f=(function(m,E){return new go(E,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next((d=>{d.forEach(((m,E)=>{a=a.insert(m,E)}))}))})).next((()=>a))))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s)))).next((a=>{i.forEach(((u,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,ie.newInvalidDocument(d)))}));let l=fs();return a.forEach(((u,f)=>{const d=i.get(u);d!==void 0&&Ss(d.mutation,f,Re.empty(),Ct.now()),yo(n,f)&&(l=l.insert(u,f))})),l}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return V.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(s){return{id:s.id,version:s.version,createTime:Ue(s.createTime)}})(n)),V.resolve()}getNamedQuery(t,n){return V.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(s){return{name:s.name,query:qT(s.bundledQuery),readTime:Ue(s.readTime)}})(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ev{constructor(){this.overlays=new Vt(Y.comparator),this.qr=new Map}getOverlay(t,n){return V.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Hn();return V.forEach(n,(s=>this.getOverlay(t,s).next((i=>{i!==null&&r.set(s,i)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((s,i)=>{this.St(t,n,i)})),V.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach((i=>this.overlays=this.overlays.remove(i))),this.qr.delete(r)),V.resolve()}getOverlaysForCollection(t,n,r){const s=Hn(),i=n.length+1,a=new Y(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,f=u.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return V.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new Vt(((f,d)=>f-d));const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Hn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Hn(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach(((f,d)=>l.set(f,d))),!(l.size()>=s)););return V.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new ET(n,r));let i=this.qr.get(n);i===void 0&&(i=ut(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nv{constructor(){this.sessionToken=Jt.EMPTY_BYTE_STRING}getSessionToken(t){return V.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(){this.Qr=new qt(Kt.$r),this.Ur=new qt(Kt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new Kt(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new Kt(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new Y(new Rt([])),r=new Kt(n,t),s=new Kt(n,t+1),i=[];return this.Ur.forEachInRange([r,s],(a=>{this.Gr(a),i.push(a.key)})),i}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new Y(new Rt([])),r=new Kt(n,t),s=new Kt(n,t+1);let i=ut();return this.Ur.forEachInRange([r,s],(a=>{i=i.add(a.key)})),i}containsKey(t){const n=new Kt(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Kt{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return Y.comparator(t.key,n.key)||ct(t.Yr,n.Yr)}static Kr(t,n){return ct(t.Yr,n.Yr)||Y.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new qt(Kt.$r)}checkEmpty(t){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new yT(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new Kt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return V.resolve(a)}lookupMutationBatch(t,n){return V.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?gl:this.tr-1)}getAllMutationBatches(t){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Kt(n,0),s=new Kt(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],(a=>{const l=this.Xr(a.Yr);i.push(l)})),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new qt(ct);return n.forEach((s=>{const i=new Kt(s,0),a=new Kt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,a],(l=>{r=r.add(l.Yr)}))})),V.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const a=new Kt(new Y(i),0);let l=new qt(ct);return this.Zr.forEachWhile((u=>{const f=u.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(u.Yr)),!0)}),a),V.resolve(this.ti(l))}ti(t){const n=[];return t.forEach((r=>{const s=this.Xr(r);s!==null&&n.push(s)})),n}removeMutationBatch(t,n){yt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return V.forEach(n.mutations,(s=>{const i=new Kt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new Kt(n,0),s=this.Zr.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,V.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sv{constructor(t){this.ri=t,this.docs=(function(){return new Vt(Y.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():ie.newInvalidDocument(n))}getEntries(t,n){let r=rn();return n.forEach((s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ie.newInvalidDocument(s))})),V.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=rn();const a=n.path,l=new Y(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:f,value:{document:d}}=u.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||xE(DE(d),r)<=0||(s.has(d.key)||yo(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(t,n,r,s){tt(9500)}ii(t,n){return V.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new iv(this)}getSize(t){return V.resolve(this.size)}}class iv extends YT{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(t,s)):this.Nr.removeEntry(r)})),V.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ov{constructor(t){this.persistence=t,this.si=new Zn((n=>El(n)),Tl),this.lastRemoteSnapshotVersion=nt.min(),this.highestTargetId=0,this.oi=0,this._i=new bl,this.targetCount=0,this.ai=xr.ur()}forEachTarget(t,n){return this.si.forEach(((r,s)=>n(s))),V.resolve()}getLastRemoteSnapshotVersion(t){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return V.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),V.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new xr(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,V.resolve()}updateTargetData(t,n){return this.Pr(n),V.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.si.forEach(((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)})),V.waitFor(i).next((()=>s))}getTargetCount(t){return V.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return V.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),V.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach((a=>{i.push(s.markPotentiallyOrphaned(t,a))})),V.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),V.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return V.resolve(r)}containsKey(t,n){return V.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(t,n){this.ui={},this.overlays={},this.ci=new fo(0),this.li=!1,this.li=!0,this.hi=new nv,this.referenceDelegate=t(this),this.Pi=new ov(this),this.indexManager=new HT,this.remoteDocumentCache=(function(s){return new sv(s)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new $T(n),this.Ii=new tv(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new ev,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new rv(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){H("MemoryPersistence","Starting transaction:",t);const s=new av(this.ci.next());return this.referenceDelegate.Ei(),r(s).next((i=>this.referenceDelegate.di(s).next((()=>i)))).toPromise().then((i=>(s.raiseOnCommittedEvent(),i)))}Ai(t,n){return V.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class av extends OE{constructor(t){super(),this.currentSequenceNumber=t}}class Sl{constructor(t){this.persistence=t,this.Ri=new bl,this.Vi=null}static mi(t){return new Sl(t)}get fi(){if(this.Vi)return this.Vi;throw tt(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),V.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),V.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),V.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((s=>this.fi.add(s.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((s=>{s.forEach((i=>this.fi.add(i.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.fi,(r=>{const s=Y.fromPath(r);return this.gi(t,s).next((i=>{i||n.removeEntry(s,nt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return V.or([()=>V.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Qi{constructor(t,n){this.persistence=t,this.pi=new Zn((r=>LE(r.path)),((r,s)=>r.isEqual(s))),this.garbageCollector=XT(this,n)}static mi(t,n){return new Qi(t,n)}Ei(){}di(t){return V.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((s=>r+s))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return V.forEach(this.pi,((r,s)=>this.br(t,r,s).next((i=>i?V.resolve():n(s)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(t,(a=>this.br(t,a,n).next((l=>{l||(r++,i.removeEntry(a,nt.min()))})))).next((()=>i.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),V.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),V.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),V.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),V.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=vi(t.data.value)),n}br(t,n,r){return V.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.pi.get(n);return V.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=s}static As(t,n){let r=ut(),s=ut();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Rl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return ey()?8:ME(Z_())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.ys(t,n).next((a=>{i.result=a})).next((()=>{if(!i.result)return this.ws(t,n,s,r).next((a=>{i.result=a}))})).next((()=>{if(i.result)return;const a=new lv;return this.Ss(t,n,a).next((l=>{if(i.result=l,this.Vs)return this.bs(t,n,a,l.size)}))})).next((()=>i.result))}bs(t,n,r,s){return r.documentReadCount<this.fs?(pr()<=ft.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",mr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),V.resolve()):(pr()<=ft.DEBUG&&H("QueryEngine","Query:",mr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(pr()<=ft.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",mr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Fe(n))):V.resolve())}ys(t,n){if(ju(n))return V.resolve(null);let r=Fe(n);return this.indexManager.getIndexType(t,r).next((s=>s===0?null:(n.limit!==null&&s===1&&(n=xa(n,null,"F"),r=Fe(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((i=>{const a=ut(...i);return this.ps.getDocuments(t,a).next((l=>this.indexManager.getMinOffset(t,r).next((u=>{const f=this.Ds(n,l);return this.Cs(n,f,a,u.readTime)?this.ys(t,xa(n,null,"F")):this.vs(t,f,n,u)}))))})))))}ws(t,n,r,s){return ju(n)||s.isEqual(nt.min())?V.resolve(null):this.ps.getDocuments(t,r).next((i=>{const a=this.Ds(n,i);return this.Cs(n,a,r,s)?V.resolve(null):(pr()<=ft.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mr(n)),this.vs(t,a,n,VE(s,Ms)).next((l=>l)))}))}Ds(t,n){let r=new qt(Td(t));return n.forEach(((s,i)=>{yo(t,i)&&(r=r.add(i))})),r}Cs(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(t,n,r){return pr()<=ft.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",mr(n)),this.ps.getDocumentsMatchingQuery(t,n,Sn.min(),r)}vs(t,n,r,s){return this.ps.getDocumentsMatchingQuery(t,r,s).next((i=>(n.forEach((a=>{i=i.insert(a.key,a)})),i)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cl="LocalStore",uv=3e8;class hv{constructor(t,n,r,s){this.persistence=t,this.Fs=n,this.serializer=s,this.Ms=new Vt(ct),this.xs=new Zn((i=>El(i)),Tl),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new ZT(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function fv(e,t,n,r){return new hv(e,t,n,r)}async function Hd(e,t){const n=st(e);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next((i=>(s=i,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((i=>{const a=[],l=[];let u=ut();for(const f of s){a.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next((f=>({Ls:f,removedBatchIds:a,addedBatchIds:l})))}))}))}function dv(e,t){const n=st(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const s=t.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(l,u,f,d){const m=f.batch,E=m.keys();let A=V.resolve();return E.forEach((D=>{A=A.next((()=>d.getEntry(u,D))).next((U=>{const B=f.docVersions.get(D);yt(B!==null,48541),U.version.compareTo(B)<0&&(m.applyToRemoteDocument(U,f),U.isValidDocument()&&(U.setReadTime(f.commitVersion),d.addEntry(U)))}))})),A.next((()=>l.mutationQueue.removeMutationBatch(u,m)))})(n,r,t,i).next((()=>i.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(l){let u=ut();for(let f=0;f<l.mutationResults.length;++f)l.mutationResults[f].transformResults.length>0&&(u=u.add(l.batch.mutations[f].key));return u})(t)))).next((()=>n.localDocuments.getDocuments(r,s)))}))}function zd(e){const t=st(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function pv(e,t){const n=st(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(i=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];t.targetChanges.forEach(((d,m)=>{const E=s.get(m);if(!E)return;l.push(n.Pi.removeMatchingKeys(i,d.removedDocuments,m).next((()=>n.Pi.addMatchingKeys(i,d.addedDocuments,m))));let A=E.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(m)!==null?A=A.withResumeToken(Jt.EMPTY_BYTE_STRING,nt.min()).withLastLimboFreeSnapshotVersion(nt.min()):d.resumeToken.approximateByteSize()>0&&(A=A.withResumeToken(d.resumeToken,r)),s=s.insert(m,A),(function(U,B,K){return U.resumeToken.approximateByteSize()===0||B.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=uv?!0:K.addedDocuments.size+K.modifiedDocuments.size+K.removedDocuments.size>0})(E,A,d)&&l.push(n.Pi.updateTargetData(i,A))}));let u=rn(),f=ut();if(t.documentUpdates.forEach((d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))})),l.push(mv(i,a,t.documentUpdates).next((d=>{u=d.ks,f=d.qs}))),!r.isEqual(nt.min())){const d=n.Pi.getLastRemoteSnapshotVersion(i).next((m=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r)));l.push(d)}return V.waitFor(l).next((()=>a.apply(i))).next((()=>n.localDocuments.getLocalViewOfDocuments(i,u,f))).next((()=>u))})).then((i=>(n.Ms=s,i)))}function mv(e,t,n){let r=ut(),s=ut();return n.forEach((i=>r=r.add(i))),t.getEntries(e,r).next((i=>{let a=rn();return n.forEach(((l,u)=>{const f=i.get(l);u.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(nt.min())?(t.removeEntry(l,u.readTime),a=a.insert(l,u)):!f.isValidDocument()||u.version.compareTo(f.version)>0||u.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(u),a=a.insert(l,u)):H(Cl,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",u.version)})),{ks:a,qs:s}}))}function gv(e,t){const n=st(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=gl),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function _v(e,t){const n=st(e);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let s;return n.Pi.getTargetData(r,t).next((i=>i?(s=i,V.resolve(s)):n.Pi.allocateTargetId(r).next((a=>(s=new _n(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next((()=>s)))))))})).then((r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function La(e,t,n){const r=st(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,(a=>r.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!Fr(a))throw a;H(Cl,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function th(e,t,n){const r=st(e);let s=nt.min(),i=ut();return r.persistence.runTransaction("Execute query","readwrite",(a=>(function(u,f,d){const m=st(u),E=m.xs.get(d);return E!==void 0?V.resolve(m.Ms.get(E)):m.Pi.getTargetData(f,d)})(r,a,Fe(t)).next((l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next((u=>{i=u}))})).next((()=>r.Fs.getDocumentsMatchingQuery(a,t,n?s:nt.min(),n?i:ut()))).next((l=>(yv(r,rT(t),l),{documents:l,Qs:i})))))}function yv(e,t,n){let r=e.Os.get(t)||nt.min();n.forEach(((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)})),e.Os.set(t,r)}class eh{constructor(){this.activeTargetIds=cT()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Ev{constructor(){this.Mo=new eh,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new eh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh="ConnectivityMonitor";class rh{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){H(nh,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){H(nh,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pi=null;function Fa(){return pi===null?pi=(function(){return 268435456+Math.round(2147483648*Math.random())})():pi++,"0x"+pi.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="RestConnection",vv={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Iv{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===$i?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(t,n,r,s,i){const a=Fa(),l=this.zo(t,n.toUriEncodedString());H(ia,`Sending RPC '${t}' ${a}:`,l,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,s,i);const{host:f}=new URL(l),d=hl(f);return this.Jo(t,l,u,r,d).then((m=>(H(ia,`Received RPC '${t}' ${a}: `,m),m)),(m=>{throw Cr(ia,`RPC '${t}' ${a} failed with error: `,m,"url: ",l,"request:",r),m}))}Ho(t,n,r,s,i,a){return this.Go(t,n,r,s,i)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+kr})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((s,i)=>t[i]=s)),r&&r.headers.forEach(((s,i)=>t[i]=s))}zo(t,n){const r=vv[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wv{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee="WebChannelConnection";class Av extends Iv{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,s,i){const a=Fa();return new Promise(((l,u)=>{const f=new Wf;f.setWithCredentials(!0),f.listenOnce(Gf.COMPLETE,(()=>{try{switch(f.getLastErrorCode()){case Ti.NO_ERROR:const m=f.getResponseJson();H(ee,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(m)),l(m);break;case Ti.TIMEOUT:H(ee,`RPC '${t}' ${a} timed out`),u(new G(N.DEADLINE_EXCEEDED,"Request time out"));break;case Ti.HTTP_ERROR:const E=f.getStatus();if(H(ee,`RPC '${t}' ${a} failed with status:`,E,"response text:",f.getResponseText()),E>0){let A=f.getResponseJson();Array.isArray(A)&&(A=A[0]);const D=A==null?void 0:A.error;if(D&&D.status&&D.message){const U=(function(K){const W=K.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(W)>=0?W:N.UNKNOWN})(D.status);u(new G(U,D.message))}else u(new G(N.UNKNOWN,"Server responded with status "+f.getStatus()))}else u(new G(N.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{l_:t,streamId:a,h_:f.getLastErrorCode(),P_:f.getLastError()})}}finally{H(ee,`RPC '${t}' ${a} completed.`)}}));const d=JSON.stringify(s);H(ee,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)}))}T_(t,n,r){const s=Fa(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=Yf(),l=Xf(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(u.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");H(ee,`Creating RPC '${t}' stream ${s}: ${d}`,u);const m=a.createWebChannel(d,u);this.I_(m);let E=!1,A=!1;const D=new wv({Yo:B=>{A?H(ee,`Not sending because RPC '${t}' stream ${s} is closed:`,B):(E||(H(ee,`Opening RPC '${t}' stream ${s} transport.`),m.open(),E=!0),H(ee,`RPC '${t}' stream ${s} sending:`,B),m.send(B))},Zo:()=>m.close()}),U=(B,K,W)=>{B.listen(K,(Q=>{try{W(Q)}catch(z){setTimeout((()=>{throw z}),0)}}))};return U(m,hs.EventType.OPEN,(()=>{A||(H(ee,`RPC '${t}' stream ${s} transport opened.`),D.o_())})),U(m,hs.EventType.CLOSE,(()=>{A||(A=!0,H(ee,`RPC '${t}' stream ${s} transport closed`),D.a_(),this.E_(m))})),U(m,hs.EventType.ERROR,(B=>{A||(A=!0,Cr(ee,`RPC '${t}' stream ${s} transport errored. Name:`,B.name,"Message:",B.message),D.a_(new G(N.UNAVAILABLE,"The operation could not be completed")))})),U(m,hs.EventType.MESSAGE,(B=>{var K;if(!A){const W=B.data[0];yt(!!W,16349);const Q=W,z=(Q==null?void 0:Q.error)||((K=Q[0])==null?void 0:K.error);if(z){H(ee,`RPC '${t}' stream ${s} received error:`,z);const rt=z.status;let Et=(function(_){const I=kt[_];if(I!==void 0)return xd(I)})(rt),w=z.message;Et===void 0&&(Et=N.INTERNAL,w="Unknown error status: "+rt+" with message "+z.message),A=!0,D.a_(new G(Et,w)),m.close()}else H(ee,`RPC '${t}' stream ${s} received:`,W),D.u_(W)}})),U(l,Qf.STAT_EVENT,(B=>{B.stat===Sa.PROXY?H(ee,`RPC '${t}' stream ${s} detected buffering proxy`):B.stat===Sa.NOPROXY&&H(ee,`RPC '${t}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{D.__()}),0),D}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}function oa(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Io(e){return new CT(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t,n,r=1e3,s=1.5,i=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh="PersistentStream";class Wd{constructor(t,n,r,s,i,a,l,u){this.Mi=t,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kd(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(nn(n.toString()),nn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,s])=>{this.D_===n&&this.G_(r,s)}),(r=>{t((()=>{const s=new G(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{r((()=>this.z_(s)))})),this.stream.onMessage((s=>{r((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return H(sh,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(H(sh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class bv extends Wd{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=DT(this.serializer,t),r=(function(i){if(!("targetChange"in i))return nt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?nt.min():a.readTime?Ue(a.readTime):nt.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=ka(this.serializer),n.addTarget=(function(i,a){let l;const u=a.target;if(l=Da(u)?{documents:OT(i,u)}:{query:MT(i,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Md(i,a.resumeToken);const f=Na(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(nt.min())>0){l.readTime=Gi(i,a.snapshotVersion.toTimestamp());const f=Na(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l})(this.serializer,t);const r=LT(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=ka(this.serializer),n.removeTarget=t,this.q_(n)}}class Sv extends Wd{constructor(t,n,r,s,i,a){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return yt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,yt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){yt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=NT(t.writeResults,t.commitTime),r=Ue(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=ka(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>xT(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rv{}class Cv extends Rv{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new G(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,a])=>this.connection.Go(t,Oa(n,r),s,i,a))).catch((i=>{throw i.name==="FirebaseError"?(i.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(N.UNKNOWN,i.toString())}))}Ho(t,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([a,l])=>this.connection.Ho(t,Oa(n,r),s,a,l,i))).catch((a=>{throw a.name==="FirebaseError"?(a.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new G(N.UNKNOWN,a.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class Pv{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(nn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qn="RemoteStore";class Vv{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo((a=>{r.enqueueAndForget((async()=>{er(this)&&(H(Qn,"Restarting streams for network reachability change."),await(async function(u){const f=st(u);f.Ea.add(4),await Gs(f),f.Ra.set("Unknown"),f.Ea.delete(4),await wo(f)})(this))}))})),this.Ra=new Pv(r,s)}}async function wo(e){if(er(e))for(const t of e.da)await t(!0)}async function Gs(e){for(const t of e.da)await t(!1)}function Gd(e,t){const n=st(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),xl(n)?Dl(n):Ur(n).O_()&&Vl(n,t))}function Pl(e,t){const n=st(e),r=Ur(n);n.Ia.delete(t),r.O_()&&Qd(n,t),n.Ia.size===0&&(r.O_()?r.L_():er(n)&&n.Ra.set("Unknown"))}function Vl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(nt.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Ur(e).Y_(t)}function Qd(e,t){e.Va.Ue(t),Ur(e).Z_(t)}function Dl(e){e.Va=new AT({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Ur(e).start(),e.Ra.ua()}function xl(e){return er(e)&&!Ur(e).x_()&&e.Ia.size>0}function er(e){return st(e).Ea.size===0}function Xd(e){e.Va=void 0}async function Dv(e){e.Ra.set("Online")}async function xv(e){e.Ia.forEach(((t,n)=>{Vl(e,t)}))}async function Nv(e,t){Xd(e),xl(e)?(e.Ra.ha(t),Dl(e)):e.Ra.set("Unknown")}async function Ov(e,t,n){if(e.Ra.set("Online"),t instanceof Od&&t.state===2&&t.cause)try{await(async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))})(e,t)}catch(r){H(Qn,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Xi(e,r)}else if(t instanceof Ai?e.Va.Ze(t):t instanceof Nd?e.Va.st(t):e.Va.tt(t),!n.isEqual(nt.min()))try{const r=await zd(e.localStore);n.compareTo(r)>=0&&await(function(i,a){const l=i.Va.Tt(a);return l.targetChanges.forEach(((u,f)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.Ia.get(f);d&&i.Ia.set(f,d.withResumeToken(u.resumeToken,a))}})),l.targetMismatches.forEach(((u,f)=>{const d=i.Ia.get(u);if(!d)return;i.Ia.set(u,d.withResumeToken(Jt.EMPTY_BYTE_STRING,d.snapshotVersion)),Qd(i,u);const m=new _n(d.target,u,f,d.sequenceNumber);Vl(i,m)})),i.remoteSyncer.applyRemoteEvent(l)})(e,n)}catch(r){H(Qn,"Failed to raise snapshot:",r),await Xi(e,r)}}async function Xi(e,t,n){if(!Fr(t))throw t;e.Ea.add(1),await Gs(e),e.Ra.set("Offline"),n||(n=()=>zd(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{H(Qn,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await wo(e)}))}function Yd(e,t){return t().catch((n=>Xi(e,n,t)))}async function Ao(e){const t=st(e),n=Vn(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:gl;for(;Mv(t);)try{const s=await gv(t.localStore,r);if(s===null){t.Ta.length===0&&n.L_();break}r=s.batchId,kv(t,s)}catch(s){await Xi(t,s)}Jd(t)&&Zd(t)}function Mv(e){return er(e)&&e.Ta.length<10}function kv(e,t){e.Ta.push(t);const n=Vn(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Jd(e){return er(e)&&!Vn(e).x_()&&e.Ta.length>0}function Zd(e){Vn(e).start()}async function Lv(e){Vn(e).ra()}async function Fv(e){const t=Vn(e);for(const n of e.Ta)t.ea(n.mutations)}async function Uv(e,t,n){const r=e.Ta.shift(),s=Il.from(r,t,n);await Yd(e,(()=>e.remoteSyncer.applySuccessfulWrite(s))),await Ao(e)}async function Bv(e,t){t&&Vn(e).X_&&await(async function(r,s){if((function(a){return vT(a)&&a!==N.ABORTED})(s.code)){const i=r.Ta.shift();Vn(r).B_(),await Yd(r,(()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s))),await Ao(r)}})(e,t),Jd(e)&&Zd(e)}async function ih(e,t){const n=st(e);n.asyncQueue.verifyOperationInProgress(),H(Qn,"RemoteStore received new credentials");const r=er(n);n.Ea.add(3),await Gs(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await wo(n)}async function jv(e,t){const n=st(e);t?(n.Ea.delete(2),await wo(n)):t||(n.Ea.add(2),await Gs(n),n.Ra.set("Unknown"))}function Ur(e){return e.ma||(e.ma=(function(n,r,s){const i=st(n);return i.sa(),new bv(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:Dv.bind(null,e),t_:xv.bind(null,e),r_:Nv.bind(null,e),H_:Ov.bind(null,e)}),e.da.push((async t=>{t?(e.ma.B_(),xl(e)?Dl(e):e.Ra.set("Unknown")):(await e.ma.stop(),Xd(e))}))),e.ma}function Vn(e){return e.fa||(e.fa=(function(n,r,s){const i=st(n);return i.sa(),new Sv(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)})(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Lv.bind(null,e),r_:Bv.bind(null,e),ta:Fv.bind(null,e),na:Uv.bind(null,e)}),e.da.push((async t=>{t?(e.fa.B_(),await Ao(e)):(await e.fa.stop(),e.Ta.length>0&&(H(Qn,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))}))),e.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((a=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new Nl(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(N.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ol(e,t){if(nn("AsyncQueue",`${t}: ${e}`),Fr(e))return new G(N.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{static emptySet(t){return new Ar(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=fs(),this.sortedSet=new Vt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ar)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Ar;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(){this.ga=new Vt(Y.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):tt(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class Nr{constructor(t,n,r,s,i,a,l,u,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach((l=>{a.push({type:0,doc:l})})),new Nr(t,n,Ar.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&_o(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $v{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class qv{constructor(){this.queries=ah(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=st(n),i=s.queries;s.queries=ah(),i.forEach(((a,l)=>{for(const u of l.Sa)u.onError(r)}))})(this,new G(N.ABORTED,"Firestore shutting down"))}}function ah(){return new Zn((e=>Ed(e)),_o)}async function Hv(e,t){const n=st(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new $v,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=Ol(a,`Initialization of query '${mr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Ml(n)}async function zv(e,t){const n=st(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Sa.indexOf(t);a>=0&&(i.Sa.splice(a,1),i.Sa.length===0?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Kv(e,t){const n=st(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&Ml(n)}function Wv(e,t,n){const r=st(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Ml(e){e.Ca.forEach((t=>{t.next()}))}var Ua,lh;(lh=Ua||(Ua={})).Ma="default",lh.Cache="cache";class Gv{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Nr(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=Nr.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ua.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(t){this.key=t}}class ep{constructor(t){this.key=t}}class Qv{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ut(),this.mutatedKeys=ut(),this.eu=Td(t),this.tu=new Ar(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new oh,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal(((d,m)=>{const E=s.get(d),A=yo(this.query,m)?m:null,D=!!E&&this.mutatedKeys.has(E.key),U=!!A&&(A.hasLocalMutations||this.mutatedKeys.has(A.key)&&A.hasCommittedMutations);let B=!1;E&&A?E.data.isEqual(A.data)?D!==U&&(r.track({type:3,doc:A}),B=!0):this.su(E,A)||(r.track({type:2,doc:A}),B=!0,(u&&this.eu(A,u)>0||f&&this.eu(A,f)<0)&&(l=!0)):!E&&A?(r.track({type:0,doc:A}),B=!0):E&&!A&&(r.track({type:1,doc:E}),B=!0,(u||f)&&(l=!0)),B&&(A?(a=a.add(A),i=U?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))})),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:l,mutatedKeys:i}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const a=t.iu.ya();a.sort(((d,m)=>(function(A,D){const U=B=>{switch(B){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Rt:B})}};return U(A)-U(D)})(d.type,m.type)||this.eu(d.doc,m.doc))),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],u=this.Xa.size===0&&this.current&&!s?1:0,f=u!==this.Za;return this.Za=u,a.length!==0||f?{snapshot:new Nr(this.query,t.tu,i,a,t.mutatedKeys,u===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new oh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=ut(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new ep(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new tp(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=ut();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return Nr.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const kl="SyncEngine";class Xv{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Yv{constructor(t){this.key=t,this.hu=!1}}class Jv{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Zn((l=>Ed(l)),_o),this.Iu=new Map,this.Eu=new Set,this.du=new Vt(Y.comparator),this.Au=new Map,this.Ru=new bl,this.Vu={},this.mu=new Map,this.fu=xr.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Zv(e,t,n=!0){const r=ap(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await np(r,t,n,!0),s}async function tI(e,t){const n=ap(e);await np(n,t,!0,!1)}async function np(e,t,n,r){const s=await _v(e.localStore,Fe(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await eI(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&Gd(e.remoteStore,s),l}async function eI(e,t,n,r,s){e.pu=(m,E,A)=>(async function(U,B,K,W){let Q=B.view.ru(K);Q.Cs&&(Q=await th(U.localStore,B.query,!1).then((({documents:w})=>B.view.ru(w,Q))));const z=W&&W.targetChanges.get(B.targetId),rt=W&&W.targetMismatches.get(B.targetId)!=null,Et=B.view.applyChanges(Q,U.isPrimaryClient,z,rt);return uh(U,B.targetId,Et.au),Et.snapshot})(e,m,E,A);const i=await th(e.localStore,t,!0),a=new Qv(t,i.Qs),l=a.ru(i.documents),u=Ws.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,u);uh(e,n,f.au);const d=new Xv(t,n,a);return e.Tu.set(t,d),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),f.snapshot}async function nI(e,t,n){const r=st(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter((a=>!_o(a,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await La(r.localStore,s.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Pl(r.remoteStore,s.targetId),Ba(r,s.targetId)})).catch(Lr)):(Ba(r,s.targetId),await La(r.localStore,s.targetId,!0))}async function rI(e,t){const n=st(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Pl(n.remoteStore,r.targetId))}async function sI(e,t,n){const r=hI(e);try{const s=await(function(a,l){const u=st(a),f=Ct.now(),d=l.reduce(((A,D)=>A.add(D.key)),ut());let m,E;return u.persistence.runTransaction("Locally write mutations","readwrite",(A=>{let D=rn(),U=ut();return u.Ns.getEntries(A,d).next((B=>{D=B,D.forEach(((K,W)=>{W.isValidDocument()||(U=U.add(K))}))})).next((()=>u.localDocuments.getOverlayedDocuments(A,D))).next((B=>{m=B;const K=[];for(const W of l){const Q=gT(W,m.get(W.key).overlayedDocument);Q!=null&&K.push(new tr(W.key,Q,hd(Q.value.mapValue),Ye.exists(!0)))}return u.mutationQueue.addMutationBatch(A,f,K,l)})).next((B=>{E=B;const K=B.applyToLocalDocumentSet(m,U);return u.documentOverlayCache.saveOverlays(A,B.batchId,K)}))})).then((()=>({batchId:E.batchId,changes:Id(m)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(s.batchId),(function(a,l,u){let f=a.Vu[a.currentUser.toKey()];f||(f=new Vt(ct)),f=f.insert(l,u),a.Vu[a.currentUser.toKey()]=f})(r,s.batchId,n),await Qs(r,s.changes),await Ao(r.remoteStore)}catch(s){const i=Ol(s,"Failed to persist write");n.reject(i)}}async function rp(e,t){const n=st(e);try{const r=await pv(n.localStore,t);t.targetChanges.forEach(((s,i)=>{const a=n.Au.get(i);a&&(yt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?yt(a.hu,14607):s.removedDocuments.size>0&&(yt(a.hu,42227),a.hu=!1))})),await Qs(n,r,t)}catch(r){await Lr(r)}}function ch(e,t,n){const r=st(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach(((i,a)=>{const l=a.view.va(t);l.snapshot&&s.push(l.snapshot)})),(function(a,l){const u=st(a);u.onlineState=l;let f=!1;u.queries.forEach(((d,m)=>{for(const E of m.Sa)E.va(l)&&(f=!0)})),f&&Ml(u)})(r.eventManager,t),s.length&&r.Pu.H_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function iI(e,t,n){const r=st(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let a=new Vt(Y.comparator);a=a.insert(i,ie.newNoDocument(i,nt.min()));const l=ut().add(i),u=new vo(nt.min(),new Map,new Vt(ct),a,l);await rp(r,u),r.du=r.du.remove(i),r.Au.delete(t),Ll(r)}else await La(r.localStore,t,!1).then((()=>Ba(r,t,n))).catch(Lr)}async function oI(e,t){const n=st(e),r=t.batch.batchId;try{const s=await dv(n.localStore,t);ip(n,r,null),sp(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qs(n,s)}catch(s){await Lr(s)}}async function aI(e,t,n){const r=st(e);try{const s=await(function(a,l){const u=st(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",(f=>{let d;return u.mutationQueue.lookupMutationBatch(f,l).next((m=>(yt(m!==null,37113),d=m.keys(),u.mutationQueue.removeMutationBatch(f,m)))).next((()=>u.mutationQueue.performConsistencyCheck(f))).next((()=>u.documentOverlayCache.removeOverlaysForBatchId(f,d,l))).next((()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(f,d))).next((()=>u.localDocuments.getDocuments(f,d)))}))})(r.localStore,t);ip(r,t,n),sp(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Qs(r,s)}catch(s){await Lr(s)}}function sp(e,t){(e.mu.get(t)||[]).forEach((n=>{n.resolve()})),e.mu.delete(t)}function ip(e,t,n){const r=st(e);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(t);i&&(n?i.reject(n):i.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Ba(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach((r=>{e.Ru.containsKey(r)||op(e,r)}))}function op(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);n!==null&&(Pl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Ll(e))}function uh(e,t,n){for(const r of n)r instanceof tp?(e.Ru.addReference(r.key,t),lI(e,r)):r instanceof ep?(H(kl,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||op(e,r.key)):tt(19791,{wu:r})}function lI(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(H(kl,"New document in limbo: "+n),e.Eu.add(r),Ll(e))}function Ll(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new Y(Rt.fromString(t)),r=e.fu.next();e.Au.set(r,new Yv(n)),e.du=e.du.insert(n,r),Gd(e.remoteStore,new _n(Fe(yd(n.path)),r,"TargetPurposeLimboResolution",fo.ce))}}async function Qs(e,t,n){const r=st(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach(((l,u)=>{a.push(r.pu(u,t,n).then((f=>{var d;if((f||n)&&r.isPrimaryClient){const m=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(f){s.push(f);const m=Rl.As(u.targetId,f);i.push(m)}})))})),await Promise.all(a),r.Pu.H_(s),await(async function(u,f){const d=st(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>V.forEach(f,(E=>V.forEach(E.Es,(A=>d.persistence.referenceDelegate.addReference(m,E.targetId,A))).next((()=>V.forEach(E.ds,(A=>d.persistence.referenceDelegate.removeReference(m,E.targetId,A)))))))))}catch(m){if(!Fr(m))throw m;H(Cl,"Failed to update sequence numbers: "+m)}for(const m of f){const E=m.targetId;if(!m.fromCache){const A=d.Ms.get(E),D=A.snapshotVersion,U=A.withLastLimboFreeSnapshotVersion(D);d.Ms=d.Ms.insert(E,U)}}})(r.localStore,i))}async function cI(e,t){const n=st(e);if(!n.currentUser.isEqual(t)){H(kl,"User change. New user:",t.toKey());const r=await Hd(n.localStore,t);n.currentUser=t,(function(i,a){i.mu.forEach((l=>{l.forEach((u=>{u.reject(new G(N.CANCELLED,a))}))})),i.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Qs(n,r.Ls)}}function uI(e,t){const n=st(e),r=n.Au.get(t);if(r&&r.hu)return ut().add(r.key);{let s=ut();const i=n.Iu.get(t);if(!i)return s;for(const a of i){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function ap(e){const t=st(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=rp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=uI.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=iI.bind(null,t),t.Pu.H_=Kv.bind(null,t.eventManager),t.Pu.yu=Wv.bind(null,t.eventManager),t}function hI(e){const t=st(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=oI.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=aI.bind(null,t),t}class Yi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=Io(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return fv(this.persistence,new cv,t.initialUser,this.serializer)}Cu(t){return new qd(Sl.mi,this.serializer)}Du(t){return new Ev}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yi.provider={build:()=>new Yi};class fI extends Yi{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){yt(this.persistence.referenceDelegate instanceof Qi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new GT(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?fe.withCacheSize(this.cacheSizeBytes):fe.DEFAULT;return new qd((r=>Qi.mi(r,n)),this.serializer)}}class ja{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ch(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cI.bind(null,this.syncEngine),await jv(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new qv})()}createDatastore(t){const n=Io(t.databaseInfo.databaseId),r=(function(i){return new Av(i)})(t.databaseInfo);return(function(i,a,l,u){return new Cv(i,a,l,u)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,s,i,a,l){return new Vv(r,s,i,a,l)})(this.localStore,this.datastore,t.asyncQueue,(n=>ch(this.syncEngine,n,0)),(function(){return rh.v()?new rh:new Tv})())}createSyncEngine(t,n){return(function(s,i,a,l,u,f,d){const m=new Jv(s,i,a,l,u,f);return d&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(s){const i=st(s);H(Qn,"RemoteStore shutting down."),i.Ea.add(5),await Gs(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}ja.provider={build:()=>new ja};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):nn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dn="FirestoreClient";class pI{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=re.UNAUTHENTICATED,this.clientId=pl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,(async a=>{H(Dn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,(a=>(H(Dn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=Ol(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function aa(e,t){e.asyncQueue.verifyOperationInProgress(),H(Dn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async s=>{r.isEqual(s)||(await Hd(t.localStore,s),r=s)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function hh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await mI(e);H(Dn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((r=>ih(t.remoteStore,r))),e.setAppCheckTokenChangeListener(((r,s)=>ih(t.remoteStore,s))),e._onlineComponents=t}async function mI(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){H(Dn,"Using user provided OfflineComponentProvider");try{await aa(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(s){return s.name==="FirebaseError"?s.code===N.FAILED_PRECONDITION||s.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(n))throw n;Cr("Error using user provided cache. Falling back to memory cache: "+n),await aa(e,new Yi)}}else H(Dn,"Using default OfflineComponentProvider"),await aa(e,new fI(void 0));return e._offlineComponents}async function lp(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(H(Dn,"Using user provided OnlineComponentProvider"),await hh(e,e._uninitializedComponentsProvider._online)):(H(Dn,"Using default OnlineComponentProvider"),await hh(e,new ja))),e._onlineComponents}function gI(e){return lp(e).then((t=>t.syncEngine))}async function _I(e){const t=await lp(e),n=t.eventManager;return n.onListen=Zv.bind(null,t.syncEngine),n.onUnlisten=nI.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=tI.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=rI.bind(null,t.syncEngine),n}function yI(e,t,n={}){const r=new In;return e.asyncQueue.enqueueAndForget((async()=>(function(i,a,l,u,f){const d=new dI({next:E=>{d.Nu(),a.enqueueAndForget((()=>zv(i,m))),E.fromCache&&u.source==="server"?f.reject(new G(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(E)},error:E=>f.reject(E)}),m=new Gv(l,d,{includeMetadataChanges:!0,qa:!0});return Hv(i,m)})(await _I(e),e.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const up="firestore.googleapis.com",dh=!0;class ph{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new G(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=up,this.ssl=dh}else this.host=t.host,this.ssl=t.ssl??dh;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=$d;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<KT)throw new G(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}PE("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=cp(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,s){return r.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class bo{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ph({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new G(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ph(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new EE;switch(r.type){case"firstParty":return new wE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=fh.get(n);r&&(H("ComponentProvider","Removing Datastore"),fh.delete(n),r.terminate())})(this),Promise.resolve()}}function EI(e,t,n,r={}){var f;e=Bi(e,bo);const s=hl(t),i=e._getSettings(),a={...i,emulatorOptions:e._getEmulatorOptions()},l=`${t}:${n}`;s&&(G_(`https://${l}`),J_("Firestore",!0)),i.host!==up&&i.host!==l&&Cr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:r};if(!Li(u,a)&&(e._setSettings(u),r.mockUserToken)){let d,m;if(typeof r.mockUserToken=="string")d=r.mockUserToken,m=re.MOCK_USER;else{d=Q_(r.mockUserToken,(f=e._app)==null?void 0:f.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new G(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new re(E)}e._authCredentials=new TE(new Zf(d,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new So(this.firestore,t,this._query)}}class Yt{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wn(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Yt(this.firestore,t,this._key)}toJSON(){return{type:Yt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(zs(n,Yt._jsonSchema))return new Yt(t,r||null,new Y(Rt.fromString(n.referencePath)))}}Yt._jsonSchemaVersion="firestore/documentReference/1.0",Yt._jsonSchema={type:Ft("string",Yt._jsonSchemaVersion),referencePath:Ft("string")};class wn extends So{constructor(t,n,r){super(t,n,yd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Yt(this.firestore,null,new Y(t))}withConverter(t){return new wn(this.firestore,t,this._path)}}function ur(e,t,...n){if(e=xs(e),td("collection","path",t),e instanceof bo){const r=Rt.fromString(t,...n);return Cu(r),new wn(e,null,r)}{if(!(e instanceof Yt||e instanceof wn))throw new G(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return Cu(r),new wn(e.firestore,null,r)}}function TI(e,t,...n){if(e=xs(e),arguments.length===1&&(t=pl.newId()),td("doc","path",t),e instanceof bo){const r=Rt.fromString(t,...n);return Ru(r),new Yt(e,null,new Y(r))}{if(!(e instanceof Yt||e instanceof wn))throw new G(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Rt.fromString(t,...n));return Ru(r),new Yt(e.firestore,e instanceof wn?e.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="AsyncQueue";class gh{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kd(this,"async_queue_retry"),this._c=()=>{const r=oa();r&&H(mh,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=oa();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=oa();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new In;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!Fr(t))throw t;H(mh,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,nn("INTERNAL UNHANDLED ERROR: ",_h(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const s=Nl.createAndSchedule(this,t,n,r,(i=>this.hc(i)));return this.tc.push(s),s}uc(){this.nc&&tt(47125,{Pc:_h(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function _h(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Fl extends bo{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new gh,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new gh(t),this._firestoreClient=void 0,await t}}}function vI(e,t){const n=typeof e=="object"?e:lE(),r=typeof e=="string"?e:$i,s=rE(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=K_("firestore");i&&EI(s,...i)}return s}function hp(e){if(e._terminated)throw new G(N.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||II(e),e._firestoreClient}function II(e){var r,s,i;const t=e._freezeSettings(),n=(function(l,u,f,d){return new BE(l,u,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,cp(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(e._databaseId,((r=e._app)==null?void 0:r.options.appId)||"",e._persistenceKey,t);e._componentsProvider||(s=t.localCache)!=null&&s._offlineComponentProvider&&((i=t.localCache)!=null&&i._onlineComponentProvider)&&(e._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),e._firestoreClient=new pI(e._authCredentials,e._appCheckCredentials,e._queue,n,e._componentsProvider&&(function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}})(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Ie(Jt.fromBase64String(t))}catch(n){throw new G(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Ie(Jt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Ie._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(zs(t,Ie._jsonSchema))return Ie.fromBase64String(t.bytes)}}Ie._jsonSchemaVersion="firestore/bytes/1.0",Ie._jsonSchema={type:Ft("string",Ie._jsonSchemaVersion),bytes:Ft("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new G(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xt(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new G(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new G(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Be._jsonSchemaVersion}}static fromJSON(t){if(zs(t,Be._jsonSchema))return new Be(t.latitude,t.longitude)}}Be._jsonSchemaVersion="firestore/geoPoint/1.0",Be._jsonSchema={type:Ft("string",Be._jsonSchemaVersion),latitude:Ft("number"),longitude:Ft("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0})(this._values,t._values)}toJSON(){return{type:je._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(zs(t,je._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new je(t.vectorValues);throw new G(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}je._jsonSchemaVersion="firestore/vectorValue/1.0",je._jsonSchema={type:Ft("string",je._jsonSchemaVersion),vectorValues:Ft("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=/^__.*__$/;class AI{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new tr(t,this.data,this.fieldMask,n,this.fieldTransforms):new Ks(t,this.data,n,this.fieldTransforms)}}function dp(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{Ac:e})}}class Bl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new Bl({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){var s;const n=(s=this.path)==null?void 0:s.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return Ji(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(dp(this.Ac)&&wI.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class bI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||Io(t)}Cc(t,n,r,s=!1){return new Bl({Ac:t,methodName:n,Dc:r,path:Xt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function SI(e){const t=e._freezeSettings(),n=Io(e._databaseId);return new bI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function RI(e,t,n,r,s,i={}){const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);_p("Data must be an object, but it was:",a,r);const l=mp(r,a);let u,f;if(i.merge)u=new Re(a.fieldMask),f=a.fieldTransforms;else if(i.mergeFields){const d=[];for(const m of i.mergeFields){const E=CI(t,m,n);if(!a.contains(E))throw new G(N.INVALID_ARGUMENT,`Field '${E}' is specified in your field mask but missing from your input data.`);VI(d,E)||d.push(E)}u=new Re(d),f=a.fieldTransforms.filter((m=>u.covers(m.field)))}else u=null,f=a.fieldTransforms;return new AI(new ve(l),u,f)}function pp(e,t){if(gp(e=xs(e)))return _p("Unsupported field value:",t,e),mp(e,t);if(e instanceof fp)return(function(r,s){if(!dp(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)})(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,s){const i=[];let a=0;for(const l of r){let u=pp(l,s.wc(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}})(e,t)}return(function(r,s){if((r=xs(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return uT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ct.fromDate(r);return{timestampValue:Gi(s.serializer,i)}}if(r instanceof Ct){const i=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Gi(s.serializer,i)}}if(r instanceof Be)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ie)return{bytesValue:Md(s.serializer,r._byteString)};if(r instanceof Yt){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Al(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof je)return(function(a,l){return{mapValue:{fields:{[cd]:{stringValue:ud},[qi]:{arrayValue:{values:a.toArray().map((f=>{if(typeof f!="number")throw l.Sc("VectorValues must only contain numeric values.");return vl(l.serializer,f)}))}}}}}})(r,s);throw s.Sc(`Unsupported field value: ${ml(r)}`)})(e,t)}function mp(e,t){const n={};return rd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Jn(e,((r,s)=>{const i=pp(s,t.mc(r));i!=null&&(n[r]=i)})),{mapValue:{fields:n}}}function gp(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ct||e instanceof Be||e instanceof Ie||e instanceof Yt||e instanceof fp||e instanceof je)}function _p(e,t,n){if(!gp(n)||!ed(n)){const r=ml(n);throw r==="an object"?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function CI(e,t,n){if((t=xs(t))instanceof Ul)return t._internalPath;if(typeof t=="string")return yp(e,t);throw Ji("Field path arguments must be of type string or ",e,!1,void 0,n)}const PI=new RegExp("[~\\*/\\[\\]]");function yp(e,t,n){if(t.search(PI)>=0)throw Ji(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Ul(...t.split("."))._internalPath}catch{throw Ji(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Ji(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${r}`),a&&(u+=` in document ${s}`),u+=")"),new G(N.INVALID_ARGUMENT,l+e+u)}function VI(e,t){return e.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Yt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new DI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Tp("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class DI extends Ep{data(){return super.data()}}function Tp(e,t){return typeof t=="string"?yp(e,t):t instanceof Ul?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new G(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class NI{convertValue(t,n="none"){switch(Pn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ot(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(Cn(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw tt(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Jn(t,((s,i)=>{r[s]=this.convertValue(i,n)})),r}convertVectorValue(t){var r,s,i;const n=(i=(s=(r=t.fields)==null?void 0:r[qi].arrayValue)==null?void 0:s.values)==null?void 0:i.map((a=>Ot(a.doubleValue)));return new je(n)}convertGeoPoint(t){return new Be(Ot(t.latitude),Ot(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=mo(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ks(t));default:return null}}convertTimestamp(t){const n=Rn(t);return new Ct(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Rt.fromString(t);yt(jd(r),9688,{name:t});const s=new Ls(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||nn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OI(e,t,n){let r;return r=e?e.toFirestore(t):t,r}class mi{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class br extends Ep{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new bi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Tp("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=br._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}br._jsonSchemaVersion="firestore/documentSnapshot/1.0",br._jsonSchema={type:Ft("string",br._jsonSchemaVersion),bundleSource:Ft("string","DocumentSnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class bi extends br{data(t={}){return super.data(t)}}class Sr{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new mi(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new bi(this._firestore,this._userDataWriter,r.key,r,new mi(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map((l=>{const u=new bi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new mi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}}))}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((l=>i||l.type!==3)).map((l=>{const u=new bi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new mi(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:MI(l.type),doc:u,oldIndex:f,newIndex:d}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=Sr._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=pl.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach((i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function MI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:e})}}Sr._jsonSchemaVersion="firestore/querySnapshot/1.0",Sr._jsonSchema={type:Ft("string",Sr._jsonSchemaVersion),bundleSource:Ft("string","QuerySnapshot"),bundleName:Ft("string"),bundle:Ft("string")};class kI extends NI{constructor(t){super(),this.firestore=t}convertBytes(t){return new Ie(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Yt(this.firestore,null,n)}}function as(e){e=Bi(e,So);const t=Bi(e.firestore,Fl),n=hp(t),r=new kI(t);return xI(e._query),yI(n,e._query).then((s=>new Sr(t,r,e,s)))}function LI(e,t){const n=Bi(e.firestore,Fl),r=TI(e),s=OI(e.converter,t);return FI(n,[RI(SI(e.firestore),"addDoc",r._key,s,e.converter!==null,{}).toMutation(r._key,Ye.exists(!1))]).then((()=>r))}function FI(e,t){return(function(r,s){const i=new In;return r.asyncQueue.enqueueAndForget((async()=>sI(await gI(r),s,i))),i.promise})(hp(e),t)}(function(t,n=!0){(function(s){kr=s})(aE),Ui(new Ns("firestore",((r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Fl(new vE(r.getProvider("auth-internal")),new AE(a,r.getProvider("app-check-internal")),(function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new G(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ls(f.options.projectId,d)})(a,s),a);return i={useFetchStreams:n,...i},l._setSettings(i),l}),"PUBLIC").setMultipleInstances(!0)),wr(wu,Au,t),wr(wu,Au,"esm2020")})();var UI="firebase",BI="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */wr(UI,BI,"app");const jI={apiKey:"AIzaSyAMHJKh_yfgX0VxhFWXTAoJtB6V9OTU3II",authDomain:"cis371-a2af1.firebaseapp.com",projectId:"cis371-a2af1",storageBucket:"cis371-a2af1.firebasestorage.app",messagingSenderId:"2471886198",appId:"1:2471886198:web:9f820b8322b90658750e57"},vp=qf(jI),hr=vI(vp);window.__firebaseApp=vp;const Ro=I_("BeverageStore",{state:()=>({temps:[],bases:[],creamers:[],syrups:[],currentTemp:"Hot",currentBase:null,currentCreamer:null,currentSyrup:null,initialized:!1,beverages:[]}),actions:{async init(){this.initialized||(await this.loadData(),this.initialized=!0)},async loadData(){const e=await as(ur(hr,"temps"));console.log("temps fetched:",e.size),e.empty||(this.temps=e.docs.map(i=>i.id));const t=await as(ur(hr,"bases"));console.log("bases fetched:",t.size),t.empty||(this.bases=t.docs.map(i=>{const a=i.data();return{id:a.id,name:i.id,color:a.color}}),this.currentBase=this.bases[0]);const n=await as(ur(hr,"creamers"));console.log("creamers fetched:",n.size),n.empty||(this.creamers=n.docs.map(i=>{const a=i.data();return{id:a.id,name:i.id,color:a.color}}),this.currentCreamer=this.creamers[0]);const r=await as(ur(hr,"syrups"));r.empty||(this.syrups=r.docs.map(i=>{const a=i.data();return{id:a.id,name:i.id,color:a.color}}),this.currentSyrup=this.syrups[0]);const s=await as(ur(hr,"beverages"));s.empty||(this.beverages=s.docs.map(i=>{const a=i.data();return{name:a.name,temp:a.temp,base:a.base,creamer:a.creamer,syrup:a.syrup}}))},async createBeverage(e){return(await LI(ur(hr,"beverages"),{name:e.name,temp:e.temp,base:e.base,creamer:e.creamer,syrup:e.syrup})).id},makeBeverage(e){const t={name:e,temp:this.currentTemp,base:this.currentBase,creamer:this.currentCreamer,syrup:this.currentSyrup};this.beverages.push(t)},showBeverage(e){this.currentTemp=e.temp,this.currentBase=e.base,this.currentCreamer=e.creamer,this.currentSyrup=e.syrup},clearBeverages(){this.beverages=[]}},persist:!0}),$I=qs({__name:"Syrup",setup(e){const{currentSyrup:t}=ho(Ro());return Wn(t,n=>{console.log("[Syrup] currentSyrup changed:",n&&n.color)}),(n,r)=>{var s;return mt(),Nt("div",{class:"syrup",style:Or({backgroundColor:((s=xt(t))==null?void 0:s.color)??"#c6c6c6"})},null,4)}}}),qI=Yn($I,[["__scopeId","data-v-e448146a"]]),HI=qs({__name:"Base",setup(e){const{currentBase:t}=ho(Ro());return Wn(t,n=>{console.log("[Base] currentBase changed:",n&&n.color)}),(n,r)=>{var s;return mt(),Nt("div",{class:"baseBeverage",style:Or({backgroundColor:((s=xt(t))==null?void 0:s.color)??"#c8a97a"})},null,4)}}}),la=Yn(HI,[["__scopeId","data-v-e10ba170"]]),zI={class:"froth"},KI=qs({__name:"Creamer",setup(e){const{currentCreamer:t}=ho(Ro());return Wn(t,n=>{console.log("[Creamer] currentCreamer changed:",n&&n.color)}),(n,r)=>(mt(),Nt("div",zI,[(mt(),Nt(Lt,null,gn(5,s=>{var i;return jt("div",{key:s,class:"foam",style:Or({backgroundColor:((i=xt(t))==null?void 0:i.color)??"#e4e0d2"})},null,4)}),64))]))}}),WI=Yn(KI,[["__scopeId","data-v-622663d1"]]),GI={},QI={id:"steam"},XI={class:"stream"};function YI(e,t){return mt(),Nt("div",QI,[(mt(),Nt(Lt,null,gn(3,()=>jt("div",XI)),64))])}const JI=Yn(GI,[["render",YI]]),ZI={},tw={id:"condensation"},ew={class:"flake"};function nw(e,t){return mt(),Nt("div",tw,[(mt(),Nt(Lt,null,gn(3,()=>jt("div",ew)),64))])}const rw=Yn(ZI,[["render",nw]]),sw=qs({__name:"Beverage",props:{isIced:{type:Boolean},base:{},creamer:{},syrup:{}},setup(e){return(t,n)=>(mt(),Se(M_,null,{default:ls(()=>[e.isIced?(mt(),Se(rw,{key:0})):(mt(),Se(JI,{key:1})),Ae(D_,null,{top:ls(()=>[e.creamer.id==="c1"&&e.syrup.id==="s1"?(mt(),Se(la,{key:0})):(mt(),Se(WI,{key:1}))]),mid:ls(()=>[e.syrup.id==="s1"?(mt(),Se(la,{key:0})):(mt(),Se(qI,{key:1}))]),bottom:ls(()=>[Ae(la)]),_:1})]),_:1}))}}),iw=["id","value"],ow=["id","value"],aw=["id","value"],lw=["id","value"],cw={id:"beverage-container"},uw=["onClick"],hw=qs({__name:"App",setup(e){const t=so(""),n=Ro(),{temps:r,currentTemp:s,bases:i,currentBase:a,creamers:l,currentCreamer:u,syrups:f,currentSyrup:d}=ho(n);return nf(()=>{n.init&&n.init()}),(m,E)=>(mt(),Nt("div",null,[xt(a)&&xt(u)&&xt(d)?(mt(),Se(sw,{key:0,"is-iced":xt(s)==="Cold",base:xt(a),creamer:xt(u),syrup:xt(d)},null,8,["is-iced","base","creamer","syrup"])):xg("",!0),jt("ul",null,[jt("li",null,[(mt(!0),Nt(Lt,null,gn(xt(r),A=>(mt(),Nt("label",{key:A},[is(jt("input",{type:"radio",name:"temperature",id:`r${A}`,value:A,"onUpdate:modelValue":E[0]||(E[0]=D=>wt(s)?s.value=D:null)},null,8,iw),[[ci,xt(s)]]),us(" "+fr(A),1)]))),128))]),jt("li",null,[(mt(!0),Nt(Lt,null,gn(xt(i),A=>(mt(),Nt("label",{key:A.id},[is(jt("input",{type:"radio",name:"base",id:`r${A.id}`,value:A,"onUpdate:modelValue":E[1]||(E[1]=D=>wt(a)?a.value=D:null)},null,8,ow),[[ci,xt(a)]]),us(" "+fr(A.name),1)]))),128))]),jt("li",null,[(mt(!0),Nt(Lt,null,gn(xt(l),A=>(mt(),Nt("label",{key:A.id},[is(jt("input",{type:"radio",name:"creamer",id:`r${A.id}`,value:A,"onUpdate:modelValue":E[2]||(E[2]=D=>wt(u)?u.value=D:null)},null,8,aw),[[ci,xt(u)]]),us(" "+fr(A.name),1)]))),128))]),jt("li",null,[(mt(!0),Nt(Lt,null,gn(xt(f),A=>(mt(),Nt("label",{key:A.id},[is(jt("input",{type:"radio",name:"syrup",id:`r${A.id}`,value:A,"onUpdate:modelValue":E[3]||(E[3]=D=>wt(d)?d.value=D:null)},null,8,lw),[[ci,xt(d)]]),us(" "+fr(A.name),1)]))),128))])]),jt("label",null,[is(jt("input",{type:"text","onUpdate:modelValue":E[4]||(E[4]=A=>t.value=A),placeholder:"Beverage Name"},null,512),[[c_,t.value]])]),jt("button",{onClick:E[5]||(E[5]=A=>xt(n).makeBeverage(t.value))},"Make Beverage"),jt("div",cw,[(mt(!0),Nt(Lt,null,gn(xt(n).beverages,A=>(mt(),Nt("label",{key:A.name},[jt("button",{onClick:D=>xt(n).showBeverage(A)},fr(A.name),9,uw)]))),128))])]))}}),Ip=g_();Ip.use(R_);d_(hw).use(Ip).mount("#app");
